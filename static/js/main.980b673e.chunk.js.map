{"version":3,"sources":["TaiwanView/TaiwanVaccinationArea/AreaChart.module.css","TaiwanView/TaiwanNewCasesArea/AreaChart.module.css","TaiwanView/TaiwanMobilityLine/LineChart.module.css","TaiwanView/CasesByCountiesArea/AreaChart.module.css","GlobalView/NewCasesArea/AreaChart.module.css","GlobalView/DailyNewCasesWorldwideArea/LineChart.module.css","TaiwanView/CFRByGroupsBar/BarChart.module.css","TaiwanView/TaiwanOverviewPie/OverviewPie.module.css","TaiwanView/TaiwanTestsOverviewPie/OverviewPie.module.css","TaiwanView/ChoroplethMap/ChoroplethMap.module.css","GlobalView/OverviewPie/OverviewPie.module.css","fonts/NotoSansMono-CondensedBold.ttf","GitHubStarBtn.jsx","elements/AppTitle.js","elements/NavBar.js","elements/CommonUIs.js","TaiwanView/TaiwanOverviewPie/useCategories.jsx","TaiwanView/TaiwanOverviewPie/NavBar.js","TaiwanView/TaiwanOverviewPie/ColorLegend.jsx","TaiwanView/TaiwanOverviewPie/DataTable.jsx","TaiwanView/TaiwanOverviewPie/PieChart.jsx","TaiwanView/TaiwanOverviewPie/PieLabels.jsx","TaiwanView/TaiwanOverviewPie/PieTableLegendContainer.jsx","TaiwanView/TaiwanOverviewPie/Collapsible.jsx","TaiwanView/TaiwanOverviewPie/index.jsx","TaiwanView/TaiwanOverviewPie/useData.jsx","TaiwanView/TaiwanTestsOverviewPie/useData.jsx","TaiwanView/TaiwanTestsOverviewPie/Collapsible.jsx","TaiwanView/TaiwanTestsOverviewPie/ColorLegend.jsx","TaiwanView/TaiwanTestsOverviewPie/DataTable.jsx","TaiwanView/TaiwanTestsOverviewPie/PieChart.jsx","TaiwanView/TaiwanTestsOverviewPie/PieLabels.jsx","TaiwanView/TaiwanTestsOverviewPie/PieTableLegendContainer.jsx","TaiwanView/TaiwanTestsOverviewPie/index.jsx","TaiwanView/TaiwanTestsOverviewPie/useTests.jsx","TaiwanView/TaiwanNewCasesArea/useData.js","TaiwanView/TaiwanNewCasesArea/ChartTitle.jsx","TaiwanView/TaiwanNewCasesArea/DataTable.jsx","TaiwanView/TaiwanNewCasesArea/AxisBottom.js","TaiwanView/TaiwanNewCasesArea/AxisLeft.js","TaiwanView/TaiwanNewCasesArea/XMarkerLine.js","TaiwanView/TaiwanNewCasesArea/CursorLine.js","TaiwanView/TaiwanNewCasesArea/ColorLegend.jsx","TaiwanView/TaiwanNewCasesArea/Tooltip.jsx","TaiwanView/TaiwanNewCasesArea/RectOverlay.js","TaiwanView/TaiwanNewCasesArea/AreaChart.jsx","TaiwanView/TaiwanNewCasesArea/Collapsible.jsx","TaiwanView/TaiwanNewCasesArea/index.js","TaiwanView/TaiwanVaccinationArea/ChartTitle.jsx","TaiwanView/TaiwanVaccinationArea/DataTable.jsx","TaiwanView/TaiwanVaccinationArea/AxisBottom.js","TaiwanView/TaiwanVaccinationArea/AxisLeft.js","TaiwanView/TaiwanVaccinationArea/CursorLine.js","TaiwanView/TaiwanVaccinationArea/YMarkerLine.js","TaiwanView/TaiwanVaccinationArea/XMarkerLine.js","TaiwanView/TaiwanVaccinationArea/ColorLegend.jsx","TaiwanView/TaiwanVaccinationArea/Tooltip.jsx","TaiwanView/TaiwanVaccinationArea/PointerTrackerOverlay.jsx","TaiwanView/TaiwanVaccinationArea/AreaChart.jsx","TaiwanView/TaiwanVaccinationArea/Collapsible.jsx","TaiwanView/TaiwanVaccinationArea/index.js","TaiwanView/TaiwanVaccinationArea/useData.js","TaiwanView/ChoroplethMap/useData.js","TaiwanView/ChoroplethMap/AxisBottom.js","TaiwanView/ChoroplethMap/TaiwanMarks.js","TaiwanView/ChoroplethMap/Map.js","TaiwanView/ChoroplethMap/Collapsible.jsx","TaiwanView/ChoroplethMap/index.js","TaiwanView/ChoroplethMap/useTaiwanAtlas.js","TaiwanView/CFRByGroupsBar/useDeaths.jsx","TaiwanView/CFRByGroupsBar/useInfected.jsx","TaiwanView/CFRByGroupsBar/NavBar.js","TaiwanView/CFRByGroupsBar/AxisBottom.js","TaiwanView/CFRByGroupsBar/AxisLeft.js","TaiwanView/CFRByGroupsBar/Marks.js","TaiwanView/CFRByGroupsBar/Tooltip.jsx","TaiwanView/CFRByGroupsBar/BarChart.jsx","TaiwanView/CFRByGroupsBar/Collapsible.jsx","TaiwanView/CFRByGroupsBar/index.js","TaiwanView/CasesByCountiesArea/useData.js","TaiwanView/CasesByCountiesArea/ChartTitle.jsx","TaiwanView/CasesByCountiesArea/DropdownMenu.jsx","TaiwanView/CasesByCountiesArea/AxisBottom.js","TaiwanView/CasesByCountiesArea/AxisLeft.js","TaiwanView/CasesByCountiesArea/CursorLine.js","TaiwanView/CasesByCountiesArea/XMarkerLine.js","TaiwanView/CasesByCountiesArea/PathOverlay.js","TaiwanView/CasesByCountiesArea/Tooltip.jsx","TaiwanView/CasesByCountiesArea/AreaChart.jsx","TaiwanView/CasesByCountiesArea/Collapsible.jsx","TaiwanView/CasesByCountiesArea/index.js","TaiwanView/TaiwanMobilityLine/useData.js","TaiwanView/TaiwanMobilityLine/ChartTitle.jsx","TaiwanView/TaiwanMobilityLine/DropdownMenu.jsx","TaiwanView/TaiwanMobilityLine/DataTable.jsx","TaiwanView/TaiwanMobilityLine/AxisBottom.js","TaiwanView/TaiwanMobilityLine/AxisLeft.js","TaiwanView/TaiwanMobilityLine/YMarkerLine.js","TaiwanView/TaiwanMobilityLine/XMarkerLine.js","TaiwanView/TaiwanMobilityLine/ColorLegend.jsx","TaiwanView/TaiwanMobilityLine/LineChart.jsx","TaiwanView/TaiwanMobilityLine/Collapsible.jsx","TaiwanView/TaiwanMobilityLine/index.js","TaiwanView/TaiwanMobilityLine/useRegions.js","TaiwanView/index.js","GlobalView/OverviewPie/ColorLegend.jsx","GlobalView/OverviewPie/DataTable.jsx","GlobalView/OverviewPie/PieLabel.jsx","GlobalView/OverviewPie/PieChart.jsx","GlobalView/OverviewPie/Collapsible.jsx","GlobalView/OverviewPie/index.jsx","GlobalView/OverviewPie/useData.jsx","GlobalView/DailyNewCasesWorldwideArea/useData.js","GlobalView/DailyNewCasesWorldwideArea/ChartTitle.jsx","GlobalView/DailyNewCasesWorldwideArea/DataTable.jsx","GlobalView/DailyNewCasesWorldwideArea/AxisBottom.js","GlobalView/DailyNewCasesWorldwideArea/AxisLeft.js","GlobalView/DailyNewCasesWorldwideArea/XMarkerLine.js","GlobalView/DailyNewCasesWorldwideArea/RectOverlay.js","GlobalView/DailyNewCasesWorldwideArea/LineChart.jsx","GlobalView/DailyNewCasesWorldwideArea/Collapsible.jsx","GlobalView/DailyNewCasesWorldwideArea/index.js","GlobalView/AreasWithOutstandingCasesTable/RadioButton.jsx","GlobalView/AreasWithOutstandingCasesTable/DataTable.jsx","GlobalView/AreasWithOutstandingCasesTable/ChartTitle.jsx","GlobalView/AreasWithOutstandingCasesTable/index.js","GlobalView/AreasWithOutstandingCasesTable/useData.jsx","GlobalView/NewCasesArea/useData.js","GlobalView/NewCasesArea/ChartTitle.jsx","GlobalView/NewCasesArea/DataTable.jsx","GlobalView/NewCasesArea/AxisBottom.js","GlobalView/NewCasesArea/AxisLeft.js","GlobalView/NewCasesArea/CursorLine.js","GlobalView/NewCasesArea/ColorLegend.jsx","GlobalView/NewCasesArea/Tooltip.jsx","GlobalView/NewCasesArea/RectOverlay.js","GlobalView/NewCasesArea/AreaChart.jsx","GlobalView/NewCasesArea/index.js","GlobalView/NewCasesArea/useLocations.js","GlobalView/CaseFatalityRatesByAgeBarChart/AxisBottom.js","GlobalView/CaseFatalityRatesByAgeBarChart/AxisLeft.js","GlobalView/CaseFatalityRatesByAgeBarChart/Marks.js","GlobalView/CaseFatalityRatesByAgeBarChart/BarChart.jsx","GlobalView/CaseFatalityRatesByAgeBarChart/Collapsible.jsx","GlobalView/CaseFatalityRatesByAgeBarChart/index.js","GlobalView/CaseFatalityRatesByAgeBarChart/useData.js","GlobalView/index.js","App.js","serviceWorker.js","index.js","GlobalView/CaseFatalityRatesByAgeBarChart/BarChart.module.css","utils/useCookies.js"],"names":["module","exports","GitHubStarBtn","user","repo","style","marginTop","marginLeft","src","frameborder","scrolling","width","height","title","getToday","time","Date","getFullYear","getMonth","getDate","AppTitle","className","NavBar","view","setView","buttons","name","view_name","map","button","key","ViewButton","onClick","e","preventDefault","setCookie","type","LoadSpinner","Card","children","Footer","href","useCategories","useState","data","setData","useEffect","isMounted","json","CORS","then","rawData","d","date","a02","county","a03","area","a04","gender","a05","foreign","a06","ageGroup","a07","transformData","styles","nav","ColorLegend","colorScale","tickSpacing","tickSize","tickTextOffset","onHover","hoveredValue","fadeOpacity","domain","domainValue","index","legend","transform","onMouseEnter","onMouseLeave","opacity","fill","r","dy","x","DataTable","items","reduce","acc","cur","value","toLocaleString","PieChart","pieData","pieArc","colorPie","dataType","pieChart","case","PieLabels","dataValue","labelOffsetY","pieLabelPosition","centroid","endAngle","startAngle","dataPercentage","sum","toFixed","pieLabelStroke","textAnchor","dominantBaseline","pieLabel","window","innerWidth","pieRadius","Math","min","pieOuterMargin","pieInnerMargin","legendX","arc","innerRadius","outerRadius","PieTableLegendContainer","pieCenterLabel","setHoveredValue","useMemo","Object","keys","legendY","length","pie","sort","scaleOrdinal","range","schemeTableau10","viewBox","preserveAspectRatio","fontSize","fontWeight","legendLabel","y","SourceCredit","Collapsible","id","htmlFor","ChartTitle","countGroups","array","group","uniqueGroups","Array","from","Set","obj","groupObj","forEach","g","counter","TaiwanOverviewPie","viewData","useData","categoriesData","active","deaths","解除隔離","recovered","病中","死亡","oriGroups","replaceAll","convertStringToNumber","confirmed","excludedYesterday","confirmedYesterday","testsYesterday","tests","excluded","item","colorValue","legendItemSpacing","color","testsData","tableData","TaiwanTestsOverviewPie","peopleTested","useTests","parseDay","timeParse","api","csv","newCases","Taiwan","heading","AxisBottom","xScale","innerHeight","tickFormat","tickCount","tickOffset","ref","useRef","xAxisG","select","current","xAxis","axisBottom","ticks","tickPadding","call","selectAll","attr","tick","AxisLeft","yScale","yAxisG","yAxis","axisLeft","XMarkerLine","label","markerLineX","markerLineY2","markerLine","strokeDasharray","x1","y1","x2","y2","markerLineLabelStroke","writingMode","markerLineLabel","CursorLine","cursorLine","legendStroke","Tooltip","dataTop","dataDown","activeDate","xTooltipFormat","find","valueOf","RectOverlay","areaGenerator","points","captureArea","onTouchStart","event","bisectCenter","pointer","onPointerMove","onMouseMove","margin","xValue","xAxisTickFormat","timeFormat","yValue","roundedFormat","format","yAxisTickFormat","tickValue","AreaChart","setActiveDate","scaleTime","extent","nice","scaleLinear","max","handleVoronoiHover","useCallback","y0","areaGeneratorDown","marks","marksDown","dataPoint","tooltipStroke","tooltip","legendCircleRadius","sumValuesInObject","prev","TaiwanNewCasesArea","new_confirmed_data","new_deaths_data","filteredConfirmed","filter","filteredDeaths","sevenDayAvg","slice","prevSevenDayAvg","round","markerLineY1","alignmentBaseline","YMarkerLine","labelOffset","markerLineY","markerLineX2","PointerTrackerOverlay","yValues","people_vaccinated","people_fully_vaccinated","total_boosters","areaNames","areaColors","siFormat","replace","activeData","setActiveData","taiwanPopulation","multipleAreasGenerator","yAccessor","handleHover","stroke","TaiwanVaccinationArea","autoType","prevVaccinated","prevFullyVaccinated","prevTotal","row","total_vaccinations","offset","stopColor","TaiwanMarks","atlas","counties","compBorders","interiors","handlePointerMove","path","geoPath","features","feature","i","properties","COUNTYNAME","viewBoxWidth","legendWidth","legendPadding","Slider","selected","handleChange","sliderContainer","slider","indexOf","onChange","target","Map","selectedDate","setSelectedDate","setPoints","dataFilteredByAreas","allDates","reverse","dataSelectedByDate","scaleSequential","interpolateGreys","heatmapData","dateString","縣市別","累計確診人數","區域","ChoroplethMap","taiwanAtlas","topology","objects","nation","towns","mesh","a","b","useTaiwanAtlas","useDeaths","transformedData","a01","chronic","deathsByGender","deathsByAge","sortedDeathsByAge","age","useInfected","infectedByGender","infectedByAge","sortedInfectedByAge","bandwidth","Marks","tooltipFormat","onMove","tooltipOffset","strokeWidth","chartStyles","top","right","bottom","left","CFR","labelFormat","BarChart","trackPointer","scaleBand","paddingInner","CFRByGroupsBar","deathsData","infectedData","infected","dropdownItems","DropdownMenu","chosen","setChosen","handleTypeHover","handleCursorHover","setItems","currentTarget","PathOverlay","tooltipOffsetX","formatDate","stackedData","setWidth","activeDataPoint","setActiveDataPoint","scrollableDivRef","t","interpolateViridis","defined","minX","overwidth","flexCardWidth","document","getElementsByClassName","offsetWidth","initializeSVGWidth","node","scrollBy","position","pointerEvents","zIndex","overflowX","display","primary","StreamGraphWithHoverEffect","onPointerEnter","CasesByCountiesArea","filteredData","layer","layerGroupedData","layers","splice","dataArray","groupedData","dailyCountiesData","get","新增確診人數","push","stack","stackOffsetWiggle","order","stackOrderAscending","region","setLoading","driving","transit","walking","subregion_and_city","LineChart","schemeCategory10","lineGenerator","line","yValue1","lineGenerator2","yValue2","lineGenerator3","yValue3","axisLabel","TaiwanMobilityLine","loading","regions","useRegions","subregions","toLocaleDateString","TaiwanView","PieLabel","percentage","OverviewPie","World","curve","curveNatural","DailyNewCasesWorldwideArea","lastSevenDaysAvg","beforeSevenDaysAvg","RadioButton","checked","location","total_cases","new_cases","total_deaths","new_deaths","numerator","denominator","Number","country","sortTypes","AreasWithOutstandingCasesTable","sortBy","setSortBy","continent","NewCasesArea","setSelected","locations","useLocations","options","placeholder","countryScale","ageScale","ageGroups","countryValue","Country","columns","CaseFatalityRatesByAgeBarChart","GlobalView","App","cookieExists","findCookie","PullToRefresh","init","mainElement","onRefresh","reload","iconArrow","ReactDOMServer","renderToString","icon","faSyncAlt","iconRefreshing","spin","destroyAll","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message","cookie","split","startsWith","newCookie","some","trim"],"mappings":"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","file":"static/js/main.980b673e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"AreaChart_axisLabel__2fPGs\",\"primary\":\"AreaChart_primary__1hZ-8\",\"secondary\":\"AreaChart_secondary__1Twap\",\"third\":\"AreaChart_third__QMxqN\",\"tick\":\"AreaChart_tick__3FpEN\",\"markerLine\":\"AreaChart_markerLine__xijer\",\"markerLineLabel\":\"AreaChart_markerLineLabel__3_cqB\",\"markerLineLabelStroke\":\"AreaChart_markerLineLabelStroke__KZmM1\",\"cursorLine\":\"AreaChart_cursorLine__2v8r_\",\"captureArea\":\"AreaChart_captureArea__2JADi\",\"dataPoint\":\"AreaChart_dataPoint__3WLiC\",\"tooltip\":\"AreaChart_tooltip__hteRd\",\"tooltipStroke\":\"AreaChart_tooltipStroke__zx4Qc\",\"legend\":\"AreaChart_legend__zjzU7\",\"legendStroke\":\"AreaChart_legendStroke__1X5we\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"AreaChart_axisLabel__5XHsT\",\"marks\":\"AreaChart_marks__2G7MT\",\"marksDown\":\"AreaChart_marksDown__UyMdG\",\"tick\":\"AreaChart_tick__3MRek\",\"markerLine\":\"AreaChart_markerLine__36MSZ\",\"markerLineLabel\":\"AreaChart_markerLineLabel__36Kxd\",\"markerLineLabelStroke\":\"AreaChart_markerLineLabelStroke__2LZ7n\",\"cursorLine\":\"AreaChart_cursorLine__RJ2aZ\",\"captureArea\":\"AreaChart_captureArea__2bdw1\",\"dataPoint\":\"AreaChart_dataPoint__3YTf0\",\"tooltip\":\"AreaChart_tooltip__3k8Kw\",\"tooltipStroke\":\"AreaChart_tooltipStroke__wO-u4\",\"nav\":\"AreaChart_nav__1qzG6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"LineChart_axisLabel__1LkT5\",\"line\":\"LineChart_line__2oRKE\",\"tick\":\"LineChart_tick__1oFx8\",\"markerLine\":\"LineChart_markerLine__3KKE9\",\"markerLineLabel\":\"LineChart_markerLineLabel__gajax\",\"markerLineLabelStroke\":\"LineChart_markerLineLabelStroke__5C0q5\",\"cursorLine\":\"LineChart_cursorLine__j_nVV\",\"captureArea\":\"LineChart_captureArea__1tieL\",\"dataPoint\":\"LineChart_dataPoint__1z2Q2\",\"tooltip\":\"LineChart_tooltip__ewJfn\",\"tooltipStroke\":\"LineChart_tooltipStroke__3Y4Wg\",\"legend\":\"LineChart_legend__6gwnu\",\"legendStroke\":\"LineChart_legendStroke__1EVqV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"AreaChart_axisLabel__1IBFP\",\"areaLabel\":\"AreaChart_areaLabel__xitdM\",\"primary\":\"AreaChart_primary__S1qiG\",\"secondary\":\"AreaChart_secondary__-g2kW\",\"tick\":\"AreaChart_tick__1WyOy\",\"markerLine\":\"AreaChart_markerLine__X_jjp\",\"markerLineLabel\":\"AreaChart_markerLineLabel__3EMdD\",\"markerLineLabelStroke\":\"AreaChart_markerLineLabelStroke__1OP6q\",\"cursorLine\":\"AreaChart_cursorLine__H6QT-\",\"captureArea\":\"AreaChart_captureArea__17Aig\",\"dataPoint\":\"AreaChart_dataPoint__JA3KJ\",\"tooltip\":\"AreaChart_tooltip__2qVCW\",\"tooltipStroke\":\"AreaChart_tooltipStroke__1ZPoE\",\"legend\":\"AreaChart_legend__1vI5n\",\"legendStroke\":\"AreaChart_legendStroke__1VAM9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"AreaChart_axisLabel__1BZxp\",\"marks\":\"AreaChart_marks__1RRqk\",\"marksDown\":\"AreaChart_marksDown__2of59\",\"tick\":\"AreaChart_tick__7-s8G\",\"markerLine\":\"AreaChart_markerLine__fLKcc\",\"markerLineLabel\":\"AreaChart_markerLineLabel__xTA18\",\"markerLineLabelStroke\":\"AreaChart_markerLineLabelStroke__3y6SN\",\"cursorLine\":\"AreaChart_cursorLine__21Hqk\",\"captureArea\":\"AreaChart_captureArea__1Ox93\",\"dataPoint\":\"AreaChart_dataPoint__2ue2O\",\"tooltip\":\"AreaChart_tooltip__3xTT3\",\"tooltipStroke\":\"AreaChart_tooltipStroke__3EjxC\",\"nav\":\"AreaChart_nav__2EXGQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"LineChart_axisLabel__1-97Z\",\"marks\":\"LineChart_marks__11N8a\",\"tick\":\"LineChart_tick__yUXMe\",\"markerLine\":\"LineChart_markerLine__3kErs\",\"voronoi\":\"LineChart_voronoi__2zZI6\",\"captureArea\":\"LineChart_captureArea__hSXqA\",\"dataPoint\":\"LineChart_dataPoint__1iKpg\",\"tooltip\":\"LineChart_tooltip__2_Kd8\",\"tooltipStroke\":\"LineChart_tooltipStroke__1QqwS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"BarChart_axisLabel__2-9Bw\",\"marks\":\"BarChart_marks__yHRyn\",\"tooltip\":\"BarChart_tooltip__3jn8Q\",\"tooltipStroke\":\"BarChart_tooltipStroke__2ytli\",\"tick\":\"BarChart_tick__3VW2r\",\"legendLabel\":\"BarChart_legendLabel__1fB-B\",\"legend\":\"BarChart_legend__VJ36v\",\"nav\":\"BarChart_nav__1Seek\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart__2EFDR\",\"pieLabel\":\"OverviewPie_pieLabel__uPT91\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__1SyMy\",\"legendLabel\":\"OverviewPie_legendLabel__l9Ve0\",\"legend\":\"OverviewPie_legend__2UIkD\",\"nav\":\"OverviewPie_nav__1vWZo\",\"hideshow\":\"OverviewPie_hideshow__3BMBg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart__15fCk\",\"pieLabel\":\"OverviewPie_pieLabel__dryXg\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__uz8Cz\",\"legendLabel\":\"OverviewPie_legendLabel__2ffI6\",\"legend\":\"OverviewPie_legend__Svigk\",\"hideshow\":\"OverviewPie_hideshow__8JcRd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"marks\":\"ChoroplethMap_marks__Ia8M_\",\"interiors\":\"ChoroplethMap_interiors__1c6ly\",\"sphere\":\"ChoroplethMap_sphere__253Ra\",\"graticules\":\"ChoroplethMap_graticules__1pM2M\",\"tick\":\"ChoroplethMap_tick__1KjU2\",\"menus-container\":\"ChoroplethMap_menus-container__s4izW\",\"axis-label\":\"ChoroplethMap_axis-label__3xZac\",\"dropdown-label\":\"ChoroplethMap_dropdown-label__2PVQG\",\"Dropdown-root\":\"ChoroplethMap_Dropdown-root__Q0kxi\",\"Dropdown-menu\":\"ChoroplethMap_Dropdown-menu__3rY1g\",\"sliderContainer\":\"ChoroplethMap_sliderContainer__3H94e\",\"tooltip\":\"ChoroplethMap_tooltip__-fR-T\",\"tooltipStroke\":\"ChoroplethMap_tooltipStroke__2yB2m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart__2qoEZ\",\"pieLabel\":\"OverviewPie_pieLabel__3Z03q\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__GFSqY\",\"legendLabel\":\"OverviewPie_legendLabel__xD4s4\",\"legend\":\"OverviewPie_legend__2n99N\",\"hideshow\":\"OverviewPie_hideshow__5FUxk\"};","export default __webpack_public_path__ + \"static/media/NotoSansMono-CondensedBold.e667a45f.ttf\";","export const GitHubStarBtn = ({ user, repo }) => (\n  <div style={{ marginTop: \"0.5rem\", marginLeft: \"0.5rem\" }}>\n    <iframe\n      src={`https://ghbtns.com/github-btn.html?user=${user}&repo=${repo}&type=star&count=false&size=large`}\n      frameborder=\"0\"\n      scrolling=\"0\"\n      width=\"170\"\n      height=\"30\"\n      title=\"GitHub\"\n    />\n  </div>\n);\n","import React from \"react\";\n\n// SMALL COMPONENTS / HELPER FUNCTIONS\nfunction getToday() {\n  var time = new Date();\n  var year = time.getFullYear();\n  var month = time.getMonth() + 1;\n  var date = time.getDate();\n  var formattedDate = year + \"/\" + month + \"/\" + date;\n  return formattedDate;\n}\n\nexport const AppTitle = () => {\n  return (\n    <div className=\"app-title\">\n      <h1>\n        Covid<span className=\"title-numerals\">-19</span> Dashboard\n      </h1>\n      <h2 className=\"title-date\">{getToday()}</h2>\n    </div>\n  );\n};\n","import React from \"react\";\n// import PropTypes from \"prop-types\";\nimport { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"Global\",\n      view_name: \"global\",\n      className: view === \"global\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"台灣版\",\n      view_name: \"taiwan\",\n      className: view === \"taiwan\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className=\"nav\">\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const LoadSpinner = () => {\n  return (\n    <div className=\"lds-spinner\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n};\n\nexport const Card = ({ children, className }) => (\n  <li className={`flex-card-listitem${className ? \" \" + className : \"\"}`}>\n    <div className=\"flex-card\">{children}</div>\n  </li>\n);\n\nCard.propTypes = {\n  children: PropTypes.node,\n};\n\nexport const Footer = () => (\n  <div className=\"footer\">\n    <p>\n      © 2021 <a href=\"https://eternallogger.com\">George Huang</a>. All rights\n      reserved.\n    </p>\n  </div>\n);\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\n// const csvUrl =\n//   \"https://gist.githubusercontent.com/mgeorgetw/413b23d87907b0f9bcda46e6e103cfb6/raw/csse_covid_19_daily_reports_vaccine_city_c.csv\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5001&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\n// const convertStringToNumber = (d) => {\n//   Object.keys(d).forEach((key) => {\n//     if (typeof d[key] !== \"number\") {\n//       d[key] = d[key].replace(/,/g, \"\");\n//       d[key] = +d[key];\n//     }\n//   });\n//   return d;\n// };\n\n// const row = (d) => {\n//   d.id = +d[\"ID\"];\n//   d.date = new Date(d[\"日期\"]);\n//   d.county = d[\"縣市別\"];\n//   d.population = +d[\"總人口數\"].replace(/,/g, \"\");\n//   d.lastTotalVaccinated = +d[\"前次累計接種人數更新\"].replace(/,/g, \"\");\n//   d.newVaccinated = +d[\"新增接種人數\"].replace(/,/g, \"\");\n//   d.totalVaccinated = +d[\"累計接種人數\"].replace(/,/g, \"\");\n//   d.totalVaccinatedRate = +d[\"累計接種率 (%)\"].replace(/,|%/g, \"\");\n//   d.vaccinesCount = +d[\"累計配送劑數\"].replace(/,/g, \"\");\n//   d.vaccinesLeftRate = +d[\"剩餘庫存量 (%)\"].replace(/,|%/g, \"\");\n//   d.vaccinesCountRate = (d.vaccinesCount / d.population) * 100;\n//   return d;\n// };\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d.date = new Date(d.a02);\n    d.county = d.a03;\n    d.area = d.a04;\n    d.gender = d.a05;\n    d.foreign = d.a06;\n    d.ageGroup = d.a07;\n    return d;\n  });\n\n// Data: Detailed Covid-19 cases in Taiwan\nexport const useCategories = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    // csv(csvUrl, row).then((d) => {\n    //   console.log(\"csv data\", d);\n    //   if (isMounted) setData(d);\n    // });\n    json(jsonUrl).then((rawData) => {\n      // console.log(\"json data\", transformData(rawData));\n      if (isMounted) setData(transformData(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\n// import PropTypes from \"prop-types\";\n// import { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"現況\",\n      view_name: \"condition\",\n      className: view === \"condition\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"年齡層\",\n      view_name: \"age\",\n      className: view === \"age\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"生理性別\",\n      view_name: \"gender\",\n      className: view === \"gender\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className={styles.nav}>\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    // setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => (\n  <div className=\"small-table\">\n    <table>\n      <thead>\n        <tr>\n          <th>總確診數</th>\n          {/* {items.map((item) => ( */}\n          {/*   <th key={dataType(item)}>{dataType(item)}</th> */}\n          {/* ))} */}\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td className=\"numerical-data\">\n            {items.reduce((acc, cur) => acc + cur.value, 0).toLocaleString()}\n          </td>\n          {/* {items.map((item, index) => ( */}\n          {/*   <td className=\"numerical-data\" key={index}> */}\n          {/*     {dataValue(item).toLocaleString()} */}\n          {/*   </td> */}\n          {/* ))} */}\n        </tr>\n      </tbody>\n    </table>\n  </div>\n);\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorScale,\n  dataType,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onClick={() => onHover(domainValue)}\n        onMouseEnter={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={d.data.case}\n      >\n        <path fill={colorScale(domainValue)} d={pieArc(d)} />\n      </g>\n    );\n  });\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieLabels = ({\n  pieData,\n  pieArc,\n  colorPie,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n  labelOffsetY = 18,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 1.65;\n      pieLabelPosition[1] *= 1.65;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <text\n          className={styles.pieLabelStroke}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n        <text\n          className={styles.pieLabel}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n      </g>\n    );\n  });\n","import React, { useState, useMemo } from \"react\";\nimport { arc, pie, scaleOrdinal, schemeTableau10 } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\nimport { PieLabels } from \"./PieLabels\";\n// import { AnimatedPieHooks } from \"./AnimatedPieHooks\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.7;\n\nconst pieRadius = Math.min(width * 0.66, height) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\nconst pieInnerMargin = pieRadius * 0.25;\n\nconst legendX = width * 0.66;\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\n\nconst fadeOpacity = 0.3;\n\nconst pieArc = arc()\n  .innerRadius(0)\n  .outerRadius(pieOuterMargin)\n  .innerRadius(pieInnerMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\n\nconst colorLegendLabel = \"案例別\";\n\nexport const PieTableLegendContainer = ({ data, view }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const pieData = useMemo(\n    () =>\n      Object.keys(data).map((key) => ({\n        case: key,\n        value: data[key],\n      })),\n    [data]\n  );\n  // console.log(pieData);\n\n  const legendY = useMemo(\n    () => (height - (pieData.length - 1) * legendItemSpacing) / 2,\n    [pieData]\n  );\n\n  let pieCenterLabel;\n  switch (view) {\n    case \"condition\":\n      pieCenterLabel = \"況\";\n      break;\n    case \"age\":\n      pieCenterLabel = \"年\";\n      break;\n    case \"gender\":\n      pieCenterLabel = \"性\";\n      break;\n    default:\n      pieCenterLabel = \"\";\n      break;\n  }\n\n  const colorPie = useMemo(() => pie().sort(null).value(dataValue), []);\n\n  const colorScale = useMemo(\n    () => scaleOrdinal().domain(pieData.map(dataType)).range(schemeTableau10),\n    [pieData]\n  );\n\n  return (\n    <>\n      <DataTable items={pieData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieRadius},${height / 2})`}>\n          <text\n            dominantBaseline=\"middle\"\n            textAnchor=\"middle\"\n            dy=\".1em\"\n            fontSize={pieInnerMargin}\n            fontWeight=\"bold\"\n          >\n            {pieCenterLabel}\n          </text>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorScale={colorScale}\n            pieArc={pieArc}\n            dataType={dataType}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n          <PieLabels\n            pieData={pieData}\n            colorPie={colorPie}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n          {/* <AnimatedPieHooks */}\n          {/*   data={pieData} */}\n          {/*   innerRadius={pieInnerMargin} */}\n          {/*   outerRadius={pieOuterMargin} */}\n          {/*   dataValue={dataValue} */}\n          {/* /> */}\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {colorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：衛生福利部疾病管制署（API：{\" \"}\n    <a href=\"https://disease.sh\">disease.sh</a>、\n    <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n      國家高速網路與計算中心\n    </a>\n    。資料收集：\n    <a href=\"https://www.worldometers.info/coronavirus/#countries\">\n      Worldometer\n    </a>\n    、\n    <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n      國家高速網路與計算中心\n    </a>\n    ）。\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表的用意是呈現此時此刻COVID-19在台灣的疫情概況。左上角的「總確診數」代表篩檢陽性案例的總計，不過，由於並非所有人都經過篩檢，這個數目並不足以代表社會中真正染疫的人數，頂多代表目前已知的確診人數而已。\n          </p>\n          <p>\n            正如圓餅圖所示，總確診數可以細分為三類：病中、死亡、解除隔離。此處列出解除隔離的比例，用意在顯示台灣距離疫病的終點還有多遠。但要知道，這組「恢復鐘」在疫情迅速增溫的時候是有可能倒轉的。病中案例代表目前還未康復、正在與疾病奮鬥中的人們。根據《紐約時報》\n            <a href=\"https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html\">\n              一篇疫情爆發初期的報導\n            </a>\n            ，大多數染疫者最終都會康復，確診者的死亡比例可能會小於百分之三。\n          </p>\n          <p>\n            2021年6月20日新增「年齡層」與「生理性別」兩種區分法。COVID-19的染病致死率與年齡的關係密切，由此或可大致推估整體不幸病死人數會有多少。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useData } from \"./useData\";\nimport { useCategories } from \"./useCategories\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { NavBar } from \"./NavBar\";\nimport { PieTableLegendContainer } from \"./PieTableLegendContainer\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"COVID-19 台灣染疫現況\";\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nconst countGroups = (array, group) => {\n  const uniqueGroups = Array.from(new Set(array.map((obj) => obj[group])));\n  let groupObj = {};\n  uniqueGroups.forEach((g) => {\n    groupObj[g] = array.reduce(\n      (counter, obj) => (obj[group] === g ? (counter += 1) : counter),\n      0\n    );\n  });\n  return groupObj;\n};\n\nexport const TaiwanOverviewPie = () => {\n  const [view, setView] = useState(\"condition\");\n  const data = useData();\n  const categoriesData = useCategories();\n  if (!data || !categoriesData || !categoriesData.length)\n    return <LoadSpinner />;\n\n  let viewData;\n  switch (view) {\n    case \"condition\":\n      viewData = (({ active, deaths, recovered }) => ({\n        解除隔離: recovered,\n        病中: active,\n        死亡: deaths,\n      }))(data);\n      break;\n    case \"gender\":\n      viewData = countGroups(categoriesData, \"gender\");\n      break;\n    case \"age\":\n      let oriGroups = countGroups(categoriesData, \"ageGroup\");\n      viewData = ((obj) => ({\n        \"0-9\":\n          obj[\"0\"] + obj[\"1\"] + obj[\"2\"] + obj[\"3\"] + obj[\"4\"] + obj[\"5-9\"],\n        \"10-19\": obj[\"10-14\"] + obj[\"15-19\"],\n        \"20-29\": obj[\"20-24\"] + obj[\"25-29\"],\n        \"30-39\": obj[\"30-34\"] + obj[\"35-39\"],\n        \"40-49\": obj[\"40-44\"] + obj[\"45-49\"],\n        \"50-59\": obj[\"50-54\"] + obj[\"55-59\"],\n        \"60-69\": obj[\"60-64\"] + obj[\"65-69\"],\n        \"70+\": obj[\"70+\"],\n      }))(oriGroups);\n      break;\n    default:\n      viewData = data;\n      break;\n  }\n  return (\n    <>\n      <ChartTitle title={title} />\n      <NavBar view={view} setView={setView} />\n      <PieTableLegendContainer data={viewData} view={view} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\n// 20210617 疾管署 no longer provides recovered data on its Google Site.\n// const jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash3\";\nconst jsonUrl = \"https://disease.sh/v3/covid-19/countries/Taiwan?strict=true\";\n\n// const convertStringToNumber = (d) => {\n//   Object.keys(d).forEach((key) => {\n//     if (typeof d[key] !== \"number\") {\n//       d[key] = d[key].replace(\",\", \"\");\n//       d[key] = +d[key];\n//     }\n//   });\n//   return d;\n// };\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then(setData);\n    // json(jsonUrl).then((d) => {\n    //   d = convertStringToNumber(d[0]);\n    //   d.confirmed = +d[\"確診\"];\n    //   d.recovered = +d[\"解除隔離\"];\n    //   d.deaths = +d[\"死亡\"];\n    //   d.excludedYesterday = +d[\"昨日排除\"];\n    //   d.confirmedYesterday = +d[\"昨日確診\"];\n    //   d.testsYesterday = +d[\"昨日送驗\"];\n    //   d.tests = +d[\"送驗\"];\n    //   d.excluded = +d[\"排除\"];\n    //   setData(d);\n    // });\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash3\";\n\nconst convertStringToNumber = (d) => {\n  Object.keys(d).forEach((key) => {\n    if (typeof d[key] !== \"number\") {\n      d[key] = d[key].replaceAll(\",\", \"\");\n      d[key] = +d[key];\n    }\n  });\n  return d;\n};\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((d) => {\n      d = convertStringToNumber(d[0]);\n      d.confirmed = +d[\"確診\"];\n      d.recovered = +d[\"解除隔離\"];\n      d.deaths = +d[\"死亡\"];\n      d.excludedYesterday = +d[\"昨日排除\"];\n      d.confirmedYesterday = +d[\"昨日確診\"];\n      d.testsYesterday = +d[\"昨日送驗\"];\n      d.tests = +d[\"送驗\"];\n      d.excluded = +d[\"排除\"];\n      setData(d);\n    });\n  }, []);\n  return data;\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：\n    <a href=\"https://sites.google.com/cdc.gov.tw/2019ncov/taiwan\">\n      衛生福利部疾病管制署\n    </a>\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>這張圓餅圖用來顯示此時此刻COVID-19在台灣的篩檢工作現況。</p>\n          <p>\n            整塊大餅表示台灣從有疫情以來累計的檢驗件數；要注意件數不代表人數，因為一個人可能檢驗不只一次，所以這個數字會比累計檢驗人數要多。整個大餅又分成兩大塊：\n          </p>\n          <ul>\n            <li>灰色的：已檢驗，未通報。</li>\n            <li>彩色的：已通報案例。</li>\n          </ul>\n          <p>\n            並非所有的檢驗案例都須通報，由\n            <a href=\"https://www.cdc.gov.tw/Category/MPage/np0wef4IjYh9hvbiW2BnoQ#collapseOne84473\">\n              疾管署的規定\n            </a>\n            看來，驗心安的案例就不會通報上傳。然而，這個灰色區塊卻也是盲點所在。台灣由於上傳通報系統存在「塞車」的問題，代表有些已經檢驗且符合通報標準的案例並沒有即時通報。這些案例以及未來可能的「校正回歸」都包納在灰色的「已檢驗，未通報」區塊中。大餅的彩色部分則是已通報的件數，這又可以區分為三塊：\n          </p>\n          <ul>\n            <li>通報確診。</li>\n            <li>通報排除。</li>\n            <li>通報待確認。</li>\n          </ul>\n          <p>\n            獲通報的案例正常來說只有兩個可能，不是確診就是排除，因此不應該存在第三類。然而在通報之後、確認檢驗結果之前，還是存在時間差。據\n            <a href=\"https://health.udn.com/health/story/120950/5479893\">\n              《聯合報元氣網》的報導\n            </a>\n            ，此處的落差大多來自於各種缺件，也包括正在檢驗中，或是預先通報卻尚未採檢的情形。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items, dataType, dataValue }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item) => (\n              <th key={dataType(item)}>{dataType(item)}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {dataValue(item).toLocaleString()}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React from \"react\";\n// import { useEffect, useRef } from \"react\";\n// import { select, transition } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorValue,\n  dataType,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) => {\n  // const refPie = useRef(null);\n  // useEffect(() => {\n  //   const t = transition().duration(750).text(\"agggg\").style(\"fill\", \"red\");\n\n  //   const textG = select(refPie.current);\n  //   textG.enter().transition(t);\n  // }, []);\n  return colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <path fill={colorValue(d.data)} d={pieArc(d)} />\n      </g>\n    );\n  });\n};\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieLabels = ({\n  pieData,\n  pieArc,\n  colorPie,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n  labelOffsetY = 18,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 2.4;\n      pieLabelPosition[1] *= 2.4;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <text\n          className={styles.pieLabelStroke}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n        <text\n          className={styles.pieLabel}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n      </g>\n    );\n  });\n","import React, { useState, useMemo } from \"react\";\nimport { arc, pie, scaleOrdinal } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\nimport { PieLabels } from \"./PieLabels\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.7 : width * 0.8;\n\nconst pieRadius = (width * 0.66) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\n\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\nconst legendX = width * 0.66;\nconst legendY = pieRadius - legendItemSpacing / 2;\n\nconst fadeOpacity = 0.3;\n\nconst pieArc = arc().innerRadius(0).outerRadius(pieOuterMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\nconst colorValue = (d) => d.color;\n\nconst ColorLegendLabel = \"篩檢現況\";\n\nexport const PieTableLegendContainer = ({ data, testsData }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  const tableData = [\n    {\n      case: \"累計檢驗件數\",\n      value: testsData.tests,\n    },\n    {\n      case: \"累計通報件數\",\n      value: data.tests,\n    },\n    {\n      case: \"昨日通報件數\",\n      value: data.testsYesterday,\n    },\n  ];\n\n  const pieData = useMemo(\n    () => [\n      {\n        case: \"檢驗未通報\",\n        value: testsData.tests - data.tests,\n        color: \"#E5E2E0\",\n      },\n      {\n        case: \"通報確診\",\n        value: data.confirmed,\n        color: \"#005D6E\",\n      },\n      {\n        case: \"通報排除\",\n        value: data.excluded,\n        color: \"#42A5B3\",\n      },\n      {\n        case: \"通報待確認\",\n        value: data.tests - data.excluded - data.confirmed,\n        color: \"#BD2D28\",\n      },\n    ],\n    [data, testsData]\n  );\n\n  const colorPie = useMemo(() => pie().sort(null).value(dataValue), []);\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain(pieData.map(dataType))\n        .range(pieData.map(colorValue)),\n    [pieData]\n  );\n\n  return (\n    <>\n      <DataTable items={tableData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieRadius},${height / 2})`}>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n          <PieLabels\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {ColorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { useTests } from \"./useTests\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\nimport { PieTableLegendContainer } from \"./PieTableLegendContainer.jsx\";\n\nconst title = \"COVID-19 台灣篩檢現況\";\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const TaiwanTestsOverviewPie = () => {\n  const data = useData();\n  const testsData = useTests();\n  if (!data || !testsData) return <LoadSpinner />;\n  return (\n    <>\n      <ChartTitle title={title} />\n      <PieTableLegendContainer data={data} testsData={testsData} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash7\";\n\n// Use JSON data\nexport const useTests = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((d) => {\n      d = d[0];\n      d.peopleTested = +d[\"檢驗人數\"].replaceAll(\",\", \"\");\n      d.tests = +d[\"檢驗件數\"].replaceAll(\",\", \"\");\n      d.date = new Date(d[\"資料更新時間\"]);\n      setData(d);\n    });\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, timeParse } from \"d3\";\n\nconst parseDay = timeParse(\"%Y-%m-%d\");\n\nconst transform = (rawData) => {\n  return rawData.map((d) => ({\n    date: parseDay(d.date),\n    newCases: +d.Taiwan,\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useData = (api) => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(api).then((rawData) => {\n      if (isMounted) setData(transform(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [api]);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        x={markerLineX - 15}\n        y={5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        x={markerLineX - 15}\n        y={5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const CursorLine = ({ value, xScale, height }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <line\n      className={styles.cursorLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(${index * tickSpacing}, 0)`}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legendStroke}>\n        {domainValue}\n      </text>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legend}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","export const Tooltip = ({\n  colorScale,\n  dataTop,\n  dataDown,\n  activeDate,\n  className,\n  xTooltipFormat,\n}) => (\n  <text className={className} textAnchor={\"end\"}>\n    <tspan x=\"-10\">{xTooltipFormat(activeDate)}</tspan>\n    <tspan x=\"-10\" dy=\"1.2em\" fontWeight=\"bold\" fill={colorScale.range()[0]}>\n      +\n      {dataTop\n        .find((obj) => obj.date.valueOf() === activeDate.valueOf())\n        .newCases.toLocaleString()}\n    </tspan>\n    <tspan x=\"-10\" dy=\"1.2em\" fontWeight=\"bold\" fill={colorScale.range()[1]}>\n      +\n      {dataDown\n        .find((obj) => obj.date.valueOf() === activeDate.valueOf())\n        .newCases.toLocaleString()}\n    </tspan>\n  </text>\n);\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\nexport const RectOverlay = ({\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  return useMemo(() => {\n    const points = data.map((d) => areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <rect\n          width={innerWidth}\n          height={innerHeight}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index].date);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index].date);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index].date);\n          }}\n        />\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  scaleOrdinal,\n  area,\n  timeFormat,\n  extent,\n  max,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { CursorLine } from \"./CursorLine\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { Tooltip } from \"./Tooltip\";\nimport { RectOverlay } from \"./RectOverlay\";\nimport styles from \"./AreaChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 30, right: 10, bottom: 70, left: 40 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d\");\n\nconst yValue = (d) => d.newCases;\n// const yAxisLabel = \"New cases\";\n// const yAxisLabelOffset = 60;\nconst roundedFormat = format(\"d\");\nconst yAxisTickFormat = (tickValue) =>\n  roundedFormat(tickValue < 0 ? -tickValue : tickValue);\n\n// const ColorLegendLabel = \"接種情形\";\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 100;\n\nexport const AreaChart = ({ dataTop, dataDown }) => {\n  // Change state when different point is hovered\n  const [activeDate, setActiveDate] = useState(\n    dataTop[dataTop.length - 1].date\n  );\n  // if (activeDate) console.log(activeDate);\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is population, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(dataTop, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [dataTop, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([-max(dataDown, yValue), max(dataTop, yValue)])\n        .range([innerHeight, 0])\n        .nice(),\n    [dataTop, dataDown, innerHeight]\n  );\n\n  const handleVoronoiHover = useCallback(setActiveDate, [setActiveDate]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const areaGeneratorDown = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(-yValue(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain([\"新增確診\", \"新增死亡\"])\n        .range([\"black\", \"#BD2D28\"]),\n    []\n  );\n\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${ */}\n          {/*     innerHeight / 2 */}\n          {/*   }) rotate(-90)`} */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.marks}>\n            <path d={areaGenerator(dataTop)} />\n          </g>\n          <g className={styles.marksDown}>\n            <path d={areaGeneratorDown(dataDown)} />\n          </g>\n          <XMarkerLine\n            value={new Date(\"2021-05-15T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"雙北實施三級警戒\"}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-06-15T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"七五歲以上疫苗開打\"}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-07-27T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"全國三級警戒解除\"}\n          />\n          {activeDate ? (\n            <>\n              <CursorLine\n                value={activeDate}\n                xScale={xScale}\n                height={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  dataTop.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )}, ${areaGenerator.y1()(\n                  dataTop.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  colorScale={colorScale}\n                  dataTop={dataTop}\n                  dataDown={dataDown}\n                  activeDate={activeDate}\n                  className={styles.tooltipStroke}\n                  xTooltipFormat={xTooltipFormat}\n                />\n                <Tooltip\n                  colorScale={colorScale}\n                  dataTop={dataTop}\n                  dataDown={dataDown}\n                  activeDate={activeDate}\n                  className={styles.tooltip}\n                  xTooltipFormat={xTooltipFormat}\n                />\n              </g>\n              <g\n                transform={`translate(${areaGeneratorDown.x()(\n                  dataDown.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )}, ${areaGeneratorDown.y1()(\n                  dataDown.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n              </g>\n            </>\n          ) : null}\n          <g\n            transform={`translate(${legendCircleRadius}, ${\n              -legendCircleRadius * 2\n            })`}\n          >\n            <ColorLegend\n              colorScale={colorScale}\n              tickSpacing={legendItemSpacing}\n              tickSize={legendCircleRadius}\n              tickTextOffset={legendCircleRadius * 2}\n            />\n          </g>\n          <RectOverlay\n            onHover={handleVoronoiHover}\n            data={dataTop}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：Center for Systems Science and Engineering (CSSE) at Johns Hopkins\n    University (\n    <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/jhu\">\n      Our Wolrd in Data\n    </a>\n    )\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表用來顯示病毒每天傳播的速度。每一個資料點代表一天內新增的確診案例數。\n          </p>\n          <p>\n            在傳染病增溫期間，一名染疫者可能會將病毒傳染給一名以上原本健康的人，如此一來，後些日子的新增案例就會比前些日子要多。舉例來說，假設今天驗出了十名新的確診者，而昨天只有五名，那我們可以粗略地看作是昨天的五名病患各別將病毒傳染了二個人。於是「二」就是圖表上方列的「增長因數」。唯有當增長因數穩定低於一，我們才有機會看到疫情的終點，否則便代表疫情還在增溫階段。\n          </p>\n          <p>\n            就各國的經驗看來，由於大多數社會都是以週為單位在運作，所以光看每日的新增病例數不一定準。為了避免過度解讀，這張圖表列出的增長因數以週平均數來計算。\n          </p>\n          <p>\n            <s>\n              2021年6月20日新增「死亡人數」按鈕，死亡不會傳染，但可以觀察確診人數與死亡人數的相對關係。\n            </s>\n          </p>\n          <p>\n            2021年8月5日，將確診人數與死亡人數合併為一張圖表，方便觀察確診與死亡之間的關係；對照疫苗接種的情形，或許也能顯示出疫苗接種與染病死亡率之間的關係。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { AreaChart } from \"./AreaChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\nconst title = \"COVID-19 台灣每日新增案例數\";\n\nconst NEW_CONFIRMED_API =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv\";\n\nconst NEW_DEATHS_API =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_deaths.csv\";\n\nexport const TaiwanNewCasesArea = () => {\n  const new_confirmed_data = useData(NEW_CONFIRMED_API);\n  const new_deaths_data = useData(NEW_DEATHS_API);\n  if (\n    !new_confirmed_data ||\n    !new_confirmed_data.length ||\n    !new_deaths_data ||\n    !new_deaths_data.length\n  )\n    return <LoadSpinner />;\n\n  const filteredConfirmed = new_confirmed_data.filter(\n    (obj) => obj.date.valueOf() >= new Date(\"2021-04-30\").valueOf()\n  );\n  const filteredDeaths = new_deaths_data.filter(\n    (obj) => obj.date.valueOf() >= new Date(\"2021-04-30\").valueOf()\n  );\n\n  const sevenDayAvg =\n    sumValuesInObject(new_confirmed_data.slice(-7), \"newCases\") / 7;\n  const prevSevenDayAvg =\n    sumValuesInObject(new_confirmed_data.slice(-14, -7), \"newCases\") / 7;\n\n  const tableData = [\n    {\n      heading: \"上週平均確診\",\n      value: Math.round(prevSevenDayAvg).toLocaleString(),\n    },\n    {\n      heading: \"本週平均確診\",\n      value: Math.round(sevenDayAvg).toLocaleString(),\n    },\n    {\n      heading: \"增長因數\",\n      value: (sevenDayAvg / prevSevenDayAvg).toFixed(2),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <AreaChart dataTop={filteredConfirmed} dataDown={filteredDeaths} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .ticks(tickCount)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const CursorLine = ({ value, xScale, innerHeight, xTooltipFormat }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <>\n      <line\n        className={styles.cursorLine}\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        x={markerLineX}\n        y={markerLineY1 - 7}\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n      >\n        {xTooltipFormat(value)}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const YMarkerLine = ({ value, yScale, innerWidth, labelOffset = 8 }) => {\n  const markerLineY = yScale(value);\n  const markerLineX1 = 0;\n  const markerLineX2 = innerWidth;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX1}\n        y1={markerLineY}\n        x2={markerLineX2}\n        y2={markerLineY}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        全人口的75%\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        全人口的75%\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 15}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 15}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legendStroke}>\n        {domainValue}\n      </text>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legend}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import styles from \"./AreaChart.module.css\";\n\nexport const Tooltip = ({ children }) => (\n  <>\n    <text\n      className={styles.tooltipStroke}\n      textAnchor={\"end\"}\n      dominantBaseline={\"middle\"}\n      x={-10}\n    >\n      {children}\n    </text>\n    <text\n      className={styles.tooltip}\n      textAnchor={\"end\"}\n      dominantBaseline={\"middle\"}\n      x={-10}\n    >\n      {children}\n    </text>\n  </>\n);\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const PointerTrackerOverlay = ({\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  return useMemo(() => {\n    const points = data.map((d) => areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <rect\n          width={innerWidth}\n          height={innerHeight}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n        />\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleOrdinal,\n  scaleTime,\n  area,\n  timeFormat,\n  extent,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { CursorLine } from \"./CursorLine\";\nimport { YMarkerLine } from \"./YMarkerLine\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { Tooltip } from \"./Tooltip\";\nimport { PointerTrackerOverlay } from \"./PointerTrackerOverlay\";\nimport styles from \"./AreaChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 20, right: 50, bottom: 80, left: 50 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %Y\");\n\nconst yValues = [\n  { name: \"已接種一劑\", value: (d) => d.people_vaccinated, color: \"#7098a5\" },\n  {\n    name: \"已接種二劑\",\n    value: (d) => d.people_fully_vaccinated,\n    color: \"#b1c1be\",\n  },\n  {\n    name: \"追加第三劑\",\n    value: (d) => (d.total_boosters ? d.total_boosters : 0),\n    color: \"#8acaa7\",\n  },\n];\n\n// const yValue = (d) => d.total_vaccinations;\nconst areaNames = yValues.map((item) => item.name);\nconst areaColors = yValues.map((item) => item.color);\n\n// const yAxisLabel = \"接種人次\";\n// const yAxisLabelOffset = 75;\nconst tickOffset = 7;\nconst siFormat = format(\"~s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue).replace(\"M\", \"百萬\");\n\n// const ColorLegendLabel = \"接種情形\";\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\n\nexport const AreaChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState(data[data.length - 1]);\n  const taiwanPopulation = 23514196;\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is time\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, taiwanPopulation])\n        .range([innerHeight, 0])\n        .nice(),\n    [innerHeight]\n  );\n\n  const multipleAreasGenerator = (yAccessor) =>\n    area()\n      .x((d) => xScale(xValue(d)))\n      .y1((d) => yScale(yAccessor(d)))\n      .y0(yScale(0));\n\n  const colorScale = useMemo(\n    () => scaleOrdinal().domain(areaNames).range(areaColors),\n    []\n  );\n\n  const handleHover = useCallback(setActiveData, [setActiveData]);\n\n  return (\n    <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n      {/* Adds margin to left and top  */}\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n        <AxisBottom\n          innerHeight={innerHeight}\n          xScale={xScale}\n          tickFormat={xAxisTickFormat}\n          tickOffset={tickOffset}\n          tickCount={width > 480 ? 6 : 2}\n        />\n\n        <AxisLeft\n          innerWidth={innerWidth}\n          yScale={yScale}\n          tickOffset={tickOffset}\n          tickFormat={yAxisTickFormat}\n        />\n\n        {yValues.map((item, index) => (\n          <g key={index} style={{ fill: item.color, stroke: \"#635f5d\" }}>\n            <path d={multipleAreasGenerator(item.value)(data)} />\n          </g>\n        ))}\n\n        <YMarkerLine\n          value={taiwanPopulation * 0.75}\n          yScale={yScale}\n          innerWidth={innerWidth}\n        />\n\n        <XMarkerLine\n          value={new Date(\"2021-06-15T00:00\")}\n          xScale={xScale}\n          height={innerHeight}\n          label={\"公費疫苗開打\"}\n        />\n\n        {activeData && (\n          <CursorLine\n            value={activeData.date}\n            xScale={xScale}\n            innerHeight={innerHeight}\n            xTooltipFormat={xTooltipFormat}\n          />\n        )}\n\n        {activeData &&\n          yValues.map(\n            (item, index) =>\n              item.value(activeData) &&\n              item.value(activeData) !== 0 && (\n                <g\n                  key={`tooltip-${index}`}\n                  transform={`translate(${multipleAreasGenerator(\n                    item.value\n                  ).x()(activeData)}, ${multipleAreasGenerator(item.value).y1()(\n                    activeData\n                  )})`}\n                >\n                  <circle className={styles.dataPoint} r={5} />\n                  <Tooltip>\n                    {`${item.value(activeData).toLocaleString()}人 (${format(\n                      \".1%\"\n                    )(item.value(activeData) / taiwanPopulation)})`}\n                  </Tooltip>\n                </g>\n              )\n          )}\n\n        <g\n          transform={`translate(${tickOffset + legendCircleRadius}, ${\n            tickOffset + legendCircleRadius\n          })`}\n        >\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={tickOffset + legendCircleRadius}\n          />\n        </g>\n\n        <PointerTrackerOverlay\n          onHover={handleHover}\n          data={data}\n          areaGenerator={multipleAreasGenerator(yValues[0].value)}\n          innerWidth={innerWidth}\n          innerHeight={innerHeight}\n        />\n      </g>\n    </svg>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：衛生福利部疾病管制署（\n    <a href=\"https://github.com/owid/covid-19-data/blob/master/public/data/vaccinations/country_data/Taiwan.csv\">\n      Our Wolrd in Data\n    </a>\n    ）\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表的用意在於判斷：以施打疫苗為防疫手段而言，台灣距離平息COVID-19疫情還有多遠。由於目前市面上的疫苗大多需要打兩劑才算完成接種，因此這裡也將接種人次分為「已接種」與「充分接種」兩種。\n          </p>\n          <p>\n            <s>\n              （2021年6月18日更新：台灣疾管署公佈接種數據時並不區分劑數差異，這張圖也只好改為單純的接種人次統計。）\n            </s>\n          </p>\n          <p>\n            （2021年7月5日更新：台灣疾管署公佈的數據再度區分劑數差異，這張圖改回原樣。）\n          </p>\n          <p>\n            根據\n            <a href=\"https://www.who.int/zh/news-room/q-a-detail/herd-immunity-lockdowns-and-covid-19?gclid=Cj0KCQjw16KFBhCgARIsALB0g8K0rV9obZlpcbd2lFom_qKgbCe72ZnV_mqn8Z2AiNt5W3QRZFbMGCoaAshfEALw_wcB\">\n              世界衛生組織的建議\n            </a>\n            ，對抗大規模傳染的流行病，居家隔離、封鎖等措施本身便會對個人與社會造成負面影響，是為爭取時間不得已而為之。要真正對抗COVID-19，世衛支持透過疫苗來達到「群體免疫」的效果。\n          </p>\n          <p>\n            要實現「群體免疫」，就得讓社群中大多數人都擁有抗體，人數一多，病毒自然就少了傳播媒介，從而中斷傳播鏈。人要取得抗體有兩種手段：一是讓大多數的人都感染，感染過後自然會產生抗體，但這種方法必然會導致更多病例與死亡。另一種方法，就是施打疫苗。疫苗可以在不讓人生病的情況下，訓練免疫系統產生抗體，比起真的生病是安全得多的做法。\n          </p>\n          <p>\n            那麼，要多少人打過疫苗才能達到群體免疫呢？要考慮的條件主要有二。首先是每種疾病的狀況不同，例如麻疹需要95%的人口接種，才能保護剩下的5%。就COVID-19來說，實際需要多高的接種率目前沒有人能夠肯定。不過，根據\n            <a href=\"https://wwwnc.cdc.gov/eid/article/27/5/20-4365_article\">\n              美國疾管中心在卡達做的研究\n            </a>\n            ，社群中若有65%至70%的人感染，該社群就很接近群體免疫。\n          </p>\n          <p>\n            知道了這點之後，第二個要考慮的是\n            <a href=\"https://www.thelancet.com/journals/lanmic/article/PIIS2666-5247(21)00069-0/fulltext\">\n              疫苗的效能\n            </a>\n            。每一款疫苗的效能不盡相同，若是使用效能約65%至70%左右的AstraZeneca-Oxford或嬌生疫苗，就需要全民施打來達到群體免疫；若使用效能達95%左右的Pfizer-BioNTech或Moderna-NIH疫苗，則只需75%的人口施打即可。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { AreaChart } from \"./AreaChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"台灣 COVID-19 疫苗接種人次\";\n\nexport const TaiwanVaccinationArea = () => {\n  const data = useData();\n  if (!data || !data.length) return <LoadSpinner />;\n  // if (!data || !data[data.length - 1].people_vaccinated) return <LoadSpinner />;\n  // if (data) console.log(data[data.length - 1]);\n\n  const tableData = [\n    {\n      heading: \"接種人次總計\",\n      value: data[data.length - 1].total_vaccinations.toLocaleString(),\n    },\n    {\n      heading: \"已接種一劑\",\n      value: data[data.length - 1].people_vaccinated.toLocaleString(),\n    },\n    {\n      heading: \"已接種二劑\",\n      value: data[data.length - 1].people_fully_vaccinated.toLocaleString(),\n    },\n    {\n      heading: \"追加第三劑\",\n      value: data[data.length - 1].total_boosters.toLocaleString(),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <AreaChart data={data} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/country_data/Taiwan.csv\";\n\n// Data: Covid vaccinations in Taiwan\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((rawData) => {\n      let prevVaccinated, prevFullyVaccinated, prevTotal;\n      // Fill empty cells with data from the last available row\n      const row = rawData.map((d) => {\n        d.people_vaccinated !== null\n          ? (prevVaccinated = d.people_vaccinated)\n          : (d.people_vaccinated = prevVaccinated);\n        d.people_fully_vaccinated !== null\n          ? (prevFullyVaccinated = d.people_fully_vaccinated)\n          : (d.people_fully_vaccinated = prevFullyVaccinated);\n        d.total_vaccinations !== null\n          ? (prevTotal = d.total_vaccinations)\n          : (d.total_vaccinations = prevTotal);\n        return d;\n      });\n      if (isMounted) setData(row);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n// import { csv, autoType } from \"d3\";\n\n// const csvUrl =\n//   \"https://gist.githubusercontent.com/mgeorgetw/690d02dfc6bdbb99e58f6d1c622836c9/raw/covidtable_taiwan_cdc5.csv\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5003&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d[\"日期\"] = new Date(d.a02);\n    d[\"縣市別\"] = d.a03;\n    d[\"區域\"] = d.a04;\n    d[\"新增確診人數\"] = +d.a05;\n    d[\"累計確診人數\"] = +d.a06;\n    d[\"七天移動平均新增確診\"] = +d.a07;\n    return d;\n  });\n\n// Data: Covid vaccinations in Taiwan\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    // csv(csvUrl, autoType).then((d) => {\n    //   if (isMounted) setData(d);\n    // });\n    json(jsonUrl).then((rawData) => {\n      if (isMounted) setData(transformData(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./ChoroplethMap.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  width,\n  colorScale,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  const legendHeight = 15;\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-legendHeight - 3)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"middle\")\n      .attr(\"dy\", \"-2.2em\");\n  }, [xScale, innerHeight, tickOffset, tickCount, tickFormat]);\n  return (\n    <>\n      <g transform={`translate(${tickOffset}, 0)`}>\n        <defs>\n          <linearGradient id=\"legendGradient\">\n            <stop offset=\"0%\" stopColor={colorScale.range()[0]} />\n            <stop offset=\"100%\" stopColor={colorScale.range()[1]} />\n          </linearGradient>\n        </defs>\n        <rect\n          x={0}\n          y={innerHeight - legendHeight}\n          width={width}\n          height={legendHeight}\n          fill={`url('#legendGradient')`}\n        />\n        <g\n          ref={ref}\n          className={styles.tick}\n          transform={`translate(0, ${innerHeight})`}\n        />\n      </g>\n    </>\n  );\n};\n","import { geoPath, pointer } from \"d3\";\nimport styles from \"./ChoroplethMap.module.css\";\nconst missingDataColor = \"white\";\n\nexport const TaiwanMarks = ({\n  atlas: { counties, interiors, compBorders },\n  data,\n  colorScale,\n  handleHover,\n  handlePointerMove,\n}) => {\n  // const projection = geoMercator().scale(9000).center([121, 24]);\n  // const path = geoPath().projection(projection); // creates a new geographic path generator\n  const path = geoPath();\n  return (\n    <>\n      <g className={styles.marks}>\n        {counties.features.map((feature, i) => {\n          const d = feature.properties.COUNTYNAME;\n          return (\n            <path\n              fill={d ? colorScale(data[d]) : missingDataColor}\n              key={i}\n              d={path(feature)}\n              onTouchStart={(event) => {\n                event.preventDefault();\n                handleHover(d);\n                handlePointerMove(pointer(event));\n              }}\n              onMouseMove={(event) => {\n                handleHover(d);\n                handlePointerMove(pointer(event));\n              }}\n              onPointerMove={(event) => {\n                handleHover(d);\n                handlePointerMove(pointer(event));\n              }}\n            />\n          );\n        })}\n        {/* <path className={styles.interiors} d={path(interiors)} /> */}\n        <path className={styles.marks} d={path(compBorders)} />\n      </g>\n    </>\n  );\n};\n","import { useState, useMemo } from \"react\";\nimport {\n  scaleSequential,\n  interpolateGreys,\n  max,\n  scaleLinear,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { TaiwanMarks } from \"./TaiwanMarks\";\nimport styles from \"./ChoroplethMap.module.css\";\n\nconst width = window.innerWidth < 800 ? window.innerWidth : 800;\nconst height = width > 480 ? width * 0.9 : width * 1.6;\nconst viewBoxWidth = width + 50;\n\nconst xAxisTickFormat = format(\",d\");\nconst legendPadding = 5;\nconst legendWidth = viewBoxWidth - legendPadding * 2;\n\nconst colorValue = (d) => d[\"累計確診人數\"];\n\nconst transformData = (data, view) => {\n  let obj = { date: data[0][\"日期\"], dateString: data[0].a02 };\n  if (view === \"全台灣\") {\n    data.map(({ 縣市別, 累計確診人數 }) => (obj[縣市別] = 累計確診人數));\n  } else {\n    data.map(({ 區域, 累計確診人數 }) => (obj[區域] = 累計確診人數));\n  }\n  return obj;\n};\n\nconst Slider = ({ range, selected, handleChange }) => (\n  <div className={styles.sliderContainer}>\n    <pre>{selected}</pre>\n    <input\n      className={styles.slider}\n      type=\"range\"\n      min=\"0\"\n      max={range.length - 1}\n      value={range.indexOf(selected)}\n      onChange={(e) => handleChange(range[e.target.value])}\n    />\n  </div>\n);\n\nexport const Map = ({ data, atlas, view }) => {\n  const [selectedDate, setSelectedDate] = useState(data[0].a02);\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const [points, setPoints] = useState(null);\n\n  // Choropleth Map can only display one day of data\n  const dataFilteredByAreas =\n    view === \"全台灣\"\n      ? data.filter((d) => d[\"區域\"] === \"全區\")\n      : data.filter((d) => d[\"縣市別\"] === view);\n\n  // Prepare all dates for the range slider\n  const allDates = Array.from(\n    new Set(dataFilteredByAreas.map((d) => d.a02))\n  ).reverse();\n\n  const dataSelectedByDate = dataFilteredByAreas.filter(\n    (d) => d[\"日期\"].valueOf() === new Date(selectedDate).valueOf()\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleSequential(interpolateGreys).domain([\n        0,\n        max(dataFilteredByAreas.map(colorValue)),\n      ]),\n    [dataFilteredByAreas]\n  );\n\n  const xScale = useMemo(\n    () => scaleLinear().range([0, legendWidth]).domain(colorScale.domain()),\n    [colorScale]\n  );\n\n  if (!dataSelectedByDate.length) return <pre>loading...</pre>;\n  const heatmapData = transformData(dataSelectedByDate, view);\n\n  return (\n    <>\n      <Slider\n        range={allDates}\n        selected={selectedDate}\n        handleChange={setSelectedDate}\n      />\n      <svg\n        viewBox={`0 0 ${viewBoxWidth} ${height}`}\n        preserveAspectRatio=\"xMinYMid\"\n      >\n        <TaiwanMarks\n          atlas={atlas}\n          colorScale={colorScale}\n          data={heatmapData}\n          hoveredValue={hoveredValue}\n          handleHover={setHoveredValue}\n          handlePointerMove={setPoints}\n        />\n        {hoveredValue ? (\n          <g>\n            <text\n              className={styles.tooltipStroke}\n              x={points[0]}\n              y={points[1]}\n              textAnchor={points[0] > width / 2 ? \"end\" : \"start\"}\n            >\n              {hoveredValue}累計確診：{heatmapData[hoveredValue]}\n            </text>\n            <text\n              className={styles.tooltip}\n              x={points[0]}\n              y={points[1]}\n              textAnchor={points[0] > width / 2 ? \"end\" : \"start\"}\n            >\n              {hoveredValue}累計確診：{heatmapData[hoveredValue]}\n            </text>\n          </g>\n        ) : null}\n        <AxisBottom\n          innerHeight={height}\n          width={legendWidth}\n          xScale={xScale}\n          colorScale={colorScale}\n          tickFormat={xAxisTickFormat}\n          tickOffset={legendPadding}\n          tickCount={6}\n        />\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst SourceCredit = () => (\n  <>\n    <p className=\"footnote\">\n      資料來源：衛生福利部疾病管制署（API：{\" \"}\n      <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n        國家高速網路與計算中心\n      </a>\n      。）\n    </p>\n    <p className=\"footnote\">\n      圖資：內政部國土測繪中心（\n      <a href=\"https://github.com/dkaoster/taiwan-atlas\">\n        dkaoster / taiwan-atlas\n      </a>\n      ，lisensed under The MIT License。）\n    </p>\n  </>\n);\n\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張地圖顯示COVID-19的確診案例在台灣的分佈情形，顏色越深代表案例數越多。上方的滑桿用來控制日期，能夠看到從2021年5月1日以來的轉變。事實上，這張地圖所呈現的資訊並沒有比上面一張「台灣各地區每日新增確診案例數比較」來得多，能夠藉由控制滑桿取得的資訊，在上圖一目了然。不過我想畫畫看地圖，所以做了這一張圖。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","// import { useState } from \"react\";\nimport { useData } from \"./useData\";\nimport { useTaiwanAtlas } from \"./useTaiwanAtlas\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Map } from \"./Map\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"COVID-19 台灣累計確診分佈圖\";\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const ChoroplethMap = () => {\n  // const [view, setView] = useState(\"全台灣\");\n  const taiwanAtlas = useTaiwanAtlas();\n  const rawData = useData();\n\n  if (!rawData || !taiwanAtlas || !rawData.length) return <LoadSpinner />;\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <Map view={\"全台灣\"} atlas={taiwanAtlas} data={rawData} />\n      <Collapsible id=\"ChoroplethMap\" />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\nimport { feature, mesh } from \"topojson\";\n\n// Source: https://github.com/dkaoster/taiwan-atlas\n// License: MIT\n// const jsonUrl = \"https://cdn.jsdelivr.net/npm/taiwan-atlas/towns-10t.json\";\nconst jsonUrl =\n  \"https://cdn.jsdelivr.net/npm/taiwan-atlas/towns-mercator-10t.json\";\n\n// Use JSON data\nexport const useTaiwanAtlas = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((topology) => {\n      // console.log(\"topo\", topology);\n      const { nation, counties, towns, compBorders } = topology.objects;\n      setData({\n        // topojson.feature(topology, object) converts TopoJSON to GeoJSON,\n        // which d3 can parse\n        nation: feature(topology, nation),\n        counties: feature(topology, counties),\n        towns: feature(topology, towns),\n        // topojson.mesh - mesh TopoJSON geometry and convert to GeoJSON lines\n        compBorders: feature(topology, compBorders),\n        interiors: mesh(topology, towns, (a, b) => a !== b),\n      });\n    });\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\n// 死亡案例分項統計\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=4002\";\nconst jsonUrl = CORS + API;\n\nconst countGroups = (array, group) => {\n  const uniqueGroups = Array.from(new Set(array.map((obj) => obj[group])));\n  let groupObj = {};\n  uniqueGroups.forEach((g) => {\n    groupObj[g] = array.reduce(\n      (counter, obj) => (obj[group] === g ? (counter += 1) : counter),\n      0\n    );\n  });\n  return groupObj;\n};\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d.date = new Date(d.a01);\n    d.gender = d.a03;\n    d.ageGroup = d.a04;\n    d.chronic = d.a05;\n    return d;\n  });\n\n// Data: Detailed Covid-19 cases in Taiwan\nexport const useDeaths = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((rawData) => {\n      // console.log(\"json data\", transformData(rawData));\n      if (isMounted) {\n        const transformedData = transformData(rawData);\n        const deathsByGender = countGroups(transformedData, \"gender\");\n        const deathsByAge = countGroups(transformedData, \"ageGroup\");\n        const sortedDeathsByAge = ((obj) => ({\n          \"0-9\": obj[\"0\"] ? obj[\"0\"] : 0,\n          \"10-19\": obj[\"10\"] ? obj[\"10\"] : 0,\n          \"20-29\": obj[\"20\"] ? obj[\"20\"] : 0,\n          \"30-39\": obj[\"30\"],\n          \"40-49\": obj[\"40\"],\n          \"50-59\": obj[\"50\"],\n          \"60-69\": obj[\"60\"],\n          \"70+\": obj[\"70\"] + obj[\"80\"] + obj[\"90\"] + obj[\"100\"],\n        }))(deathsByAge);\n\n        setData({ age: sortedDeathsByAge, gender: deathsByGender });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\n// 確診案例分項統計\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5001&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\nconst countGroups = (array, group) => {\n  const uniqueGroups = Array.from(new Set(array.map((obj) => obj[group])));\n  let groupObj = {};\n  uniqueGroups.forEach((g) => {\n    groupObj[g] = array.reduce(\n      (counter, obj) => (obj[group] === g ? (counter += 1) : counter),\n      0\n    );\n  });\n  return groupObj;\n};\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d.date = new Date(d.a02);\n    d.county = d.a03;\n    d.area = d.a04;\n    d.gender = d.a05;\n    d.foreign = d.a06;\n    d.ageGroup = d.a07;\n    return d;\n  });\n\n// Data: Detailed Covid-19 cases in Taiwan\nexport const useInfected = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((rawData) => {\n      // console.log(\"json data\", transformData(rawData));\n      if (isMounted) {\n        const transformedData = transformData(rawData);\n        const infectedByGender = countGroups(transformedData, \"gender\");\n        const infectedByAge = countGroups(transformedData, \"ageGroup\");\n        const sortedInfectedByAge = ((obj) => ({\n          \"0-9\":\n            obj[\"0\"] + obj[\"1\"] + obj[\"2\"] + obj[\"3\"] + obj[\"4\"] + obj[\"5-9\"],\n          \"10-19\": obj[\"10-14\"] + obj[\"15-19\"],\n          \"20-29\": obj[\"20-24\"] + obj[\"25-29\"],\n          \"30-39\": obj[\"30-34\"] + obj[\"35-39\"],\n          \"40-49\": obj[\"40-44\"] + obj[\"45-49\"],\n          \"50-59\": obj[\"50-54\"] + obj[\"55-59\"],\n          \"60-69\": obj[\"60-64\"] + obj[\"65-69\"],\n          \"70+\": obj[\"70+\"],\n        }))(infectedByAge);\n\n        setData({ age: sortedInfectedByAge, gender: infectedByGender });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\n// import PropTypes from \"prop-types\";\n// import { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"年齡層\",\n      view_name: \"age\",\n      className: view === \"age\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"生理性別\",\n      view_name: \"gender\",\n      className: view === \"gender\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className={styles.nav}>\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    // setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickOffset = 3,\n  tickCount = 6,\n}) =>\n  // Label and reference lines for x scale\n  xScale.ticks(tickCount).map((tickValue) => (\n    // Each tick goes to the position indicating its value\n    <g\n      className={styles.tick}\n      key={tickValue}\n      transform={`translate(${xScale(tickValue)}, 0)`}\n    >\n      {/* the values of x1, x2, y1 are 0, which is default */}\n      <line y2={innerHeight} />\n      <text\n        y={innerHeight + tickOffset}\n        dy=\"0.71em\"\n        style={{ textAnchor: \"middle\" }}\n      >\n        {tickFormat(tickValue)}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisLeft = ({ yScale, tickOffset = 3 }) =>\n  yScale.domain().map((tickValue) => (\n    <g\n      key={tickValue}\n      className={styles.tick}\n      transform={`translate(0,${yScale(tickValue) + yScale.bandwidth() / 2})`}\n    >\n      <text\n        dy=\".18em\"\n        x={-tickOffset}\n        style={{\n          fontWeight: \"bold\",\n          textAnchor: \"end\",\n          dominantBaseline: \"middle\",\n        }}\n      >\n        {tickValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\nimport { pointer } from \"d3\";\nimport styles from \"./BarChart.module.css\";\nexport const Marks = ({\n  data,\n  xScale,\n  xValue,\n  yScale,\n  yValue,\n  tooltipFormat,\n  onHover,\n  onMove,\n  hoveredValue,\n  fadeOpacity = 0.2,\n  tooltipOffset = 22,\n}) =>\n  data.map((d) => (\n    <g\n      className={styles.marks}\n      key={yValue(d)}\n      onMouseEnter={() => onHover(yValue(d))}\n      onMouseLeave={() => onHover(null)}\n      onPointerMove={(event) => {\n        onHover(yValue(d));\n        onMove(pointer(event));\n      }}\n      opacity={hoveredValue && hoveredValue !== yValue(d) ? fadeOpacity : 1}\n    >\n      <rect\n        x={0}\n        y={yScale(yValue(d))}\n        width={xScale(xValue(d))}\n        height={yScale.bandwidth()}\n        stroke=\"black\"\n        strokeWidth={2}\n        fill=\"#BD2D28\"\n      />\n      <text\n        className={styles.tooltipStroke}\n        x={xScale(xValue(d)) + 10}\n        y={yScale(yValue(d)) + yScale.bandwidth() / 2}\n        dy=\".1em\"\n        dominantBaseline=\"middle\"\n      >\n        {tooltipFormat(xValue(d))}\n      </text>\n      <text\n        className={styles.tooltip}\n        x={xScale(xValue(d)) + 10}\n        y={yScale(yValue(d)) + yScale.bandwidth() / 2}\n        dy=\".1em\"\n        dominantBaseline=\"middle\"\n      >\n        {tooltipFormat(xValue(d))}\n      </text>\n    </g>\n  ));\n","import chartStyles from \"./BarChart.module.css\";\nexport const Tooltip = ({ hoveredValue, data, points, labelOffset }) => {\n  const d = data.find((obj) => obj.group === hoveredValue);\n  return (\n    <g>\n      <text\n        className={chartStyles.tooltipStroke}\n        x={points[0] + labelOffset}\n        y={points[1]}\n        dy=\".42em\"\n      >\n        <tspan x={points[0] + labelOffset}>\n          {`染疫：${d.confirmed.toLocaleString()}人`}\n        </tspan>\n        <tspan\n          x={points[0] + labelOffset}\n          dy=\"1.3em\"\n        >{`死亡：${d.deaths.toLocaleString()}人`}</tspan>\n      </text>\n      <text\n        className={chartStyles.tooltip}\n        x={points[0] + labelOffset}\n        y={points[1]}\n        dy=\".42em\"\n      >\n        <tspan x={points[0] + labelOffset}>\n          {`染疫：${d.confirmed.toLocaleString()}人`}\n        </tspan>\n        <tspan\n          x={points[0] + labelOffset}\n          dy=\"1.3em\"\n        >{`死亡：${d.deaths.toLocaleString()}人`}</tspan>\n      </text>\n    </g>\n  );\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport { scaleBand, scaleLinear, max, format } from \"d3\";\n// import { NavBar } from \"./NavBar\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { Marks } from \"./Marks\";\nimport { Tooltip } from \"./Tooltip\";\n// import { ColorLegend } from \"./ColorLegend\";\n// import styles from \"./BarChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 5, right: 120, bottom: 45, left: 60 };\n\n// const formatDate = timeFormat(\"%Y/%-m/%-d\");\nconst yValue = (d) => d.group;\nconst xValue = (d) => d.CFR;\n\nconst xAxisTickFormat = (tickValue) => format(\"~%\")(tickValue);\nconst labelFormat = format(\".2%\");\n\n// The chart's real height and width\nconst innerHeight = height - margin.top - margin.bottom;\nconst innerWidth = width - margin.left - margin.right;\n\n// Legend settings\n// const legendRectSize = 15;\n// const legendItemSpacing = 26;\n// const legendX = width - margin.left;\n// const legendY = innerHeight - legendItemSpacing;\n// const ColorLegendLabel = \"疫苗現況\";\n\nconst fadeOpacity = 0.3;\n\nexport const BarChart = ({ data }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const [points, setPoints] = useState(null);\n  const trackPointer = useCallback(setPoints, [setPoints]);\n  // console.log(data);\n  const handleHover = useCallback(setHoveredValue, [setHoveredValue]);\n\n  // X axis is percentage of vaccines, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleLinear()\n        // Domain is an array of actual data, starts from 0 to the max of all countries\n        // d3.max(iterable[, accessor])\n        .domain([0, max(data, xValue)])\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data]\n  );\n\n  const yScale = useMemo(\n    () =>\n      scaleBand()\n        .domain(data.map((d) => yValue(d)))\n        .range([0, innerHeight])\n        .paddingInner(0.3),\n    [data]\n  );\n\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={8}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft yScale={yScale} tickOffset={8} />\n          <Marks\n            data={data}\n            margin={margin}\n            innerWidth={innerWidth}\n            xScale={xScale}\n            xValue={xValue}\n            yScale={yScale}\n            yValue={yValue}\n            tooltipFormat={labelFormat}\n            onHover={handleHover}\n            onMove={trackPointer}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n          {hoveredValue && points ? (\n            <Tooltip\n              data={data}\n              hoveredValue={hoveredValue}\n              points={points}\n              labelOffset={10}\n            />\n          ) : null}\n        </g>\n        {/* <g transform={`translate(${legendX}, ${legendY})`}> */}\n        {/*   <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n        {/*     {ColorLegendLabel} */}\n        {/*   </text> */}\n        {/*   <ColorLegend */}\n        {/*     xScake={xScale} */}\n        {/*     xValue1={xValue1} */}\n        {/*     xValue2={xValue2} */}\n        {/*     tickSpacing={legendItemSpacing} */}\n        {/*     tickSize={legendRectSize} */}\n        {/*     tickTextOffset={16} */}\n        {/*     onHover={setHoveredValue} */}\n        {/*     hoveredValue={hoveredValue} */}\n        {/*     fadeOpacity={fadeOpacity} */}\n        {/*   /> */}\n        {/* </g> */}\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst SourceCredit = () => (\n  <>\n    <p className=\"footnote\">\n      資料來源：衛生福利部疾病管制署（API：{\" \"}\n      <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n        國家高速網路與計算中心\n      </a>\n      。）\n    </p>\n  </>\n);\n\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            COVID-19的一大特性是：高齡者的死亡率明顯較高。台灣的疫情比起許多國家要晚展開，因此已經有不止一個研究都顯示年齡與染疫死亡率的正相關。在這個網頁的「Global」版本中，有義大利、西班牙、中國、韓國分別做的研究結果。這張圖表利用台灣疾管署公告的病逝者資料，即時顯示台灣各年齡的染疫死亡率，一方面印證高齡者的風險確實較高，一方面也能與其他國家比較。\n          </p>\n          <p>2021年6月23日新增以性別分類的圖表。</p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useDeaths } from \"./useDeaths\";\nimport { useInfected } from \"./useInfected\";\nimport { NavBar } from \"./NavBar\";\nimport { BarChart } from \"./BarChart\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const CFRByGroupsBar = () => {\n  const [view, setView] = useState(\"age\");\n  const deathsData = useDeaths();\n  const infectedData = useInfected();\n  // console.log(deathsData, infectedData);\n\n  if (!deathsData || !infectedData) return <LoadSpinner />;\n  // console.log(infectedData);\n  // console.log(deathsData);\n\n  const infected = view === \"age\" ? infectedData.age : infectedData.gender;\n  const deaths = view === \"age\" ? deathsData.age : deathsData.gender;\n\n  const data = Object.keys(infected).map((key) => ({\n    group: key,\n    CFR: deaths[key] / infected[key],\n    confirmed: infected[key],\n    deaths: deaths[key],\n  }));\n\n  return (\n    <>\n      <ChartTitle title=\"COVID-19 台灣染疫死亡率\" />\n      <NavBar view={view} setView={setView} />\n      <BarChart data={data} />\n      <Collapsible id=\"CFRByGroupsinTaiwan\" />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n// import { csv, autoType } from \"d3\";\n\n// const csvUrl =\n//   \"https://gist.githubusercontent.com/mgeorgetw/690d02dfc6bdbb99e58f6d1c622836c9/raw/covidtable_taiwan_cdc5.csv\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5002&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d[\"日期\"] = new Date(d.a02);\n    d[\"縣市別\"] = d.a03;\n    d[\"區域\"] = d.a04;\n    d[\"新增確診人數\"] = +d.a05;\n    d[\"累計確診人數\"] = +d.a06;\n    d[\"七天移動平均新增確診\"] = +d.a07;\n    return d;\n  });\n\n// Data: Covid vaccinations in Taiwan\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    // csv(csvUrl, autoType).then((d) => {\n    //   if (isMounted) setData(d);\n    // });\n    json(jsonUrl).then((rawData) => {\n      const transformedData = transformData(rawData);\n      if (isMounted) setData(transformedData);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React, { useState, useEffect } from \"react\";\n\nconst dropdownItems = [\n  \"全台灣\",\n  \"南投縣\",\n  \"台中市\",\n  \"台北市\",\n  \"台南市\",\n  \"台東縣\",\n  \"嘉義市\",\n  \"嘉義縣\",\n  \"基隆市\",\n  \"境外移入\",\n  \"宜蘭縣\",\n  \"屏東縣\",\n  \"彰化縣\",\n  \"新北市\",\n  \"新竹市\",\n  \"新竹縣\",\n  \"桃園市\",\n  \"澎湖縣\",\n  \"花蓮縣\",\n  \"苗栗縣\",\n  \"連江縣\",\n  \"雲林縣\",\n  \"高雄市\",\n];\n\nexport const DropdownMenu = ({\n  chosen,\n  setChosen,\n  handleTypeHover,\n  handleCursorHover,\n}) => {\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    setItems(\n      dropdownItems.map((d) => ({\n        label: d,\n        value: d,\n      }))\n    );\n  }, []);\n  return (\n    <div className=\"dropdown-container\">\n      區域：\n      <select\n        value={chosen}\n        onChange={(e) => {\n          setChosen(e.currentTarget.value);\n          handleTypeHover(null);\n          handleCursorHover(null);\n        }}\n      >\n        {items.map(({ label, value }) => (\n          <option className=\"region-name\" key={label} value={value}>\n            {label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\n// TODO: no negative values\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .ticks(tickCount)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const CursorLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.cursorLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\n// Use d3.bisect() to decide the value hovered\nexport const PathOverlay = ({ data, areaGenerator, onHover }) => {\n  return useMemo(() => {\n    // d3.bisect() only works with ascending values\n    // turn x values into negative numbers as a cheat\n    const points = data.map((d) => -areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <path\n          d={areaGenerator(data)}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, -pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, -pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, -pointer(event)[0]);\n            onHover(data[index]);\n          }}\n        ></path>\n      </g>\n    );\n  }, [data, areaGenerator, onHover]);\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const Tooltip = ({\n  activeData,\n  hoveredValue,\n  xScale,\n  xTooltipFormat,\n  tooltipOffsetX = -10,\n}) => (\n  <>\n    <text\n      className={styles.tooltipStroke}\n      textAnchor={\"end\"}\n      dominantBaseline={\"middle\"}\n      x={xScale(activeData.data.date) + tooltipOffsetX}\n      y={20}\n    >\n      {`${hoveredValue}：${\n        activeData && activeData.data[hoveredValue]\n          ? activeData.data[hoveredValue].toLocaleString()\n          : 0\n      }人`}\n    </text>\n    <text\n      className={styles.tooltip}\n      textAnchor={\"end\"}\n      dominantBaseline={\"middle\"}\n      x={xScale(activeData.data.date) + tooltipOffsetX}\n      y={20}\n      fontWeight=\"bold\"\n    >\n      {`${hoveredValue}：${\n        activeData && activeData.data[hoveredValue]\n          ? activeData.data[hoveredValue].toLocaleString()\n          : 0\n      }人`}\n    </text>\n    <text\n      className={styles.tooltip}\n      textAnchor={\"end\"}\n      dominantBaseline={\"middle\"}\n      x={xScale(activeData.data.date) + tooltipOffsetX}\n      y={-10}\n    >\n      {xTooltipFormat(activeData && activeData.data.date)}\n    </text>\n  </>\n);\n","import React, {\n  useState,\n  useMemo,\n  useCallback,\n  useEffect,\n  useRef,\n} from \"react\";\n\nimport {\n  scaleLinear,\n  scaleTime,\n  scaleOrdinal,\n  area,\n  timeFormat,\n  extent,\n  min,\n  max,\n  interpolateViridis,\n  select,\n} from \"d3\";\n\nimport { DropdownMenu } from \"./DropdownMenu\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { CursorLine } from \"./CursorLine\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { PathOverlay } from \"./PathOverlay\";\nimport { Tooltip } from \"./Tooltip\";\nimport styles from \"./AreaChart.module.css\";\n\nconst margin = { top: 20, right: 10, bottom: 80, left: 50 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %Y\");\nconst formatDate = timeFormat(\"%Y/%-m/%-d\");\n\nconst yAxisTickFormat = (tickValue) => (tickValue < 0 ? -tickValue : tickValue);\n\nexport const AreaChart = ({ data, stackedData, view, setView }) => {\n  const [width, setWidth] = useState(null);\n  const height = width > 480 ? width * 0.6 : width * 1;\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  const [activeDataPoint, setActiveDataPoint] = useState(null);\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  const scrollableDivRef = useRef();\n\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, (d) => d[\"日期\"]))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth * 3]),\n    [data, innerWidth]\n  );\n\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([\n          min(stackedData, (d) => min(d, (d) => d[0])),\n          max(stackedData, (d) => max(d, (d) => d[1])),\n        ])\n        .range([innerHeight, 0])\n        .nice(),\n    [stackedData, innerHeight]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal().range(\n        stackedData.map((area, i) => {\n          const t = i / stackedData.length;\n          return interpolateViridis(t);\n        })\n      ),\n    [stackedData]\n  );\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d.data)))\n        .y0((d) => yScale(d[0]))\n        .y1((d) => yScale(d[1]))\n        .defined((d) => d[1] || d[1] === \"0\"),\n    [xScale, yScale]\n  );\n\n  const minX = xScale(data[data.length - 1][\"日期\"]);\n  const maxX = xScale(data[0][\"日期\"]);\n  const overwidth = maxX - minX + margin.left + margin.right;\n\n  const handleCursorHover = useCallback(setActiveDataPoint, [\n    setActiveDataPoint,\n  ]);\n  const handleTypeHover = useCallback(setHoveredValue, [setHoveredValue]);\n\n  function initializeSVGWidth() {\n    const flexCardWidth =\n      document.getElementsByClassName(\"flex-card\")[0].offsetWidth;\n    const cardMarginAndPadding = (16 + 8) * 2;\n    const cardInnerWidth = flexCardWidth - cardMarginAndPadding;\n    setWidth(cardInnerWidth);\n  }\n\n  useEffect(() => {\n    function scrollChartToLatest() {\n      const divToScroll = select(scrollableDivRef.current);\n      divToScroll.node().scrollBy(overwidth, 0);\n    }\n\n    initializeSVGWidth();\n    scrollChartToLatest();\n  }, [overwidth]);\n\n  return (\n    <>\n      <DropdownMenu\n        chosen={view}\n        setChosen={setView}\n        handleTypeHover={handleTypeHover}\n        handleCursorHover={handleCursorHover}\n      />\n      <pre>資料更新時間：{formatDate(data[0][\"日期\"])}</pre>\n      <div>\n        <svg\n          style={{ position: \"absolute\", pointerEvents: \"none\", zIndex: 1 }}\n          width={width}\n          height={height}\n        >\n          {/* Adds margin to left and top  */}\n          <g transform={`translate(${margin.left}, ${margin.top})`}>\n            <AxisLeft\n              innerWidth={innerWidth}\n              yScale={yScale}\n              tickOffset={7}\n              tickFormat={yAxisTickFormat}\n            />\n          </g>\n        </svg>\n        <div\n          style={{ overflowX: \"scroll\", width: width }}\n          ref={scrollableDivRef}\n        >\n          <svg display=\"block\" width={overwidth} height={height}>\n            <g transform={`translate(${margin.left}, ${margin.top})`}>\n              <AxisBottom\n                innerHeight={innerHeight}\n                xScale={xScale}\n                tickFormat={xAxisTickFormat}\n                tickOffset={7}\n                tickCount={width > 480 ? 6 : 2}\n              />\n\n              <g className={styles.primary}>\n                {stackedData.map((d) => (\n                  <StreamGraphWithHoverEffect\n                    key={d.key}\n                    d={d}\n                    areaGenerator={areaGenerator}\n                    colorScale={colorScale}\n                    activeDataPoint={activeDataPoint}\n                    hoveredValue={hoveredValue}\n                    xScale={xScale}\n                    innerHeight={innerHeight}\n                    handleTypeHover={handleTypeHover}\n                    handleCursorHover={handleCursorHover}\n                  />\n                ))}\n              </g>\n\n              <XMarkerLine\n                value={new Date(\"2021-05-15T08:00\")}\n                xScale={xScale}\n                height={innerHeight}\n                label={\"雙北實施三級警戒\"}\n              />\n\n              <XMarkerLine\n                value={new Date(\"2021-07-27T08:00\")}\n                xScale={xScale}\n                height={innerHeight}\n                label={\"全國三級警戒解除\"}\n              />\n            </g>\n          </svg>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst StreamGraphWithHoverEffect = ({\n  d,\n  areaGenerator,\n  colorScale,\n  activeDataPoint,\n  hoveredValue,\n  xScale,\n  innerHeight,\n  handleTypeHover,\n  handleCursorHover,\n}) => (\n  <g\n    onTouchStart={(event) => {\n      handleTypeHover(d.key);\n      event.preventDefault();\n    }}\n    onPointerEnter={() => handleTypeHover(d.key)}\n    onMouseLeave={() => handleTypeHover(null)}\n  >\n    <path\n      d={areaGenerator(d)}\n      fill={colorScale(d.key)}\n      stroke={\"#ddd\"}\n      strokeWidth={0.1}\n      opacity={hoveredValue ? 0.2 : 1}\n    >\n      <title>{d.key}</title>\n    </path>\n\n    {hoveredValue === d.key && (\n      <>\n        <path\n          d={areaGenerator(d)}\n          fill={colorScale(d.key)}\n          stroke={\"#ddd\"}\n          strokeWidth={0.1}\n        >\n          <title>{d.key}</title>\n        </path>\n        {activeDataPoint && (\n          <>\n            <CursorLine\n              value={activeDataPoint.data.date}\n              xScale={xScale}\n              innerHeight={innerHeight}\n            />\n            <Tooltip\n              activeDataPoint={activeDataPoint}\n              xScale={xScale}\n              hoveredValue={hoveredValue}\n              xTooltipFormat={xTooltipFormat}\n            />\n          </>\n        )}\n        <PathOverlay\n          onHover={handleCursorHover}\n          data={d}\n          areaGenerator={areaGenerator}\n        />\n      </>\n    )}\n  </g>\n);\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：衛生福利部疾病管制署（\n    <a href=\"https://covid-19.nchc.org.tw/dt.php?dt_name=1&downloadall=yes\">\n      資料由「國家高速網路與計算中心」彙整\n    </a>\n    ）\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這系列圖表的用意在於顯示台灣各地區疫情處於增溫或降溫的階段，同時也能作為疫病傳播情形的參考。每一個色塊代表一個縣市或鄉鎮，滑鼠移到色塊上會顯示該色塊所代表的區域一天內新增的確診案例數。\n          </p>\n          <p>\n            資料的預設範圍是「全台灣」，代表各直轄市與二級縣市的比較。點選下拉式選單則可以看到上述行政區又細分一層後的資料。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { group, stack, stackOffsetWiggle, stackOrderAscending } from \"d3\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\n// import { DataTable } from \"./DataTable\";\nimport { AreaChart } from \"./AreaChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"COVID-19 台灣各地區每日新增確診案例數比較\";\n\nconst transformData = (data, view) => {\n  let dataArray = [];\n  const groupedData = group(data, (d) => d[\"日期\"]);\n  for (let date of groupedData.keys()) {\n    let obj = { date: date };\n    const dailyCountiesData = groupedData.get(date);\n    if (view === \"全台灣\") {\n      dailyCountiesData.map(\n        ({ 縣市別, 新增確診人數 }) => (obj[縣市別] = 新增確診人數)\n      );\n    } else {\n      dailyCountiesData.map(\n        ({ 區域, 新增確診人數 }) => (obj[區域] = 新增確診人數)\n      );\n    }\n    dataArray.push(obj);\n  }\n  return dataArray;\n};\n\nexport const CasesByCountiesArea = () => {\n  const [view, setView] = useState(\"全台灣\");\n  const rawData = useData();\n\n  if (!rawData || !rawData.length) return <LoadSpinner />;\n  // if (rawData) console.log(rawData);\n\n  const filteredData =\n    view === \"全台灣\"\n      ? rawData.filter((d) => d[\"區域\"] === \"全區\")\n      : rawData.filter((d) => d[\"縣市別\"] === view);\n\n  const layer = view === \"全台灣\" ? (d) => d[\"縣市別\"] : (d) => d[\"區域\"];\n  const layerGroupedData = group(filteredData, layer);\n  const layers =\n    view === \"全台灣\"\n      ? Array.from(layerGroupedData.keys())\n      : Array.from(layerGroupedData.keys()).splice(1);\n\n  const transformedData = transformData(filteredData, view);\n\n  const stackedData = stack()\n    .offset(stackOffsetWiggle)\n    .order(stackOrderAscending)\n    .keys(layers)(transformedData);\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      {/* <DataTable items={tableData} /> */}\n      <AreaChart\n        data={filteredData}\n        stackedData={stackedData}\n        view={view}\n        setView={setView}\n      />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://disease.sh/v3/covid-19/apple/countries/Taiwan\";\n\nconst transformData = (rawData) => {\n  return rawData.map((d) => {\n    return {\n      date: new Date(d.date),\n      driving: d.driving,\n      transit: d.transit,\n      walking: d.walking,\n      subregion_and_city: d.subregion_and_city,\n    };\n  });\n};\n\n// Data: Apple Mobility Trends in Taiwan\nexport const useData = (region, setLoading) => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    setLoading(true);\n    let isMounted = true;\n    json(`${jsonUrl}/${region}`).then((data) => {\n      if (isMounted) {\n        setData(transformData(data.data));\n        setLoading(false);\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [region, setLoading]);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React, { useState, useEffect } from \"react\";\n\nexport const DropdownMenu = ({ dropdownItems, chosen, setChosen }) => {\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    setItems(\n      dropdownItems.map((d) => ({\n        label: d,\n        value: d,\n      }))\n    );\n  }, [dropdownItems]);\n  return (\n    <div className=\"dropdown-container\">\n      選擇區域：\n      <select value={chosen} onChange={(e) => setChosen(e.currentTarget.value)}>\n        {items.map(({ label, value }) => (\n          <option className=\"region-name\" key={label} value={value}>\n            {label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .ticks(tickCount)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const YMarkerLine = ({\n  value,\n  label,\n  yScale,\n  innerWidth,\n  labelOffset = 8,\n}) => {\n  const markerLineY = yScale(value);\n  const markerLineX1 = 0;\n  const markerLineX2 = innerWidth;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        x1={markerLineX1}\n        y1={markerLineY}\n        x2={markerLineX2}\n        y2={markerLineY}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        x={markerLineX + 15}\n        y={10}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        x={markerLineX + 15}\n        y={10}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legendStroke}>\n        {domainValue}\n      </text>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legend}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React, { useMemo } from \"react\";\nimport {\n  scaleLinear,\n  scaleOrdinal,\n  scaleTime,\n  line,\n  timeFormat,\n  extent,\n  schemeCategory10,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\n// import { CursorLine } from \"./CursorLine\";\nimport { YMarkerLine } from \"./YMarkerLine\";\nimport { XMarkerLine } from \"./XMarkerLine\";\n// import { RectOverlay } from \"./RectOverlay\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport styles from \"./LineChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 20, right: 5, bottom: 80, left: 70 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\n\nconst yValue1 = (d) => d.walking;\nconst yValue2 = (d) => d.transit;\nconst yValue3 = (d) => d.driving;\nconst yAxisLabel = \"導航使用率\";\nconst yAxisLabelOffset = 60;\nconst yAxisTickFormat = (tickValue) => tickValue.toLocaleString() + \"%\";\n\n// const ColorLegendLabel = \"接種情形\";\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\n\nexport const LineChart = ({ data }) => {\n  // Change state when different point is hovered\n  // const [activeData, setActiveData] = useState(data[data.length - 1]);\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  const legendX = margin.left + legendCircleRadius * 2;\n  const legendY = margin.top + legendItemSpacing / 2;\n\n  // X axis is time\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () => scaleLinear().domain([-100, 150]).range([innerHeight, 0]).nice(),\n    [innerHeight]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain([\"步行\", \"開車\", \"大眾交通\"])\n        .range(schemeCategory10),\n    []\n  );\n\n  // const handleHover = useCallback(setActiveData, [setActiveData]);\n\n  const lineGenerator = useMemo(\n    () =>\n      line()\n        .x((d) => xScale(xValue(d)))\n        .y((d) => yScale(yValue1(d))),\n    [xScale, yScale]\n  );\n\n  const lineGenerator2 = useMemo(\n    () =>\n      line()\n        .x((d) => xScale(xValue(d)))\n        .y((d) => yScale(yValue2(d))),\n    [xScale, yScale]\n  );\n\n  const lineGenerator3 = useMemo(\n    () =>\n      line()\n        .x((d) => xScale(xValue(d)))\n        .y((d) => yScale(yValue3(d))),\n    [xScale, yScale]\n  );\n  // const Tooltip = ({ activeData, scaleValue, className, position }) => (\n  //   <text\n  //     className={className}\n  //     textAnchor={\"middle\"}\n  //     dominantBaseline={\"middle\"}\n  //     x={0}\n  //     y={position === \"down\" ? 40 : -15}\n  //   >\n  //     <tspan x=\"0\" dy=\"0\" fontWeight=\"bold\">\n  //       {scaleValue(activeData) &&\n  //         `${scaleValue(activeData).toLocaleString()}%`}\n  //     </tspan>\n  //     {position === \"up\" ? (\n  //       <tspan x=\"0\" dy=\"-1.3em\">\n  //         {xTooltipFormat(activeData.date)}\n  //       </tspan>\n  //     ) : null}\n  //   </text>\n  // );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          <text\n            className={styles.axisLabel}\n            textAnchor=\"middle\"\n            transform={`translate(${-yAxisLabelOffset}, ${innerHeight / 2})`}\n            writingMode=\"vertical-lr\"\n          >\n            {yAxisLabel}\n          </text>\n          <g className={styles.line}>\n            <path d={lineGenerator(data)} stroke={colorScale(\"步行\")} />\n          </g>\n          <g className={styles.line}>\n            <path d={lineGenerator3(data)} stroke={colorScale(\"開車\")} />\n          </g>\n          <g className={styles.line}>\n            <path d={lineGenerator2(data)} stroke={colorScale(\"大眾交通\")} />\n          </g>\n          <YMarkerLine value={0} yScale={yScale} innerWidth={innerWidth} />\n          <XMarkerLine\n            value={new Date(\"2021-05-15T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"雙北實施三級警戒\"}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-07-27T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"全國三級警戒解除\"}\n          />\n          {/* {activeData ? ( */}\n          {/*   <> */}\n          {/*     <CursorLine */}\n          {/*       value={activeData.date} */}\n          {/*       xScale={xScale} */}\n          {/*       innerHeight={innerHeight} */}\n          {/*     /> */}\n          {/*     <g */}\n          {/*       transform={`translate(${lineGenerator.x()( */}\n          {/*         activeData */}\n          {/*       )}, ${lineGenerator.y()(activeData)})`} */}\n          {/*     > */}\n          {/*       <circle className={styles.dataPoint} r={5} /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue1} */}\n          {/*         className={styles.tooltipStroke} */}\n          {/*         position=\"up\" */}\n          {/*       /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue1} */}\n          {/*         className={styles.tooltip} */}\n          {/*         position=\"up\" */}\n          {/*       /> */}\n          {/*     </g> */}\n          {/*     <g */}\n          {/*       transform={`translate(${lineGenerator.x()( */}\n          {/*         activeData */}\n          {/*       )}, ${lineGenerator2.y()(activeData)})`} */}\n          {/*     > */}\n          {/*       <circle className={styles.dataPoint} r={5} /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue2} */}\n          {/*         className={styles.tooltipStroke} */}\n          {/*         position=\"down\" */}\n          {/*       /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue2} */}\n          {/*         className={styles.tooltip} */}\n          {/*         position=\"down\" */}\n          {/*       /> */}\n          {/*     </g> */}\n          {/*   </> */}\n          {/* ) : null} */}\n          {/* <RectOverlay */}\n          {/*   onHover={handleHover} */}\n          {/*   data={data} */}\n          {/*   lineGenerator={lineGenerator} */}\n          {/*   innerWidth={innerWidth} */}\n          {/*   innerHeight={innerHeight} */}\n          {/* /> */}\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          {/* <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n          {/*   {ColorLegendLabel} */}\n          {/* </text> */}\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：Apple Mobility Trends Reports（API by{\" \"}\n    <a href=\"https://disease.sh/\">disease.sh</a>）\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>這張圖表主要用來觀察台灣的疫情與人民外出情形之間的關係。</p>\n          <p>\n            Apple公開了各個地區使用「Apple地圖」導航功能的頻繁程度，藉以判斷外出的人流是否增加或減少。正如導航所提供的功能，數據也區分為「步行」、「開車」、「大眾交通」三種，一般人通常要到陌生的地方或走不熟悉的路線才會開導航，因此用這些數據來判斷「不必要的移動」頗為合適。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useRegions } from \"./useRegions\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DropdownMenu } from \"./DropdownMenu\";\nimport { DataTable } from \"./DataTable\";\nimport { LineChart } from \"./LineChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"Apple 導航使用趨勢在台灣\";\n\nexport const TaiwanMobilityLine = () => {\n  const [view, setView] = useState(\"All\");\n  const [loading, setLoading] = useState(true);\n  const regions = useRegions();\n  const data = useData(view, setLoading);\n  // if (data) console.log(data[0]);\n  if (!regions || !data || !data.length) return <LoadSpinner />;\n  const filteredData = data.filter((obj) => obj.date >= new Date(\"2021-01-01\"));\n\n  const tableData = [\n    {\n      heading: \"步行導航使用率\",\n      value:\n        data[data.length - 1].walking >= 0\n          ? \"+\" + data[data.length - 1].walking.toLocaleString() + \"%\"\n          : data[data.length - 1].walking.toLocaleString() + \"%\",\n    },\n    {\n      heading: \"開車導航使用率\",\n      value:\n        data[data.length - 1].driving >= 0\n          ? \"+\" + data[data.length - 1].driving.toLocaleString() + \"%\"\n          : data[data.length - 1].driving.toLocaleString() + \"%\",\n    },\n    {\n      heading: \"大眾交通導航使用率\",\n      value: data[data.length - 1].transit\n        ? data[data.length - 1].transit >= 0\n          ? \"+\" + data[data.length - 1].transit.toLocaleString() + \"%\"\n          : data[data.length - 1].transit.toLocaleString() + \"%\"\n        : \"無資料\",\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DropdownMenu\n        dropdownItems={regions.subregions}\n        chosen={view}\n        setChosen={setView}\n      />\n      {loading ? (\n        <LoadSpinner />\n      ) : (\n        <>\n          <DataTable items={tableData} />\n          <LineChart data={filteredData} />\n        </>\n      )}\n      <pre>{`資料時間：${data[data.length - 1].date.toLocaleDateString(\n        \"zh-TW\"\n      )}`}</pre>\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://disease.sh/v3/covid-19/apple/countries/TW\";\n\n// Data: Covid vaccinations in Taiwan\nexport const useRegions = () => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((data) => {\n      // console.log(data);\n      if (isMounted) setData(data);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport { Card } from \"../elements/CommonUIs\";\nimport { TaiwanOverviewPie } from \"./TaiwanOverviewPie/index\";\nimport { TaiwanTestsOverviewPie } from \"./TaiwanTestsOverviewPie/index\";\nimport { TaiwanNewCasesArea } from \"./TaiwanNewCasesArea/index\";\nimport { TaiwanVaccinationArea } from \"./TaiwanVaccinationArea/index\";\nimport { ChoroplethMap } from \"./ChoroplethMap/index\";\nimport { CFRByGroupsBar } from \"./CFRByGroupsBar/index\";\nimport { CasesByCountiesArea } from \"./CasesByCountiesArea/index\";\nimport { TaiwanMobilityLine } from \"./TaiwanMobilityLine/index\";\n// import { VaccinationRateByCountiesBar } from \"./VaccinationRateByCountiesBar/index\";\n\nexport const TaiwanView = () => (\n  <ul className=\"flex-card-list\">\n    <Card>\n      <TaiwanOverviewPie />\n    </Card>\n    <Card>\n      <TaiwanTestsOverviewPie />\n    </Card>\n    <Card>\n      <TaiwanNewCasesArea />\n    </Card>\n    <Card>\n      <CasesByCountiesArea />\n    </Card>\n    <Card>\n      <ChoroplethMap />\n    </Card>\n    <Card>\n      <CFRByGroupsBar />\n    </Card>\n    <Card>\n      <TaiwanVaccinationArea />\n    </Card>\n    <Card>\n      <TaiwanMobilityLine />\n    </Card>\n    {/* <Card> */}\n    {/*   <VaccinationRateByCountiesBar /> */}\n    {/* </Card> */}\n  </ul>\n);\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items, dataType, dataValue }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            <th>Total</th>\n            {/* {items.map((item) => ( */}\n            {/*   <th key={dataType(item)}>{dataType(item)}</th> */}\n            {/* ))} */}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td className=\"numerical-data\">\n              {items.reduce((acc, cur) => acc + cur.value, 0).toLocaleString()}\n            </td>\n            {/* {items.map((item, index) => ( */}\n            {/*   <td className=\"numerical-data\" key={index}> */}\n            {/*     {dataValue(item).toLocaleString()} */}\n            {/*   </td> */}\n            {/* ))} */}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React from \"react\";\nexport const PieLabel = ({\n  pieLabelPosition,\n  dataValue,\n  d,\n  percentage,\n  className,\n  labelOffsetY = 18,\n}) => (\n  <text\n    className={className}\n    transform={`translate(${pieLabelPosition})`}\n    textAnchor=\"middle\"\n    dominantBaseline=\"middle\"\n  >\n    <tspan className=\"num\" x=\"0\" dy={-labelOffsetY} fill=\"black\">\n      {percentage}%\n    </tspan>\n    <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n      {dataValue(d.data).toLocaleString()}\n    </tspan>\n  </text>\n);\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { PieLabel } from \"./PieLabel.jsx\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorValue,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 2.2;\n      pieLabelPosition[1] *= 2.2;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <path fill={colorValue(d.data)} d={pieArc(d)} />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabelStroke}\n        />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabel}\n        />\n      </g>\n    );\n  });\n","import React from \"react\";\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">{children}</div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { arc, pie, scaleOrdinal } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.7;\nconst pieRadius = (width * 0.66) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\n\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\nconst legendX = width * 0.66;\nconst legendY = height / 2;\n\nconst pieArc = arc().innerRadius(0).outerRadius(pieOuterMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\nconst colorValue = (d) => d.color;\n\nconst title = \"Worldwide Cases Overview\";\nconst ColorLegendLabel = \"Cases\";\n\nexport const OverviewPie = () => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  // if (data) console.log(data);\n  const pieData = [\n    {\n      case: \"Deaths\",\n      value: data.deaths,\n      color: \"#BD2D28\",\n    },\n    {\n      case: \"Recovered\",\n      value: data.recovered,\n      color: \"#6BBBA1\",\n    },\n    {\n      case: \"Active\",\n      value: data.active,\n      color: \"#E25A42\",\n    },\n  ];\n  const colorPie = pie().sort(null).value(dataValue);\n\n  const colorScale = scaleOrdinal()\n    .domain(pieData.map(dataType))\n    .range(pieData.map(colorValue));\n\n  const ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\n  const SourceCredit = () => (\n    <p className=\"footnote\">\n      Data source: Worldometers (\n      <a href=\"https://github.com/disease-sh/api\">disease.sh</a>)\n    </p>\n  );\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={pieData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieRadius},${height / 2})`}>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {ColorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n      <Collapsible id={title}>\n        <p>\n          This chart gives a rough overview of COVID-19 pandemic currently\n          spreading around the world. The total number at the top left corner\n          shows a number of confirmed cases ever tested positive. Since not\n          everyone has been tested, this can only represent the cases we know so\n          far.\n        </p>\n        <p>\n          All tested positive cases are further divided into three categories as\n          shown in the pie chart: active, recovered, and deaths. The recovered\n          percentage is intended to give us an idea of how far we are from\n          global recovery. The \"clock\", however, can turn back when the virus is\n          spreading rapidly. Active cases represents the people still suffering\n          from the disease. Most active cases will recover, but some will not.\n          According to{\" \"}\n          <a href=\"https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html\">\n            an early report{\" \"}\n          </a>\n          by <i>the New York Times</i>, the fatality rate for those infected is\n          likely to be lower than 3%.\n        </p>\n        <SourceCredit />\n      </Collapsible>\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://disease.sh/v3/covid-19/all\";\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // console.log(data);\n\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((d) => {\n      if (isMounted) setData(d);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, timeParse } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv\";\n\nconst parseDay = timeParse(\"%Y-%m-%d\");\n\nconst transform = (rawData) => {\n  return rawData.map((d) => ({\n    date: parseDay(d.date),\n    newCases: +d.World,\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl).then((rawData) => {\n      if (isMounted) setData(transform(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG.call(xAxis);\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.markerLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./LineChart.module.css\";\nexport const RectOverlay = ({\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  return useMemo(() => {\n    const points = data.map((d) => areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <rect\n          width={innerWidth}\n          height={innerHeight}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n        />\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  area,\n  timeFormat,\n  extent,\n  max,\n  format,\n  curveNatural,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { RectOverlay } from \"./RectOverlay\";\nimport styles from \"./LineChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.8;\nconst margin = { top: 20, right: 0, bottom: 40, left: 65 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%b, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %y\");\n\nconst yValue = (d) => d.newCases;\n// const yAxisLabel = \"New cases\";\n// const yAxisLabelOffset = 60;\nconst siFormat = format(\".2s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue);\n\nexport const LineChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState(data[data.length - 1]);\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is population, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, max(data, yValue)])\n        .range([innerHeight, 0])\n        .nice(),\n    [data, innerHeight]\n  );\n\n  const handleVoronoiHover = useCallback(setActiveData, [setActiveData]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0))\n        .curve(curveNatural),\n    [xScale, yScale]\n  );\n\n  const Tooltip = ({ activeData, className }) => (\n    <text className={className} textAnchor={\"end\"} x={0} y={-5}>\n      <tspan x=\"-10\" dy=\"0\" fontWeight=\"bold\">\n        {activeData.newCases.toLocaleString()}\n      </tspan>\n      <tspan x=\"-10\" dy=\"1.5em\">\n        {xTooltipFormat(activeData.date)}\n      </tspan>\n    </text>\n  );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${ */}\n          {/*     innerHeight / 2 */}\n          {/*   }) rotate(-90)`} */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.marks}>\n            <path d={areaGenerator(data)} />\n          </g>\n          {activeData ? (\n            <>\n              <g className={styles.marks}>\n                <path d={areaGenerator(data)} />\n              </g>\n              <XMarkerLine\n                value={activeData.date}\n                xScale={xScale}\n                innerHeight={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  className={styles.tooltipStroke}\n                />\n                <Tooltip activeData={activeData} className={styles.tooltip} />\n              </g>\n            </>\n          ) : null}\n          <RectOverlay\n            onHover={handleVoronoiHover}\n            data={data}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">{children}</div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { LineChart } from \"./LineChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\nconst title = \"Daily New Cases Worldwide\";\n\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    Data source: Center for Systems Science and Engineering (CSSE) at Johns\n    Hopkins University (\n    <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/jhu\">\n      Our Wolrd in Data\n    </a>\n    )\n  </p>\n);\n\nexport const DailyNewCasesWorldwideArea = () => {\n  const data = useData();\n  if (!data || !data.length) return <LoadSpinner />;\n  // if (data) console.log(data);\n  const lastSevenDaysAvg = sumValuesInObject(data.slice(-7), \"newCases\") / 7;\n\n  const beforeSevenDaysAvg =\n    sumValuesInObject(data.slice(-14, -7), \"newCases\") / 7;\n\n  const tableData = [\n    {\n      heading: \"Average previous week\",\n      value: Math.round(beforeSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"Average this week\",\n      value: Math.round(lastSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"Growth factor\",\n      value: (lastSevenDaysAvg / beforeSevenDaysAvg).toFixed(2),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <LineChart data={data} />\n      <Collapsible id={title}>\n        <p>\n          This chart is intended to show how fast the viruses are spreading over\n          time. Each data point represents the number of people tested positive\n          on that day, therefore \"new cases\".\n        </p>\n        <p>\n          During a contagious disease's growing period, an infected person is\n          likely to spread the virus to more than one healthy person, so the\n          latter days will see more new cases than the previous days. For\n          example, if we have 10 new cases today but only 5 new cases yesterday,\n          it can mean each of those 5 people passed the disease to 2 more people\n          during the day. So, the \"2\" is the \"growth factor\" listed here above\n          the chart. Only when the growth factor constantly goes below 1, have\n          we the chance to see an end to the pandemic.\n        </p>\n        <p>\n          Since most societies work in a weekly basis, we can see the data\n          regularly fluctuates inside of a week. To avoid misintepretation, this\n          chart calculates the growth factor with weekly averages.\n        </p>\n        <SourceCredit />\n      </Collapsible>\n    </>\n  );\n};\n","export const RadioButton = ({ item, label, selected, handleChange }) => (\n  <div className=\"radio-btn\">\n    <input\n      id={item}\n      type=\"radio\"\n      onChange={() => handleChange(item)}\n      checked={item === selected}\n    />\n    <label htmlFor={item}>{label}</label>\n  </div>\n);\n","const calPercentage = (numerator, denominator) =>\n  Number(((numerator / denominator) * 100).toFixed(2));\n\nexport const DataTable = ({ data, selected }) => (\n  <div className=\"area-data-sets\">\n    {data.map((d, index) => (\n      <div className=\"data-set\" key={d.country}>\n        <div className=\"vertical-inverted-title\">\n          {index + 1} {d.location}\n        </div>\n        <div className=\"set-title\">Confirmed</div>\n        <div\n          className={`numerical-data ${\n            selected === \"total_cases\" ? \"selected\" : null\n          }`}\n        >\n          {d.total_cases.toLocaleString()}\n        </div>\n        <div\n          className={`smaller-numbers numerical-data ${\n            selected === \"new_cases\" ? \"selected\" : null\n          }`}\n        >\n          (+{d.new_cases.toLocaleString()})\n        </div>\n        <div className=\"set-title\">Deaths</div>\n        <div\n          className={`numerical-data ${\n            selected === \"total_deaths\" ? \"selected\" : null\n          }`}\n        >\n          {d.total_deaths.toLocaleString()}\n        </div>\n        <div\n          className={`smaller-numbers numerical-data ${\n            selected === \"new_deaths\" ? \"selected\" : null\n          }`}\n        >\n          (+{d.new_deaths.toLocaleString()})\n        </div>\n        <div className=\"set-title\">Death Rate</div>\n        <div className=\"numerical-data\">\n          {calPercentage(d.total_deaths, d.total_cases)}%\n        </div>\n      </div>\n    ))}\n  </div>\n);\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React, { useState } from \"react\";\nimport { useData } from \"./useData\";\nimport { RadioButton } from \"./RadioButton\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { DataTable } from \"./DataTable\";\nimport { ChartTitle } from \"./ChartTitle\";\n// import { Collapsible } from \"./Collapsible\";\n\nconst title = \"Areas With Outstanding Cases\";\n\nconst sortTypes = [\n  { type: \"total_cases\", label: \"Total infected\" },\n  { type: \"total_deaths\", label: \"Total deaths\" },\n  { type: \"new_cases\", label: \"Newly infected\" },\n  { type: \"new_deaths\", label: \"New deaths\" },\n];\n\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    Data source: Center for Systems Science and Engineering (CSSE) at Johns\n    Hopkins University (\n    <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/jhu\">\n      Our Wolrd in Data\n    </a>\n    )\n  </p>\n);\n\nexport const AreasWithOutstandingCasesTable = () => {\n  const [sortBy, setSortBy] = useState(\"new_cases\");\n  const data = useData();\n  if (!data || !data.length) return <LoadSpinner />;\n  // if (data) console.log(data[0]);\n  const tableData = data\n    .sort((a, b) => b[sortBy] - a[sortBy])\n    .filter((obj) => obj.continent !== null)\n    .slice(0, 12);\n  return (\n    <>\n      <ChartTitle title={title} />\n      <div className=\"radio-btn-container\">\n        {sortTypes.map(({ type, label }) => (\n          <RadioButton\n            key={type}\n            item={type}\n            label={label}\n            selected={sortBy}\n            handleChange={setSortBy}\n          />\n        ))}\n      </div>\n      <DataTable data={tableData} selected={sortBy} />\n      <SourceCredit />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/latest/owid-covid-latest.csv\";\n\n// Data: Covid daily new_cases\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((rawData) => {\n      if (isMounted) setData(rawData);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, timeParse } from \"d3\";\n\nconst parseDay = timeParse(\"%Y-%m-%d\");\n\nconst transform = (rawData, selected) => {\n  return rawData.map((d) => ({\n    date: parseDay(d.date),\n    newCases: +d[selected],\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useData = (api, selected) => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    csv(api).then((rawData) => {\n      if (isMounted) setData(transform(rawData, selected));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [api, selected]);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const CursorLine = ({ value, xScale, height }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <line\n      className={styles.cursorLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 16,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      transform={`translate(${index * tickSpacing}, 0)`}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text\n        dominantBaseline=\"central\"\n        x={tickTextOffset}\n        className={styles.legendStroke}\n      >\n        {domainValue}\n      </text>\n      <text\n        dominantBaseline=\"central\"\n        x={tickTextOffset}\n        className={styles.legend}\n      >\n        {domainValue}\n      </text>\n    </g>\n  ));\n","export const Tooltip = ({\n  colorScale,\n  dataTop,\n  dataDown,\n  activeDate,\n  className,\n  xTooltipFormat,\n}) => (\n  <text className={className} textAnchor={\"end\"}>\n    <tspan x=\"-10\">{xTooltipFormat(activeDate)}</tspan>\n    <tspan x=\"-10\" dy=\"1.2em\" fontWeight=\"bold\" fill={colorScale.range()[0]}>\n      +\n      {dataTop\n        .find((obj) => obj.date.valueOf() === activeDate.valueOf())\n        .newCases.toLocaleString()}\n    </tspan>\n    <tspan x=\"-10\" dy=\"1.2em\" fontWeight=\"bold\" fill={colorScale.range()[1]}>\n      +\n      {dataDown\n        .find((obj) => obj.date.valueOf() === activeDate.valueOf())\n        .newCases.toLocaleString()}\n    </tspan>\n  </text>\n);\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\nexport const RectOverlay = ({\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  return useMemo(() => {\n    const points = data.map((d) => areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <rect\n          width={innerWidth}\n          height={innerHeight}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index].date);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index].date);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index].date);\n          }}\n        />\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  scaleOrdinal,\n  area,\n  timeFormat,\n  extent,\n  max,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\n// import { XMarkerLine } from \"./XMarkerLine\";\nimport { CursorLine } from \"./CursorLine\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { Tooltip } from \"./Tooltip\";\nimport { RectOverlay } from \"./RectOverlay\";\nimport styles from \"./AreaChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 30, right: 10, bottom: 70, left: 40 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d\");\n\nconst yValue = (d) => d.newCases;\n// const yAxisLabel = \"New cases\";\n// const yAxisLabelOffset = 60;\nconst siFormat = format(\"~s\");\nconst yAxisTickFormat = (tickValue) =>\n  siFormat(tickValue < 0 ? -tickValue : tickValue);\n\n// const ColorLegendLabel = \"接種情形\";\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 150;\n\nexport const AreaChart = ({ dataTop, dataDown }) => {\n  // Change state when different point is hovered\n  const [activeDate, setActiveDate] = useState(\n    dataTop[dataTop.length - 1].date\n  );\n  // if (activeDate) console.log(activeDate);\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is population, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(dataTop, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [dataTop, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([-max(dataDown, yValue), max(dataTop, yValue)])\n        .range([innerHeight, 0])\n        .nice(),\n    [dataTop, dataDown, innerHeight]\n  );\n\n  const handleVoronoiHover = useCallback(setActiveDate, [setActiveDate]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const areaGeneratorDown = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(-yValue(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain([\"Newly infected\", \"New deaths\"])\n        .range([\"black\", \"#BD2D28\"]),\n    []\n  );\n\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${ */}\n          {/*     innerHeight / 2 */}\n          {/*   }) rotate(-90)`} */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.marks}>\n            <path d={areaGenerator(dataTop)} />\n          </g>\n          <g className={styles.marksDown}>\n            <path d={areaGeneratorDown(dataDown)} />\n          </g>\n          {/* <XMarkerLine */}\n          {/*   value={new Date(\"2021-05-15T00:00\")} */}\n          {/*   xScale={xScale} */}\n          {/*   height={innerHeight} */}\n          {/*   label={\"雙北實施三級警戒\"} */}\n          {/* /> */}\n          {activeDate ? (\n            <>\n              <CursorLine\n                value={activeDate}\n                xScale={xScale}\n                height={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  dataTop.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )}, ${areaGenerator.y1()(\n                  dataTop.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  colorScale={colorScale}\n                  dataTop={dataTop}\n                  dataDown={dataDown}\n                  activeDate={activeDate}\n                  className={styles.tooltipStroke}\n                  xTooltipFormat={xTooltipFormat}\n                />\n                <Tooltip\n                  colorScale={colorScale}\n                  dataTop={dataTop}\n                  dataDown={dataDown}\n                  activeDate={activeDate}\n                  className={styles.tooltip}\n                  xTooltipFormat={xTooltipFormat}\n                />\n              </g>\n              <g\n                transform={`translate(${areaGeneratorDown.x()(\n                  dataDown.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )}, ${areaGeneratorDown.y1()(\n                  dataDown.find(\n                    (obj) => obj.date.valueOf() === activeDate.valueOf()\n                  )\n                )})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n              </g>\n            </>\n          ) : null}\n          <g\n            transform={`translate(${legendCircleRadius}, ${\n              -legendCircleRadius * 2\n            })`}\n          >\n            <ColorLegend\n              colorScale={colorScale}\n              tickSpacing={legendItemSpacing}\n              tickSize={legendCircleRadius}\n              tickTextOffset={legendCircleRadius * 2}\n            />\n          </g>\n          <RectOverlay\n            onHover={handleVoronoiHover}\n            data={dataTop}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React, { useState } from \"react\";\nimport Select from \"react-select\";\nimport { useData } from \"./useData\";\nimport { useLocations } from \"./useLocations\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { AreaChart } from \"./AreaChart\";\n// import { Collapsible } from \"./Collapsible\";\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\nconst NEW_CONFIRMED_API =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv\";\n\nconst NEW_DEATHS_API =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_deaths.csv\";\n\nexport const NewCasesArea = () => {\n  const [selected, setSelected] = useState(\"Japan\");\n  const new_confirmed_data = useData(NEW_CONFIRMED_API, selected);\n  const new_deaths_data = useData(NEW_DEATHS_API, selected);\n  const locations = useLocations();\n  if (\n    !new_confirmed_data ||\n    !new_confirmed_data.length ||\n    !new_deaths_data ||\n    !new_deaths_data.length ||\n    !locations ||\n    !locations.length\n  )\n    return <LoadSpinner />;\n  // console.log(new_confirmed_data, new_deaths_data, locations);\n\n  // Filter data for the lastest 90 days\n  const filteredConfirmed = new_confirmed_data.filter(\n    (obj) => obj.date.valueOf() >= new Date().valueOf() - 7776000000\n  );\n  const filteredDeaths = new_deaths_data.filter(\n    (obj) => obj.date.valueOf() >= new Date().valueOf() - 7776000000\n  );\n\n  const sevenDayAvg =\n    sumValuesInObject(new_confirmed_data.slice(-7), \"newCases\") / 7;\n  const prevSevenDayAvg =\n    sumValuesInObject(new_confirmed_data.slice(-14, -7), \"newCases\") / 7;\n\n  const title = `COVID-19 Daily New Cases in ${selected}`;\n\n  const tableData = [\n    {\n      heading: \"Last week avg*\",\n      value: Math.round(prevSevenDayAvg).toLocaleString(),\n    },\n    {\n      heading: \"This week avg*\",\n      value: Math.round(sevenDayAvg).toLocaleString(),\n    },\n    {\n      heading: \"Growth factor\",\n      value: (sevenDayAvg / prevSevenDayAvg).toFixed(2),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <Select\n        options={locations}\n        onChange={(e) => setSelected(e.value)}\n        placeholder={\"Select a region\"}\n      />\n      <DataTable items={tableData} />\n      <AreaChart dataTop={filteredConfirmed} dataDown={filteredDeaths} />\n      <p className=\"footnote\">* Averages of newly infected cases</p>\n      {/* <Collapsible id={title} /> */}\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/locations.csv\";\n\nconst transform = (rawData) => {\n  return rawData.map((d) => ({\n    value: d[\"location\"],\n    label: d[\"Country/Region\"],\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useLocations = () => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((rawData) => {\n      if (isMounted) setData(transform(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickOffset = 3,\n  tickCount = 6,\n}) =>\n  // Label and reference lines for x scale\n  xScale.ticks(tickCount).map((tickValue) => (\n    // Each tick goes to the position indicating its value\n    <g\n      className={styles.tick}\n      key={tickValue}\n      transform={`translate(${xScale(tickValue)}, 0)`}\n    >\n      {/* the values of x1, x2, y1 are 0, which is default */}\n      <line y2={innerHeight} />\n      <text\n        y={innerHeight + tickOffset}\n        dy=\"0.71em\"\n        style={{ textAnchor: \"middle\" }}\n      >\n        {tickFormat(tickValue)}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisLeft = ({\n  countryScale,\n  ageScale,\n  width,\n  margin,\n  tickOffset = 3,\n}) =>\n  ageScale.domain().map((tickValue) => (\n    <g\n      key={tickValue}\n      className={styles.tick}\n      transform={`translate(0,${\n        ageScale(tickValue) + ageScale.bandwidth() / 2\n      })`}\n    >\n      <rect\n        x={-margin.left}\n        y={-ageScale.bandwidth() / 2 - 4}\n        width={width}\n        height={ageScale.bandwidth() + 8}\n      />\n      <text\n        x={-margin.left + tickOffset}\n        style={{\n          fontSize: \"1.1em\",\n          fontWeight: \"bold\",\n          textAnchor: \"start\",\n          dominantBaseline: \"central\",\n        }}\n      >\n        {tickValue}\n      </text>\n      {countryScale.domain().map((tickValue) => (\n        <text\n          key={tickValue}\n          x={-tickOffset}\n          y={\n            countryScale(tickValue) +\n            countryScale.bandwidth() / 2 -\n            ageScale.bandwidth() / 2\n          }\n          style={{ textAnchor: \"end\", dominantBaseline: \"central\" }}\n        >\n          {tickValue}\n        </text>\n      ))}\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const Marks = ({\n  data,\n  ageGroups,\n  ageScale,\n  xScale,\n  countryScale,\n  countryValue,\n  colorScale,\n  tooltipFormat,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  data.map((d) =>\n    ageGroups.map((key) => (\n      <g\n        key={countryValue(d) + key}\n        className={styles.marks}\n        onMouseEnter={() => onHover(countryValue(d))}\n        onMouseLeave={() => onHover(null)}\n        opacity={\n          hoveredValue && hoveredValue !== countryValue(d) ? fadeOpacity : 1\n        }\n      >\n        <rect\n          x={0}\n          y={ageScale(key) + countryScale(countryValue(d))}\n          width={xScale(d[key])}\n          height={countryScale.bandwidth()}\n          fill={colorScale(countryValue(d))}\n        >\n          <title>{`${key}: ${tooltipFormat(d[key])}`}</title>\n        </rect>\n        <text\n          x={xScale(d[key]) + 3}\n          y={\n            ageScale(key) +\n            countryScale(countryValue(d)) +\n            countryScale.bandwidth() / 2\n          }\n          style={{ textAnchor: \"start\", dominantBaseline: \"central\" }}\n        >\n          {tooltipFormat(d[key])}\n        </text>\n      </g>\n    ))\n  );\n","import React, { useState, useMemo } from \"react\";\nimport { scaleBand, scaleLinear, scaleOrdinal, max, schemeTableau10 } from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { Marks } from \"./Marks\";\n// import { ColorLegend } from \"./ColorLegend\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 1.1 : width * 2;\nconst margin = { top: 20, right: 40, bottom: 30, left: 170 };\n\nconst countryValue = (d) => d.Country;\nconst xAxisTickFormat = (tickValue) => tickValue + \"%\";\n\n// The chart's real height and width\nconst innerHeight = height - margin.top - margin.bottom;\nconst innerWidth = width - margin.left - margin.right;\n\n// Legend settings\n// const legendX = width * 0.7;\n// const legendY = innerHeight / 2;\n// const ColorLegendLabel = \"Countries\";\n\n// const circleRadius = 8;\n// const legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\nexport const BarChart = ({ data }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const ageGroups = data.columns.slice(1);\n\n  // X axis is percentage of deaths, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleLinear()\n        // Domain is an array of actual data, starts from 0 to the max of all countries\n        // d3.max(iterable[, accessor])\n        .domain([0, max(data, (d) => max(ageGroups, (key) => d[key]))])\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [ageGroups, data]\n  );\n\n  const ageScale = useMemo(\n    () =>\n      scaleBand().domain(ageGroups).range([0, innerHeight]).paddingInner(0.15),\n    [ageGroups]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const countryScale = useMemo(\n    () =>\n      scaleBand()\n        .domain(data.map(countryValue))\n        .range([ageScale.bandwidth(), 0])\n        .paddingInner(0.1),\n    [ageScale, data]\n  );\n\n  const colorScale = useMemo(\n    () => scaleOrdinal().domain(data.map(countryValue)).range(schemeTableau10),\n    [data]\n  );\n\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={8}\n          />\n          <AxisLeft\n            countryScale={countryScale}\n            ageScale={ageScale}\n            margin={margin}\n            width={width}\n          />\n          <Marks\n            data={data}\n            ageScale={ageScale}\n            ageGroups={ageGroups}\n            xScale={xScale}\n            countryScale={countryScale}\n            countryValue={countryValue}\n            colorScale={colorScale}\n            tooltipFormat={xAxisTickFormat}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        {/* <g transform={`translate(${legendX}, ${legendY})`}> */}\n        {/*   <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n        {/*     {ColorLegendLabel} */}\n        {/*   </text> */}\n        {/*   <ColorLegend */}\n        {/*     colorScale={colorScale} */}\n        {/*     tickSpacing={legendItemSpacing} */}\n        {/*     tickSize={circleRadius} */}\n        {/*     tickTextOffset={16} */}\n        {/*     onHover={setHoveredValue} */}\n        {/*     hoveredValue={hoveredValue} */}\n        {/*     fadeOpacity={fadeOpacity} */}\n        {/*   /> */}\n        {/* </g> */}\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst SourceCredit = () => (\n  <>\n    <p className=\"footnote\">\n      Data sources: Chinese Center for Disease Control and Prevention (CDC);\n      Spanish Ministry of Health; Korea Centers for Disease Control and\n      Prevention (KCDC); Onder G, Rezza G, Brusaferro S. Case-Fatality Rate and\n      Characteristics of Patients Dying in Relation to COVID-19 in Italy. JAMA.\n      (This is a remake of{\" \"}\n      <a href=\"https://ourworldindata.org/mortality-risk-covid#case-fatality-rate-of-covid-19-by-age\">\n        the same chart\n      </a>{\" \"}\n      by Hannah Ritchie and Max Roser published in OurWorldinData.org)\n    </p>\n    <p className=\"footnote\">\n      Licensed under CC-BY by the authors Hannah Ritchie and Max Roser.\n    </p>\n  </>\n);\n\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            This chart gives us a rough idea of which age groups are most at\n            risk to COVID-19. If we know which groups are most likely to die\n            from the disease, precautions and resouces like vaccines can be\n            directed to the ones who need them most. According to this chart,\n            the elderly are most likely to die from COVID-19.\n          </p>\n          <p>\n            The data presented in the chart are calculated from the number of\n            deaths divided by the number of confirmed cases in each age group.\n            Since COVID-19 is still an ongoing pandemic, these numbers can\n            change over time and conditions. There are two main limitations to\n            keep in mind when interpreting this chart:\n          </p>\n          <ol>\n            <li>\n              Since not everyone is tested within the population, we do not know\n              the real number of infected cases.\n            </li>\n            <li>\n              Some infected individuals are still alive at the time of\n              recording, but will eventually die from the disease.\n            </li>\n          </ol>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { BarChart } from \"./BarChart\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const CaseFatalityRatesByAgeBarChart = () => {\n  const data = useData();\n  if (!data || !data.length) return <LoadSpinner />;\n\n  return (\n    <>\n      <ChartTitle title=\"Case fatality rates by age\" />\n      <BarChart data={data} />\n      <Collapsible id=\"caseFatalityRetes\" />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/mgeorgetw/965bfe365ab8e70e2ee34c9a5d4d594a/raw/COVID19CaseFatalityRatesByAge.csv\";\n\n// Data: Case Fatality Rates By Age\n// https://ourworldindata.org/mortality-risk-covid#case-fatality-rate-of-covid-19-by-age\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((data) => {\n      if (isMounted) setData(data);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { Card } from \"../elements/CommonUIs\";\nimport { OverviewPie } from \"./OverviewPie/index\";\nimport { DailyNewCasesWorldwideArea } from \"./DailyNewCasesWorldwideArea/index\";\nimport { AreasWithOutstandingCasesTable } from \"./AreasWithOutstandingCasesTable/index\";\nimport { NewCasesArea } from \"./NewCasesArea/index\";\nimport { CaseFatalityRatesByAgeBarChart } from \"./CaseFatalityRatesByAgeBarChart/index\";\n\nexport const GlobalView = () => (\n  <ul className=\"flex-card-list\">\n    <Card>\n      <OverviewPie />\n    </Card>\n    <Card>\n      <DailyNewCasesWorldwideArea />\n    </Card>\n    <Card>\n      <AreasWithOutstandingCasesTable />\n    </Card>\n    {/* <Card> */}\n    {/*   <Charts.WorldwideRecoveryProgressPieChart /> */}\n    {/* </Card> */}\n    {/* <Card> */}\n    {/*   <Charts.DailyNewCasesWorldwideLineChart /> */}\n    {/* </Card> */}\n    {/* <Card> */}\n    {/*   <Charts.AreasWithOutstandingCasesTable /> */}\n    {/* </Card> */}\n    <Card>\n      <NewCasesArea />\n    </Card>\n    {/* <Card> */}\n    {/*   <Charts.DailyLineChartInAnArea area={area} chart_type=\"newCases\" /> */}\n    {/* </Card> */}\n    {/* <Card> */}\n    {/*   <Charts.DailyLineChartInAnArea area={area} chart_type=\"newDeaths\" /> */}\n    {/* </Card> */}\n    {/* <Card> */}\n    {/*   <Charts.ConfirmedCasesInSelectedCountriesLineChart /> */}\n    {/* </Card> */}\n    <Card>\n      <CaseFatalityRatesByAgeBarChart />\n    </Card>\n  </ul>\n);\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport \"./App.css\";\nimport { cookieExists, setCookie, findCookie } from \"./utils/useCookies\";\n\nimport { GitHubStarBtn } from \"./GitHubStarBtn\";\nimport { AppTitle } from \"./elements/AppTitle\";\nimport { NavBar } from \"./elements/NavBar\";\nimport { TaiwanView } from \"./TaiwanView/index\";\nimport { GlobalView } from \"./GlobalView/index\";\nimport { Footer } from \"./elements/CommonUIs\";\n\n// Pull to refresh\nimport PullToRefresh from \"pulltorefreshjs\";\nimport { faSyncAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst App = () => {\n  const [view, setView] = useState(\"global\");\n  useEffect(() => {\n    cookieExists(\"view\")\n      ? setView(findCookie(\"view\"))\n      : setCookie(\"view\", \"global\");\n\n    PullToRefresh.init({\n      mainElement: \"body\",\n      onRefresh() {\n        window.location.reload();\n      },\n      iconArrow: ReactDOMServer.renderToString(\n        <FontAwesomeIcon icon={faSyncAlt} />\n      ),\n      iconRefreshing: ReactDOMServer.renderToString(\n        <FontAwesomeIcon icon={faSyncAlt} spin={true} />\n      ),\n    });\n    return () => {\n      PullToRefresh.destroyAll();\n    };\n  }, []);\n  return (\n    <div className=\"App\">\n      <GitHubStarBtn user=\"mgeorgetw\" repo=\"COVID-19-Dashboard\" />\n      <AppTitle />\n      <NavBar view={view} setView={setView} />\n      {view === \"global\" ? <GlobalView /> : <TaiwanView />}\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"react-app-polyfill/ie9\";\nimport \"react-app-polyfill/stable\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./fonts/NotoSansMono-CondensedBold.ttf\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"BarChart_axisLabel__3cYts\",\"marks\":\"BarChart_marks__1OUzD\",\"tick\":\"BarChart_tick__3x380\",\"legendLabel\":\"BarChart_legendLabel__Jrxh_\",\"legend\":\"BarChart_legend__2C5QM\"};","const findCookie = key => {\n  return document.cookie\n    .split(\"; \")\n    .find(row => row.startsWith(`${key}=`))\n    .split(\"=\")[1];\n};\n\nconst setCookie = (key, value) => {\n  let newCookie = `${key}=${value}`;\n  newCookie += \";max-age=604800;SameSite=Lax\";\n  document.cookie = newCookie;\n};\n\nconst cookieExists = key => {\n  if (\n    document.cookie.split(\";\").some(item => item.trim().startsWith(`${key}=`))\n  ) {\n    return true;\n  }\n  return false;\n};\n\nmodule.exports = {\n  findCookie,\n  setCookie,\n  cookieExists\n};\n"],"sourceRoot":""}