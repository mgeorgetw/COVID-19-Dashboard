{"version":3,"sources":["CaseFatalityRatesByAgeBarChart/BarChart.module.css","utils/useCookies.js","TaiwanView/TaiwanVaccinationOverviewLineChart/LineChart.module.css","TaiwanView/TaiwanCasesLineChart/LineChart.module.css","CasesLineChart/LineChart.module.css","fonts/NotoSansMono-CondensedBold.ttf","elements/CommonUIs.js","TaiwanView/TaiwanOverviewPie/useData.jsx","TaiwanView/TaiwanOverviewPie/ColorLegend.jsx","TaiwanView/TaiwanOverviewPie/DataTable.jsx","TaiwanView/TaiwanOverviewPie/PieLabel.jsx","TaiwanView/TaiwanOverviewPie/PieChart.jsx","TaiwanView/TaiwanOverviewPie/PieWithTableAndLegend.jsx","TaiwanView/TaiwanOverviewPie/Collapsible.jsx","TaiwanView/TaiwanOverviewPie/index.jsx","TaiwanView/TaiwanTestsOverviewPie/useData.jsx","TaiwanView/TaiwanTestsOverviewPie/Collapsible.jsx","TaiwanView/TaiwanTestsOverviewPie/ColorLegend.jsx","TaiwanView/TaiwanTestsOverviewPie/DataTable.jsx","TaiwanView/TaiwanTestsOverviewPie/PieLabel.jsx","TaiwanView/TaiwanTestsOverviewPie/PieChart.jsx","TaiwanView/TaiwanTestsOverviewPie/PieWithLegend.jsx","TaiwanView/TaiwanTestsOverviewPie/index.jsx","TaiwanView/TaiwanTestsOverviewPie/useTests.jsx","TaiwanView/TaiwanCasesLineChart/useData.js","TaiwanView/TaiwanCasesLineChart/ChartTitle.jsx","TaiwanView/TaiwanCasesLineChart/DataTable.jsx","TaiwanView/TaiwanCasesLineChart/AxisBottom.js","TaiwanView/TaiwanCasesLineChart/AxisLeft.js","TaiwanView/TaiwanCasesLineChart/XMarkerLine.js","TaiwanView/TaiwanCasesLineChart/VoronoiOverlay.js","TaiwanView/TaiwanCasesLineChart/LineChart.jsx","TaiwanView/TaiwanCasesLineChart/Collapsible.jsx","TaiwanView/TaiwanCasesLineChart/index.js","TaiwanView/TaiwanVaccinationOverviewLineChart/ChartTitle.jsx","TaiwanView/TaiwanVaccinationOverviewLineChart/DataTable.jsx","TaiwanView/TaiwanVaccinationOverviewLineChart/AxisBottom.js","TaiwanView/TaiwanVaccinationOverviewLineChart/AxisLeft.js","TaiwanView/TaiwanVaccinationOverviewLineChart/XMarkerLine.js","TaiwanView/TaiwanVaccinationOverviewLineChart/YMarkerLine.js","TaiwanView/TaiwanVaccinationOverviewLineChart/VoronoiOverlay.js","TaiwanView/TaiwanVaccinationOverviewLineChart/ColorLegend.jsx","TaiwanView/TaiwanVaccinationOverviewLineChart/LineChart.jsx","TaiwanView/TaiwanVaccinationOverviewLineChart/Collapsible.jsx","TaiwanView/TaiwanVaccinationOverviewLineChart/index.js","TaiwanView/TaiwanVaccinationOverviewLineChart/useData.js","TaiwanView/index.js","Charts.js","elements/AppTitle.js","elements/NavBar.js","OverviewPie/ColorLegend.jsx","OverviewPie/DataTable.jsx","OverviewPie/PieLabel.jsx","OverviewPie/PieChart.jsx","OverviewPie/Collapsible.jsx","OverviewPie/index.jsx","OverviewPie/useData.jsx","CasesLineChart/useData.js","CasesLineChart/ChartTitle.jsx","CasesLineChart/DataTable.jsx","CasesLineChart/AxisBottom.js","CasesLineChart/AxisLeft.js","CasesLineChart/XMarkerLine.js","CasesLineChart/VoronoiOverlay.js","CasesLineChart/LineChart.jsx","CasesLineChart/Collapsible.jsx","CasesLineChart/index.js","CaseFatalityRatesByAgeBarChart/AxisBottom.js","CaseFatalityRatesByAgeBarChart/AxisLeft.js","CaseFatalityRatesByAgeBarChart/Marks.js","CaseFatalityRatesByAgeBarChart/BarChart.jsx","CaseFatalityRatesByAgeBarChart/Collapsible.jsx","CaseFatalityRatesByAgeBarChart/index.js","CaseFatalityRatesByAgeBarChart/useData.js","App.js","serviceWorker.js","index.js","TaiwanView/TaiwanOverviewPie/OverviewPie.module.css","TaiwanView/TaiwanTestsOverviewPie/OverviewPie.module.css","OverviewPie/OverviewPie.module.css"],"names":["module","exports","findCookie","key","document","cookie","split","find","row","startsWith","setCookie","value","newCookie","cookieExists","some","item","trim","LoadSpinner","className","Card","children","Footer","href","useData","useState","data","setData","useEffect","json","then","d","Object","keys","forEach","replace","convertStringToNumber","confirmed","recovered","deaths","excludedYesterday","confirmedYesterday","testsYesterday","tests","excluded","ColorLegend","colorScale","tickSpacing","tickSize","tickTextOffset","onHover","hoveredValue","fadeOpacity","domain","map","domainValue","index","styles","legend","transform","onMouseEnter","onMouseLeave","opacity","fill","r","dy","x","DataTable","items","reduce","acc","cur","toLocaleString","PieLabel","pieLabelPosition","dataValue","percentage","labelOffsetY","textAnchor","dominantBaseline","PieChart","pieData","pieArc","colorPie","colorValue","dataType","centroid","endAngle","startAngle","dataPercentage","sum","toFixed","pieChart","onClick","pieLabelStroke","pieLabel","width","window","innerWidth","height","pieMargin","pieRadius","pieOuterMargin","pieX","pieY","legendX","legendY","legendItemSpacing","arc","innerRadius","outerRadius","case","color","PieWithTableAndLegend","setHoveredValue","useMemo","pie","sort","scaleOrdinal","range","viewBox","preserveAspectRatio","legendLabel","y","Collapsible","id","type","htmlFor","ChartTitle","title","SourceCredit","TaiwanOverviewPie","replaceAll","PieWithLegend","testsData","tableData","TaiwanTestsOverviewPie","peopleTested","date","Date","useTests","parseDay","timeParse","isMounted","csv","rawData","newCases","Taiwan","heading","AxisBottom","xScale","innerHeight","tickFormat","tickCount","tickOffset","ref","useRef","xAxisG","select","current","xAxis","axisBottom","ticks","tickPadding","call","tick","AxisLeft","yScale","yAxisG","yAxis","axisLeft","XMarkerLine","markerLineX","markerLineY2","markerLine","x1","y1","x2","y2","VoronoiOverlay","margin","areaGenerator","points","voronoi","Delaunay","from","right","point","i","onPointerEnter","renderCell","top","bottom","left","xValue","xAxisTickFormat","timeFormat","xTooltipFormat","yValue","siFormat","format","yAxisTickFormat","tickValue","LineChart","activeData","setActiveData","scaleTime","extent","nice","scaleLinear","max","handleVoronoiHover","useCallback","area","y0","curve","curveNatural","Tooltip","fontWeight","marks","dataPoint","tooltipStroke","tooltip","sumValuesInObject","prev","TaiwanCasesLineChart","lastSevenDaysAvg","slice","beforeSevenDaysAvg","Math","round","selectAll","style","attr","YMarkerLine","labelOffset","markerLineY","markerLineX2","legendStroke","people_vaccinated","yValue2","people_fully_vaccinated","areaGenerator2","scaleValue","position","axisLabel","writingMode","primary","secondary","taiwanPopulation","TaiwanVaccinationOverviewLineChart","autoType","length","total_vaccinations","TaiwanView","CheckError","response","ok","Error","statusText","transposeKeyValue","entries","calDailyDifference","array","calPercentage","numerator","denominator","Number","useDataApi","initialUrl","initialData","transformFn","url","setUrl","isLoading","setIsLoading","isError","setIsError","a","fetch","console","error","fetchData","CountriesDropDownMenu","chosen","setChosen","setItems","label","province","country","onChange","e","currentTarget","BarChart","containerComponent","labels","datum","_y","labelComponent","constrainToVisibleArea","padding","fixLabelOverlap","dependentAxis","grid","stroke","strokeWidth","strokeDasharray","LoadingSpinner","RadioButton","props","changed","checked","isSelected","SmallTable","DailyLineChartInAnArea","chart_type","lineData","setLineData","CHART_TYPES","newDeaths","deathRate","found","obj","cases","timeline","new_cases","new_deaths","death_rate","area_name","getSTItems","AreasWithOutstandingCasesTable","sortBy","setSortBy","b","todayCases","todayDeaths","AppTitle","time","getFullYear","getMonth","getDate","getToday","NavBar","view","setView","buttons","name","view_name","button","ViewButton","preventDefault","OverviewPie","active","World","CasesLineChart","countryScale","ageScale","bandwidth","fontSize","Marks","ageGroups","countryValue","tooltipFormat","Country","columns","scaleBand","paddingInner","schemeTableau10","CaseFatalityRatesByAgeBarChart","GlobalView","App","PullToRefresh","init","mainElement","onRefresh","location","reload","iconArrow","ReactDOMServer","renderToString","icon","faSyncAlt","iconRefreshing","spin","destroyAll","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.1d173123.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"BarChart_axisLabel__3i3d5\",\"marks\":\"BarChart_marks__3Qb-J\",\"tick\":\"BarChart_tick__1vAYC\",\"legendLabel\":\"BarChart_legendLabel__Y4Crq\",\"legend\":\"BarChart_legend__2XTVP\"};","const findCookie = key => {\n  return document.cookie\n    .split(\"; \")\n    .find(row => row.startsWith(`${key}=`))\n    .split(\"=\")[1];\n};\n\nconst setCookie = (key, value) => {\n  let newCookie = `${key}=${value}`;\n  newCookie += \";max-age=604800;SameSite=Lax\";\n  document.cookie = newCookie;\n};\n\nconst cookieExists = key => {\n  if (\n    document.cookie.split(\";\").some(item => item.trim().startsWith(`${key}=`))\n  ) {\n    return true;\n  }\n  return false;\n};\n\nmodule.exports = {\n  findCookie,\n  setCookie,\n  cookieExists\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"LineChart_axisLabel__2AW41\",\"primary\":\"LineChart_primary__2Gz-G\",\"secondary\":\"LineChart_secondary__20p9t\",\"tick\":\"LineChart_tick__1arGY\",\"markerLine\":\"LineChart_markerLine__2YjNA\",\"voronoi\":\"LineChart_voronoi__3-f3q\",\"dataPoint\":\"LineChart_dataPoint__BQKL3\",\"tooltip\":\"LineChart_tooltip__2Q1-P\",\"tooltipStroke\":\"LineChart_tooltipStroke__33YOR\",\"legend\":\"LineChart_legend__2mWh5\",\"legendStroke\":\"LineChart_legendStroke__3UO6F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"LineChart_axisLabel__C-vI8\",\"marks\":\"LineChart_marks__2G4Zb\",\"tick\":\"LineChart_tick__1SwPU\",\"markerLine\":\"LineChart_markerLine__1nyJh\",\"voronoi\":\"LineChart_voronoi__1XlCo\",\"dataPoint\":\"LineChart_dataPoint__14N-9\",\"tooltip\":\"LineChart_tooltip__2Wqg0\",\"tooltipStroke\":\"LineChart_tooltipStroke__KzWkJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"LineChart_axisLabel__2_tFA\",\"marks\":\"LineChart_marks__26M2D\",\"tick\":\"LineChart_tick__3yb08\",\"markerLine\":\"LineChart_markerLine__22F4j\",\"voronoi\":\"LineChart_voronoi__2Oz49\",\"dataPoint\":\"LineChart_dataPoint__g039n\",\"tooltip\":\"LineChart_tooltip__11-D6\",\"tooltipStroke\":\"LineChart_tooltipStroke__3IHSg\"};","module.exports = __webpack_public_path__ + \"static/media/NotoSansMono-CondensedBold.ad9e48a0.ttf\";","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const LoadSpinner = () => {\n  return (\n    <div className=\"lds-spinner\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n};\n\nexport const Card = ({ children, className }) => (\n  <li className={`flex-card-listitem${className ? \" \" + className : \"\"}`}>\n    <div className=\"flex-card\">{children}</div>\n  </li>\n);\n\nCard.propTypes = {\n  children: PropTypes.node,\n};\n\nexport const Footer = () => (\n  <div className=\"footer\">\n    <p>\n      © 2020 <a href=\"https://eternallogger.com\">George Huang</a>. All rights\n      reserved.\n    </p>\n  </div>\n);\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash3\";\n\nconst convertStringToNumber = (d) => {\n  Object.keys(d).forEach((key) => {\n    if (typeof d[key] !== \"number\") {\n      d[key] = d[key].replace(\",\", \"\");\n      d[key] = +d[key];\n    }\n  });\n  return d;\n};\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((d) => {\n      d = convertStringToNumber(d[0]);\n      d.confirmed = +d[\"確診\"];\n      d.recovered = +d[\"解除隔離\"];\n      d.deaths = +d[\"死亡\"];\n      d.excludedYesterday = +d[\"昨日排除\"];\n      d.confirmedYesterday = +d[\"昨日確診\"];\n      d.testsYesterday = +d[\"昨日送驗\"];\n      d.tests = +d[\"送驗\"];\n      d.excluded = +d[\"排除\"];\n      setData(d);\n    });\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            <th>總確診數</th>\n            {/* {items.map((item) => ( */}\n            {/*   <th key={dataType(item)}>{dataType(item)}</th> */}\n            {/* ))} */}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td className=\"numerical-data\">\n              {items.reduce((acc, cur) => acc + cur.value, 0).toLocaleString()}\n            </td>\n            {/* {items.map((item, index) => ( */}\n            {/*   <td className=\"numerical-data\" key={index}> */}\n            {/*     {dataValue(item).toLocaleString()} */}\n            {/*   </td> */}\n            {/* ))} */}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React from \"react\";\n// import { select, transition, easeLinear } from \"d3\";\nexport const PieLabel = ({\n  pieLabelPosition,\n  dataValue,\n  d,\n  percentage,\n  className,\n  labelOffsetY = 18,\n}) => {\n  // const ref = useRef(null);\n  // useEffect(() => {\n  //   const textG = select(ref.current)\n  //     .append(\"text\")\n  //     .attr(\"x\", 0)\n  //     .attr(\"y\", 0)\n  //     .style(\"fill\", \"red\");\n  //   textG.enter().text(\"huh\");\n  // }, []);\n  return (\n    <>\n      <text\n        className={className}\n        transform={`translate(${pieLabelPosition})`}\n        textAnchor=\"middle\"\n        dominantBaseline=\"middle\"\n      >\n        <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n          {percentage}%\n        </tspan>\n        <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n          {dataValue(d.data).toLocaleString()}\n        </tspan>\n      </text>\n      {/* <svg ref={ref.current} id=\"test\"></svg> */}\n    </>\n  );\n};\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { PieLabel } from \"./PieLabel.jsx\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorValue,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 2.3;\n      pieLabelPosition[1] *= 2.3;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <path fill={colorValue(d.data)} d={pieArc(d)} />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabelStroke}\n        />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabel}\n        />\n      </g>\n    );\n  });\n","import React, { useState, useMemo } from \"react\";\nimport { arc, pie, scaleOrdinal } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width * 0.6;\nconst pieMargin = { top: 0, right: 20, bottom: 0, left: 0 };\nconst pieRadius = (width * 0.66) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\n\nconst circleRadius = 8;\nconst legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\n// // The chart's real height and width\nconst pieX = pieRadius + pieMargin.left;\nconst pieY = pieRadius + pieMargin.top;\nconst legendX = pieRadius * 2 + pieMargin.left + pieMargin.right;\nconst legendY = pieRadius - legendItemSpacing / 2;\n\nconst pieArc = arc().innerRadius(0).outerRadius(pieOuterMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\nconst colorValue = (d) => d.color;\n\nconst ColorLegendLabel = \"案例別\";\n\nexport const PieWithTableAndLegend = ({ data }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  // {/* const data = useData(); */} // {/* if (!data) return <LoadSpinner />; */}\n  // console.log(data);\n  const pieData = [\n    {\n      case: \"解除隔離\",\n      value: data.recovered,\n      color: \"#42A5B3\",\n    },\n    {\n      case: \"病中\",\n      value: data.confirmed - data.recovered - data.deaths,\n      color: \"#E3BA22\",\n    },\n    {\n      case: \"死亡\",\n      value: data.deaths,\n      color: \"#BD2D28\",\n    },\n  ];\n  const colorPie = useMemo(() => pie().sort(null).value(dataValue), []);\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain(pieData.map(dataType))\n        .range(pieData.map(colorValue)),\n    [pieData]\n  );\n\n  return (\n    <>\n      <DataTable items={pieData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieX},${pieY})`}>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {ColorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={circleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">{children}</div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { PieWithTableAndLegend } from \"./PieWithTableAndLegend\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"COVID-19 台灣染疫情形概覽\";\n\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：\n    <a href=\"https://sites.google.com/cdc.gov.tw/2019ncov/taiwan\">\n      衛生福利部疾病管制署\n    </a>\n  </p>\n);\n\nexport const TaiwanOverviewPie = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  // console.log(data);\n  return (\n    <>\n      <ChartTitle title={title} />\n      <PieWithTableAndLegend data={data} />\n      <Collapsible id={title}>\n        <p>\n          這張圖表的用意是呈現此時此刻COVID-19在台灣的疫情概況。左上角的「總確診數」代表篩檢陽性案例的總計，不過，由於並非所有人都經過篩檢，這個數目並不足以代表社會中真正染疫的人數，頂多代表目前已知的確診人數而已。\n        </p>\n        <p>\n          正如圓餅圖所示，總確診數可以細分為三類：病中、死亡、解除隔離。此處列出解除隔離的比例，用意在顯示台灣距離疫病的終點還有多遠。但要知道，這組「恢復鐘」在疫情迅速增溫的時候是有可能倒轉的。病中案例代表目前還未康復、正在與疾病奮鬥中的人們。根據《紐約時報》\n          <a href=\"https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html\">\n            一篇疫情爆發初期的報導\n          </a>\n          ，大多數染疫者最終都會康復，確診者的死亡比例可能會小於百分之三。\n        </p>\n        <SourceCredit />\n      </Collapsible>\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash3\";\n\nconst convertStringToNumber = (d) => {\n  Object.keys(d).forEach((key) => {\n    if (typeof d[key] !== \"number\") {\n      d[key] = d[key].replaceAll(\",\", \"\");\n      d[key] = +d[key];\n    }\n  });\n  return d;\n};\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((d) => {\n      d = convertStringToNumber(d[0]);\n      d.confirmed = +d[\"確診\"];\n      d.recovered = +d[\"解除隔離\"];\n      d.deaths = +d[\"死亡\"];\n      d.excludedYesterday = +d[\"昨日排除\"];\n      d.confirmedYesterday = +d[\"昨日確診\"];\n      d.testsYesterday = +d[\"昨日送驗\"];\n      d.tests = +d[\"送驗\"];\n      d.excluded = +d[\"排除\"];\n      setData(d);\n    });\n  }, []);\n  return data;\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：\n    <a href=\"https://sites.google.com/cdc.gov.tw/2019ncov/taiwan\">\n      衛生福利部疾病管制署\n    </a>\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>這張圓餅圖用來顯示此時此刻COVID-19在台灣的篩檢工作現況。</p>\n          <p>\n            整塊大餅表示台灣從有疫情以來累計的檢驗件數；要注意件數不代表人數，因為一個人可能檢驗不只一次，所以這個數字會比累計檢驗人數要多。整個大餅又分成兩大塊：\n          </p>\n          <ul>\n            <li>灰色的：已檢驗，未通報。</li>\n            <li>彩色的：已通報案例。</li>\n          </ul>\n          <p>\n            並非所有的檢驗案例都須通報，由\n            <a href=\"https://www.cdc.gov.tw/Category/MPage/np0wef4IjYh9hvbiW2BnoQ#collapseOne84473\">\n              疾管署的規定\n            </a>\n            看來，驗心安的案例就不會通報上傳。然而，這個灰色區塊卻也是盲點所在。台灣由於上傳通報系統存在「塞車」的問題，代表有些已經檢驗且符合通報標準的案例並沒有即時通報。這些案例以及未來可能的「校正回歸」都包納在灰色的「已檢驗，未通報」區塊中。大餅的彩色部分則是已通報的件數，這又可以區分為三塊：\n          </p>\n          <ul>\n            <li>通報確診。</li>\n            <li>通報排除。</li>\n            <li>通報待確認。</li>\n          </ul>\n          <p>\n            獲通報的案例正常來說只有兩個可能，不是確診就是排除，因此不應該存在第三類。然而在通報之後、確認檢驗結果之前，還是存在時間差。據\n            <a href=\"https://health.udn.com/health/story/120950/5479893\">\n              《聯合報元氣網》的報導\n            </a>\n            ，此處的落差大多來自於各種缺件，也包括正在檢驗中，或是預先通報卻尚未採檢的情形。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items, dataType, dataValue }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item) => (\n              <th key={dataType(item)}>{dataType(item)}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {dataValue(item).toLocaleString()}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React from \"react\";\n// import { select, transition, easeLinear } from \"d3\";\nexport const PieLabel = ({\n  pieLabelPosition,\n  dataValue,\n  d,\n  percentage,\n  className,\n  labelOffsetY = 18,\n}) => {\n  // const ref = useRef(null);\n  // useEffect(() => {\n  //   const textG = select(ref.current)\n  //     .append(\"text\")\n  //     .attr(\"x\", 0)\n  //     .attr(\"y\", 0)\n  //     .style(\"fill\", \"red\");\n  //   textG.enter().text(\"huh\");\n  // }, []);\n  return (\n    <>\n      <text\n        className={className}\n        transform={`translate(${pieLabelPosition})`}\n        textAnchor=\"middle\"\n        dominantBaseline=\"middle\"\n      >\n        <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n          {percentage}%\n        </tspan>\n        <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n          {dataValue(d.data).toLocaleString()}\n        </tspan>\n      </text>\n      {/* <svg ref={ref.current} id=\"test\"></svg> */}\n    </>\n  );\n};\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { PieLabel } from \"./PieLabel.jsx\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorValue,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 2.4;\n      pieLabelPosition[1] *= 2.4;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <path fill={colorValue(d.data)} d={pieArc(d)} />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabelStroke}\n        />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabel}\n        />\n      </g>\n    );\n  });\n","import React, { useState, useMemo } from \"react\";\nimport { arc, pie, scaleOrdinal } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width * 0.7;\nconst pieMargin = { top: 20, right: 0, bottom: 0, left: 0 };\nconst pieRadius = (width * 0.66) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\n\nconst circleRadius = 8;\nconst legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\n// // The chart's real height and width\nconst pieX = pieRadius + pieMargin.left;\nconst pieY = pieRadius + pieMargin.top;\nconst legendX = pieRadius * 2 + pieMargin.left + pieMargin.right;\nconst legendY = pieRadius - legendItemSpacing / 2;\n\nconst pieArc = arc().innerRadius(0).outerRadius(pieOuterMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\nconst colorValue = (d) => d.color;\n\nconst ColorLegendLabel = \"篩檢現況\";\n\nexport const PieWithLegend = ({ data, testsData }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  const tableData = [\n    {\n      case: \"累計檢驗件數\",\n      value: testsData.tests,\n    },\n    {\n      case: \"累計通報件數\",\n      value: data.tests,\n    },\n  ];\n\n  const pieData = [\n    {\n      case: \"已檢驗，未通報\",\n      value: testsData.tests - data.tests,\n      color: \"#E5E2E0\",\n    },\n    {\n      case: \"通報確診\",\n      value: data.confirmed,\n      color: \"#005D6E\",\n    },\n    {\n      case: \"通報排除\",\n      value: data.excluded,\n      color: \"#42A5B3\",\n    },\n    {\n      case: \"通報待確認\",\n      value: data.tests - data.excluded - data.confirmed,\n      color: \"#BD2D28\",\n    },\n  ];\n\n  const colorPie = useMemo(() => pie().sort(null).value(dataValue), []);\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain(pieData.map(dataType))\n        .range(pieData.map(colorValue)),\n    [pieData]\n  );\n  return (\n    <>\n      <DataTable items={tableData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieX},${pieY})`}>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {ColorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={circleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { useTests } from \"./useTests\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\nimport { PieWithLegend } from \"./PieWithLegend.jsx\";\n\nconst title = \"COVID-19 台灣篩檢情形概覽\";\n\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\nexport const TaiwanTestsOverviewPie = () => {\n  const data = useData();\n  const testsData = useTests();\n  if (!data || !testsData) return <LoadSpinner />;\n  // console.log(data);\n  // console.log(testsData);\n  return (\n    <>\n      <ChartTitle title={title} />\n      <PieWithLegend data={data} testsData={testsData} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash7\";\n\n// Use JSON data\nexport const useTests = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((d) => {\n      d = d[0];\n      d.peopleTested = +d[\"檢驗人數\"].replaceAll(\",\", \"\");\n      d.tests = +d[\"檢驗件數\"].replaceAll(\",\", \"\");\n      d.date = new Date(d[\"資料更新時間\"]);\n      setData(d);\n    });\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, timeParse } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv\";\n\nconst parseDay = timeParse(\"%Y-%m-%d\");\n\nconst transform = (rawData) => {\n  return rawData.map((d) => ({\n    date: parseDay(d.date),\n    newCases: +d.Taiwan,\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl).then((rawData) => {\n      if (isMounted) setData(transform(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG.call(xAxis);\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.markerLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { Delaunay } from \"d3-delaunay\";\nimport styles from \"./LineChart.module.css\";\nexport const VoronoiOverlay = ({\n  margin,\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  // console.log(data);\n  return useMemo(() => {\n    const points = data.map((d) => [\n      areaGenerator.x()(d),\n      areaGenerator.y()(d),\n    ]);\n    const delaunay = Delaunay.from(points);\n    const voronoi = delaunay.voronoi([\n      0,\n      0,\n      innerWidth + margin.right,\n      innerHeight,\n    ]);\n    return (\n      <g className={styles.voronoi}>\n        {points.map((point, i) => (\n          <path\n            key={i}\n            onPointerEnter={() => onHover(data[i])}\n            d={voronoi.renderCell(i)}\n          />\n        ))}\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover, margin.right]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  area,\n  timeFormat,\n  extent,\n  max,\n  format,\n  curveNatural,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { VoronoiOverlay } from \"./VoronoiOverlay\";\nimport styles from \"./LineChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.8;\nconst margin = { top: 20, right: 0, bottom: 40, left: 65 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%b, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %y\");\n\nconst yValue = (d) => d.newCases;\n// const yAxisLabel = \"New cases\";\n// const yAxisLabelOffset = 60;\nconst siFormat = format(\".2s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue);\n\nexport const LineChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState();\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is population, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, max(data, yValue)])\n        .range([innerHeight, 0])\n        .nice(),\n    [data, innerHeight]\n  );\n\n  const handleVoronoiHover = useCallback(setActiveData, [setActiveData]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0))\n        .curve(curveNatural),\n    [xScale, yScale]\n  );\n\n  const Tooltip = ({ activeData, className }) => (\n    <text className={className} textAnchor={\"end\"} x={0} y={-5}>\n      <tspan x=\"-10\" dy=\"0\" fontWeight=\"bold\">\n        {activeData.newCases.toLocaleString()}\n      </tspan>\n      <tspan x=\"-10\" dy=\"1.5em\">\n        {xTooltipFormat(activeData.date)}\n      </tspan>\n    </text>\n  );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${ */}\n          {/*     innerHeight / 2 */}\n          {/*   }) rotate(-90)`} */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.marks}>\n            <path d={areaGenerator(data)} />\n          </g>\n          {activeData ? (\n            <>\n              <g className={styles.marks}>\n                <path d={areaGenerator(data)} />\n              </g>\n              <XMarkerLine\n                value={activeData.date}\n                xScale={xScale}\n                innerHeight={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  className={styles.tooltipStroke}\n                />\n                <Tooltip activeData={activeData} className={styles.tooltip} />\n              </g>\n            </>\n          ) : null}\n          <VoronoiOverlay\n            margin={margin}\n            onHover={handleVoronoiHover}\n            data={data}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：Center for Systems Science and Engineering (CSSE) at Johns Hopkins\n    University (\n    <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/jhu\">\n      Our Wolrd in Data\n    </a>\n    )\n  </p>\n);\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表用來顯示病毒每天傳播的速度。每一個資料點代表一天內新增的確診案例數。\n          </p>\n          <p>\n            在傳染病增溫期間，一名染疫者可能會將病毒傳染給一名以上原本健康的人，如此一來，後些日子的新增案例就會比前些日子要多。舉例來說，假設今天驗出了十名新的確診者，而昨天只有五名，那我們可以粗略地看作是昨天的五名病患各別將病毒傳染了二個人。於是「二」就是圖表上方列的「增長因數」。唯有當增長因數穩定低於一，我們才有機會看到疫情的終點，否則便代表疫情還在增溫階段。\n          </p>\n          <p>\n            就各國的經驗看來，由於大多數社會都是以週為單位在運作，所以光看每日的新增病例數不一定準。為了避免過度解讀，這張圖表列出的增長因數以週平均數來計算。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { LineChart } from \"./LineChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\nconst title = \"台灣每日新增確診案例數\";\n\nexport const TaiwanCasesLineChart = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  // if (data) console.log(data);\n  const lastSevenDaysAvg = sumValuesInObject(data.slice(-7), \"newCases\") / 7;\n\n  const beforeSevenDaysAvg =\n    sumValuesInObject(data.slice(-14, -7), \"newCases\") / 7;\n\n  const tableData = [\n    {\n      heading: \"上週平均\",\n      value: Math.round(beforeSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"本週平均\",\n      value: Math.round(lastSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"增長因數\",\n      value: (lastSevenDaysAvg / beforeSevenDaysAvg).toFixed(2),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <LineChart data={data} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.markerLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const YMarkerLine = ({\n  value,\n  yScale,\n  innerWidth,\n  labelOffset = 10,\n}) => {\n  const markerLineY = yScale(value);\n  const markerLineX1 = 0;\n  const markerLineX2 = innerWidth;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        x1={markerLineX1}\n        y1={markerLineY}\n        x2={markerLineX2}\n        y2={markerLineY}\n      />\n      <text\n        className={styles.tooltipStroke}\n        textAnchor={\"start\"}\n        dominantBaseline={\"start\"}\n        x={labelOffset}\n        y={yScale(value) - labelOffset}\n        fontWeight=\"bold\"\n      >\n        全人口的75%\n      </text>\n      <text\n        className={styles.tooltip}\n        textAnchor={\"start\"}\n        dominantBaseline={\"start\"}\n        x={labelOffset}\n        y={yScale(value) - labelOffset}\n        fontWeight=\"bold\"\n      >\n        全人口的75%\n      </text>\n    </>\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { Delaunay } from \"d3-delaunay\";\nimport styles from \"./LineChart.module.css\";\nexport const VoronoiOverlay = ({\n  margin,\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  // console.log(data);\n  return useMemo(() => {\n    const points = data.map((d) => [\n      areaGenerator.x()(d),\n      areaGenerator.y()(d),\n    ]);\n    const delaunay = Delaunay.from(points);\n    const voronoi = delaunay.voronoi([\n      0,\n      0,\n      innerWidth + margin.right,\n      innerHeight,\n    ]);\n    return (\n      <g className={styles.voronoi}>\n        {points.map((point, i) => (\n          <path\n            key={i}\n            onPointerEnter={() => onHover(data[i])}\n            d={voronoi.renderCell(i)}\n          />\n        ))}\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover, margin.right]);\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legendStroke}>\n        {domainValue}\n      </text>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legend}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  scaleOrdinal,\n  area,\n  timeFormat,\n  extent,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { YMarkerLine } from \"./YMarkerLine\";\nimport { VoronoiOverlay } from \"./VoronoiOverlay\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport styles from \"./LineChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.8;\nconst margin = { top: 20, right: 40, bottom: 80, left: 90 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %Y\");\n\nconst yValue = (d) => d.people_vaccinated;\nconst yValue2 = (d) => d.people_fully_vaccinated;\nconst yAxisLabel = \"接種人次\";\nconst yAxisLabelOffset = 75;\nconst siFormat = format(\"~s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue).replace(\"M\", \"百萬\");\n\n// const ColorLegendLabel = \"接種情形\";\nconst circleRadius = 8;\nconst legendItemSpacing = 26;\n\nexport const LineChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState();\n  const taiwanPopulation = 23514196;\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  const legendX = innerWidth - legendItemSpacing / 2;\n  const legendY = margin.top + legendItemSpacing / 2;\n\n  // X axis is time\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, taiwanPopulation])\n        .range([innerHeight, 0])\n        .nice(),\n    [innerHeight]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain([\"已接種一次\", \"已充分接種\"])\n        .range([\"#7098a5\", \"#b1c1be\"]),\n    []\n  );\n\n  const handleVoronoiHover = useCallback(setActiveData, [setActiveData]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const areaGenerator2 = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue2(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const Tooltip = ({ activeData, scaleValue, className, position }) => (\n    <text\n      className={className}\n      textAnchor={\"middle\"}\n      dominantBaseline={\"middle\"}\n      x={0}\n      y={position === \"down\" ? 20 : -15}\n    >\n      <tspan x=\"0\" dy=\"0\" fontWeight=\"bold\">\n        {scaleValue(activeData).toLocaleString()} (\n        {format(\".0%\")(scaleValue(activeData) / taiwanPopulation)})\n      </tspan>\n      {position === \"up\" ? (\n        <tspan x=\"0\" dy=\"-1.3em\">\n          {xTooltipFormat(activeData.date)}\n        </tspan>\n      ) : null}\n    </text>\n  );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          <text\n            className={styles.axisLabel}\n            textAnchor=\"middle\"\n            transform={`translate(${-yAxisLabelOffset}, ${innerHeight / 2})`}\n            writingMode=\"vertical-lr\"\n          >\n            {yAxisLabel}\n          </text>\n          <g className={styles.primary}>\n            <path d={areaGenerator(data)} />\n          </g>\n          <g className={styles.secondary}>\n            <path d={areaGenerator2(data)} />\n          </g>\n          {activeData ? (\n            <>\n              <XMarkerLine\n                value={activeData.date}\n                xScale={xScale}\n                innerHeight={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue}\n                  className={styles.tooltipStroke}\n                  position=\"up\"\n                />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue}\n                  className={styles.tooltip}\n                  position=\"up\"\n                />\n              </g>\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator2.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue2}\n                  className={styles.tooltipStroke}\n                  position=\"down\"\n                />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue2}\n                  className={styles.tooltip}\n                  position=\"down\"\n                />\n              </g>\n            </>\n          ) : null}\n          <YMarkerLine\n            value={taiwanPopulation * 0.75}\n            yScale={yScale}\n            innerWidth={innerWidth}\n          />\n          <VoronoiOverlay\n            margin={margin}\n            onHover={handleVoronoiHover}\n            data={data}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          {/* <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n          {/*   {ColorLegendLabel} */}\n          {/* </text> */}\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={circleRadius}\n            tickTextOffset={16}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：衛生福利部疾病管制署（\n    <a href=\"https://github.com/owid/covid-19-data/blob/master/public/data/vaccinations/country_data/Taiwan.csv\">\n      Our Wolrd in Data\n    </a>\n    ）\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表的用意在於判斷：以施打疫苗為防疫手段而言，台灣距離平息COVID-19疫情還有多遠。由於目前市面上的疫苗大多需要打兩劑才算完成接種，因此這裡也將接種人次分為「已接種」與「充分接種」兩種。\n          </p>\n          <p>\n            根據\n            <a href=\"https://www.who.int/zh/news-room/q-a-detail/herd-immunity-lockdowns-and-covid-19?gclid=Cj0KCQjw16KFBhCgARIsALB0g8K0rV9obZlpcbd2lFom_qKgbCe72ZnV_mqn8Z2AiNt5W3QRZFbMGCoaAshfEALw_wcB\">\n              世界衛生組織的建議\n            </a>\n            ，對抗大規模傳染的流行病，居家隔離、封鎖等措施本身便會對個人與社會造成負面影響，是為爭取時間不得已而為之。要真正對抗COVID-19，世衛支持透過疫苗來達到「群體免疫」的效果。\n          </p>\n          <p>\n            要實現「群體免疫」，就得讓社群中大多數人都擁有抗體，人數一多，病毒自然就少了傳播媒介，從而中斷傳播鏈。人要取得抗體有兩種手段：一是讓大多數的人都感染，感染過後自然會產生抗體，但這種方法必然會導致更多病例與死亡。另一種方法，就是施打疫苗。疫苗可以在不讓人生病的情況下，訓練免疫系統產生抗體，比起真的生病是安全得多的做法。\n          </p>\n          <p>\n            那麼，要多少人打過疫苗才能達到群體免疫呢？要考慮的條件主要有二。首先是每種疾病的狀況不同，例如麻疹需要95%的人口接種，才能保護剩下的5%。就COVID-19來說，實際需要多高的接種率目前沒有人能夠肯定。不過，根據\n            <a href=\"https://wwwnc.cdc.gov/eid/article/27/5/20-4365_article\">\n              美國疾管中心在卡達做的研究\n            </a>\n            ，社群中若有65%至70%的人感染，該社群就很接近群體免疫。\n          </p>\n          <p>\n            知道了這點之後，第二個要考慮的是\n            <a href=\"https://www.thelancet.com/journals/lanmic/article/PIIS2666-5247(21)00069-0/fulltext\">\n              疫苗的效能\n            </a>\n            。每一款疫苗的效能不盡相同，若是使用效能約65%至70%左右的AstraZeneca-Oxford或嬌生疫苗，就需要全民施打來達到群體免疫；若使用效能達95%左右的Pfizer-BioNTech或Moderna-NIH疫苗，則只需75%的人口施打即可。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { LineChart } from \"./LineChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"台灣 COVID-19 疫苗接種人次\";\n\nexport const TaiwanVaccinationOverviewLineChart = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  // if (data) console.log(data);\n\n  const tableData = [\n    {\n      heading: \"疫苗總數\",\n      value: data[data.length - 1].total_vaccinations.toLocaleString(),\n    },\n    {\n      heading: \"已接種人數\",\n      value: data[data.length - 1].people_vaccinated.toLocaleString(),\n    },\n    {\n      heading: \"充分接種人數\",\n      value: data[data.length - 1].people_fully_vaccinated.toLocaleString(),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <LineChart data={data} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/country_data/Taiwan.csv\";\n\n// Data: Covid vaccinations in Taiwan\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((d) => {\n      if (isMounted) setData(d);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport { Card } from \"../elements/CommonUIs\";\nimport { TaiwanOverviewPie } from \"./TaiwanOverviewPie/index\";\nimport { TaiwanTestsOverviewPie } from \"./TaiwanTestsOverviewPie/index\";\nimport { TaiwanCasesLineChart } from \"./TaiwanCasesLineChart/index\";\nimport { TaiwanVaccinationOverviewLineChart } from \"./TaiwanVaccinationOverviewLineChart/index\";\n\nexport const TaiwanView = () => (\n  <ul className=\"flex-card-list\">\n    <Card>\n      <TaiwanOverviewPie />\n    </Card>\n    <Card>\n      <TaiwanTestsOverviewPie />\n    </Card>\n    <Card>\n      <TaiwanCasesLineChart />\n    </Card>\n    <Card>\n      <TaiwanVaccinationOverviewLineChart />\n    </Card>\n  </ul>\n);\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport * as V from \"victory\";\n\n// Helper function\nconst CheckError = (response) => {\n  if (response.ok) {\n    return response.json();\n  } else {\n    throw Error(response.statusText);\n  }\n};\n\n// Transposes {'Key': 'Value'} to {x: key, y:value}\nconst transposeKeyValue = (data) =>\n  Object.entries(data).map(([key, value]) => ({\n    // Shortens date string\n    // x: key.replace(/\\/\\d{2}$/g, \"\"),\n    x: key,\n    y: value,\n  }));\n\n// Calculates daily new cases & deaths\nconst calDailyDifference = (data) =>\n  data.map((cur, index, array) => ({\n    ...cur,\n    y: index > 0 ? cur.y - array[index - 1].y : 0,\n  }));\n\nconst calPercentage = (numerator, denominator) =>\n  Number(((numerator / denominator) * 100).toFixed(2));\n\n//const sumValuesInObject = (data, key) =>\n//data.reduce(\n//(prev, cur) => (parseInt(prev) || 0) + (parseInt(cur[key]) || 0),\n//0\n//);\n\n// API Users\n// Generic hook to fetch data v1\nconst useDataApi = (initialUrl, initialData, transformFn) => {\n  const [data, setData] = useState(initialData);\n  const [url, setUrl] = useState(initialUrl);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n  useEffect(() => {\n    let isMounted = true;\n    const fetchData = async () => {\n      try {\n        const data = await fetch(url).then(CheckError);\n        if (isMounted) setData((transformFn && transformFn(data)) || data);\n      } catch (error) {\n        if (isMounted) setIsError(true);\n        console.error(error);\n      }\n      if (isMounted) setIsLoading(false);\n    };\n    fetchData();\n    return () => {\n      isMounted = false;\n    };\n  }, [transformFn, url]);\n  return [{ data, isLoading, isError }, setUrl];\n};\n\n//const dataFetchReducer = (state, action) => {\n//switch (action.type) {\n//case \"FETCH_INIT\":\n//return {\n//...state,\n//isLoading: true,\n//isError: false\n//};\n//case \"FETCH_SUCCESS\":\n//return {\n//...state,\n//isLoading: false,\n//isError: false,\n//data: action.payload\n//};\n//case \"FETCH_FAILURE\":\n//return {\n//...state,\n//isLoading: false,\n//isError: true\n//};\n//default:\n//throw new Error();\n//}\n//};\n\n//const useDataApiReducer = (initialUrl, initialData, transformFn) => {\n//console.log(\"API reducer called!\");\n//const [url, setUrl] = useState(initialUrl);\n//const [state, dispatch] = useReducer(dataFetchReducer, {\n//isLoading: true,\n//isError: false,\n//data: initialData\n//});\n//useEffect(() => {\n//const fetchData = async () => {\n//dispatch({ type: \"FETCH_INIT\" });\n//console.log(\"reducer init!\");\n//try {\n//const data = await fetch(url).then(CheckError);\n//dispatch({\n//type: \"FETCH_SUCCESS\",\n//payload: (transformFn && transformFn(data)) || data\n//});\n//console.log(\"reducer fetched!\");\n//} catch (error) {\n//dispatch({ type: \"FETCH_FAILURE\" });\n//}\n//};\n//fetchData();\n//}, [transformFn, url]);\n//console.log(\"reducer state:\", state);\n//return [state, setUrl];\n//};\n\n// SMALL COMPONENTS / HELPER FUNCTIONS\nconst CountriesDropDownMenu = ({ data, chosen, setChosen }) => {\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    setItems(\n      data.map((d) => ({\n        label: d.province ? d.province + \", \" + d.country : d.country,\n        value: d.province ? d.province : d.country,\n      }))\n    );\n  }, [data]);\n  return (\n    <div className=\"dropdown-container\">\n      Select:{\" \"}\n      <select value={chosen} onChange={(e) => setChosen(e.currentTarget.value)}>\n        {items.map(({ label, value }) => (\n          <option className=\"region-name\" key={label} value={value}>\n            {label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\nconst BarChart = ({ data, x, y }) => {\n  const axis_style = {\n    grid: {\n      stroke: \"#f3f5f6\",\n      strokeWidth: 2,\n      strokeDasharray: \"15,15\",\n    },\n  };\n  return (\n    <div className=\"bar-chart\">\n      <V.VictoryChart\n        containerComponent={\n          <V.VictoryVoronoiContainer\n            labels={({ datum }) =>\n              datum.x ? `${datum.x}: ${datum._y}` : `${datum[x]}: ${datum._y}`\n            }\n            labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n          />\n        }\n        padding={{ top: 20, bottom: 40, left: 60, right: 20 }}\n      >\n        <V.VictoryAxis fixLabelOverlap />\n        <V.VictoryAxis dependentAxis fixLabelOverlap style={axis_style} />\n        <V.VictoryBar data={data} x={x} y={y} />\n      </V.VictoryChart>\n    </div>\n  );\n};\n\nconst LoadingSpinner = () => {\n  return (\n    <div className=\"lds-spinner\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n};\n\nconst RadioButton = (props) => {\n  return (\n    <div className=\"radio-btn\">\n      <input\n        id={props.id}\n        type=\"radio\"\n        onChange={props.changed}\n        checked={props.isSelected}\n      />\n      <label htmlFor={props.id}>{props.label}</label>\n    </div>\n  );\n};\n\nconst SmallTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item) => (\n              <th key={item.heading}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.datum.toLocaleString()}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n// Charts\nconst DailyLineChartInAnArea = ({ chart_type }) => {\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v3/covid-19/historical?lastdays=90\",\n    null\n  );\n  const [chosen, setChosen] = useState(\"Taiwan\");\n  const [lineData, setLineData] = useState({});\n  // if (data) console.log(data[0]);\n  const CHART_TYPES = {\n    newCases: \"Daily New Cases in \",\n    newDeaths: \"Daily Deaths in \",\n    deathRate: \"Fatality Rate in \",\n  };\n  const ChartTitle = ({ chart_type, area_name }) => {\n    return (\n      <div className=\"chart-title\">\n        {CHART_TYPES[chart_type]}\n        {area_name}\n      </div>\n    );\n  };\n  const getSTItems = (chart_type, data) =>\n    ({\n      newCases: [\n        {\n          heading: \"Total cases\",\n          datum: data.cases ? data.cases.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"New cases\",\n          datum: data.newCases ? data.newCases.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Growth Factor\",\n          datum: data.newCases\n            ? (\n                data.newCases.slice(-1)[0].y / data.newCases.slice(-2)[0].y\n              ).toFixed(2)\n            : \"loading\",\n        },\n      ],\n      newDeaths: [\n        {\n          heading: \"Total deaths\",\n          datum: data.deaths ? data.deaths.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"New deaths\",\n          datum: data.newDeaths ? data.newDeaths.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Fatality Rate\",\n          datum: data.deathRate\n            ? data.deathRate.slice(-1)[0].y + \"%\"\n            : \"loading\",\n        },\n      ],\n      deathRate: [\n        {\n          heading: \"Confirmed\",\n          datum: data.cases ? data.cases.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Deaths\",\n          datum: data.deaths ? data.deaths.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Fatality Rate\",\n          datum: data.deathRate\n            ? data.deathRate.slice(-1)[0].y + \"%\"\n            : \"loading\",\n        },\n      ],\n    }[chart_type]);\n  useEffect(() => {\n    if (data) {\n      let found = data.find(\n        (obj) =>\n          obj.province === chosen || (!obj.province && obj.country === chosen)\n      );\n      let cases = transposeKeyValue(found.timeline.cases);\n      let deaths = transposeKeyValue(found.timeline.deaths);\n      let new_cases = calDailyDifference(cases);\n      let new_deaths = calDailyDifference(deaths);\n      let death_rate = cases.map((cur, index) => ({\n        x: cur.x,\n        y: calPercentage(deaths[index].y, cur.y) || 0,\n      }));\n      setLineData({\n        country: found.country,\n        province: found.province,\n        cases: cases,\n        deaths: deaths,\n        newCases: new_cases,\n        newDeaths: new_deaths,\n        deathRate: death_rate,\n      });\n    }\n  }, [data, chosen]);\n  return (\n    <>\n      <div className=\"chart-container\">\n        <ChartTitle\n          chart_type={chart_type}\n          area_name={\n            lineData.province\n              ? lineData.province + \", \" + lineData.country\n              : lineData.country\n          }\n        />\n        {isError && <div>Something went wrong</div>}\n        {isLoading ? (\n          <LoadingSpinner />\n        ) : (\n          <>\n            <CountriesDropDownMenu\n              data={data}\n              chosen={chosen}\n              setChosen={setChosen}\n            />\n            <SmallTable items={getSTItems(chart_type, lineData)} />\n            <BarChart data={lineData[chart_type]} />\n            <p className=\"footnote\">\n              Source: John Hopkins University CSSE (\n              <a href=\"https://github.com/NovelCOVID/API\">NovelCOVID/API</a>)\n            </p>\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n\n//const ConfirmedCasesChinaVsWorldLineChart = () => {\n//const replaceDate = dataItem => ({\n//...dataItem,\n//reportDate: dataItem.reportDate.replace(/-/g, \"/\").replace(/^\\d{4}\\//g, \"\")\n//});\n//const transformFn = useCallback(data => data.map(replaceDate), []);\n//const [{ data, isLoading, isError }] = useDataApi(\n//\"https://covid.mathdro.id/api/daily\",\n//[],\n//transformFn\n//);\n//return (\n//<>\n//{isError && <div>Something went wrong</div>}\n//<div className=\"chart-title\">Confirmed Cases</div>\n//{isLoading ? (\n//<LoadingSpinner />\n//) : (\n//<>\n//<SmallTable\n//items={[\n//{ heading: \"China\", datum: data.slice(-1)[0].mainlandChina },\n//{\n//heading: \"Other\",\n//datum: data.slice(-1)[0].otherLocations\n//}\n//]}\n///>\n//<div className=\"line-chart\">\n//<V.VictoryChart\n//containerComponent={\n//<V.VictoryVoronoiContainer\n//labels={({ datum }) => `${datum[\"reportDate\"]}: ${datum._y}`}\n//labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n///>\n//}\n//padding={{ top: 20, bottom: 40, left: 60, right: 20 }}\n//>\n//<V.VictoryAxis fixLabelOverlap />\n//<V.VictoryAxis\n//dependentAxis\n//fixLabelOverlap\n//style={{\n//grid: {\n//stroke: \"#f3f5f6\",\n//strokeWidth: 2,\n//strokeDasharray: \"15,15\"\n//}\n//}}\n///>\n//<V.VictoryGroup colorScale={[\"#fb6361\", \"black\"]}>\n//<V.VictoryLine data={data} x=\"reportDate\" y=\"mainlandChina\" />\n//<V.VictoryLine data={data} x=\"reportDate\" y=\"otherLocations\" />\n//</V.VictoryGroup>\n//<V.VictoryLegend\n//colorScale={[\"#fb6361\", \"black\"]}\n//x={60}\n//y={20}\n//data={[{ name: \"China\" }, { name: \"Other Countries\" }]}\n///>\n//</V.VictoryChart>\n//</div>\n//<p className=\"footnote\">\n//Source: Johns Hopkins University Center for Systems Science and\n//Engineering (\n//<a href=\"https://github.com/mathdroid/covid-19-api\">\n//mathdroid/covid-19-api\n//</a>\n//)\n//</p>\n//</>\n//)}\n//</>\n//);\n//};\n\nconst ConfirmedCasesInSelectedCountriesLineChart = () => {\n  const [data, setData] = useState([\n    {\n      province: \"\",\n      country: \"\",\n      Lat: 0,\n      Long: 0,\n      confirmed: [],\n    },\n  ]);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    let isMounted = true;\n\n    async function getData() {\n      try {\n        if (isMounted) setIsLoading(true);\n        const response = await fetch(`/confirmed_timeseries`);\n        const data = await response.json();\n        // Areas selected arbitrarily\n        // TODO: An UI for user to choose which areas to be shown\n        const areas_to_find = [\n          \"US\",\n          \"Brazil\",\n          \"France\",\n          \"Colombia\",\n          \"Russia\",\n          \"South Africa\",\n          \"India\",\n          \"Peru\",\n        ];\n        let areas_data = [];\n        for (let area of areas_to_find) {\n          let found = data.data.find(\n            (obj) =>\n              obj.province === area || (!obj.province && obj.country === area)\n          );\n          areas_data.push(found);\n        }\n        if (isMounted) setData(areas_data);\n        if (isMounted) setIsLoading(false);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    getData();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return (\n    <>\n      <div className=\"chart-title\">Confirmed Cases in Selected Countries</div>\n      <div className=\"line-chart\">\n        {isLoading ? (\n          <LoadingSpinner />\n        ) : (\n          <V.VictoryChart\n            containerComponent={\n              <V.VictoryVoronoiContainer\n                labels={({ datum }) => datum._y}\n                labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n              />\n            }\n            padding={{ top: 20, bottom: 40, left: 80, right: 20 }}\n            scale={{ x: \"time\", y: \"linear\" }}\n            minDomain={{ x: 30 }}\n          >\n            <V.VictoryAxis fixLabelOverlap />\n            <V.VictoryAxis\n              dependentAxis\n              fixLabelOverlap\n              style={{\n                grid: {\n                  stroke: \"#f3f5f6\",\n                  strokeWidth: 2,\n                  strokeDasharray: \"15,15\",\n                },\n              }}\n            />\n            <V.VictoryGroup colorScale={\"qualitative\"}>\n              {data.map((d) => (\n                <V.VictoryLine\n                  key={d.province ? d.province : d.country}\n                  data={d.confirmed}\n                />\n              ))}\n            </V.VictoryGroup>\n            <V.VictoryLegend\n              colorScale={\"qualitative\"}\n              orientation=\"horizontal\"\n              itemsPerRow={3}\n              x={80}\n              y={20}\n              data={data.map((d) => ({\n                name: d.province ? d.province : d.country,\n              }))}\n            />\n          </V.VictoryChart>\n        )}\n      </div>\n      <p className=\"footnote\">\n        Source: Johns Hopkins University Center for Systems Science and\n        Engineering (\n        <a href=\"https://github.com/CSSEGISandData/COVID-19\">\n          CSSEGISandData/COVID-19\n        </a>\n        )\n      </p>\n    </>\n  );\n};\n\nconst AreasWithOutstandingCasesTable = () => {\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v2/countries\",\n    []\n  );\n  const [sortBy, setSortBy] = useState(\"cases\");\n  return (\n    <>\n      <div className=\"chart-title\">Areas with Outstanding Cases</div>\n      {isError && <div>Something went wrong</div>}\n      {isLoading ? (\n        <LoadingSpinner />\n      ) : (\n        <>\n          <div className=\"radio-btn-container\">\n            <RadioButton\n              id=\"1\"\n              changed={() => setSortBy(\"cases\")}\n              isSelected={sortBy === \"cases\" ? true : false}\n              label=\"Total cases\"\n            />\n            <RadioButton\n              id=\"2\"\n              changed={() => setSortBy(\"deaths\")}\n              isSelected={sortBy === \"deaths\" ? true : false}\n              label=\"Total deaths\"\n            />\n            <RadioButton\n              id=\"3\"\n              changed={() => setSortBy(\"todayCases\")}\n              isSelected={sortBy === \"todayCases\" ? true : false}\n              label=\"New cases\"\n            />\n            <RadioButton\n              id=\"4\"\n              changed={() => setSortBy(\"todayDeaths\")}\n              isSelected={sortBy === \"todayDeaths\" ? true : false}\n              label=\"New deaths\"\n            />\n          </div>\n          <div className=\"area-data-sets\">\n            {data\n              .sort((a, b) => b[sortBy] - a[sortBy])\n              .slice(0, 12)\n              .map((d) => (\n                <div className=\"data-set\" key={d.country}>\n                  <div className=\"country-name vertical-inverted-title\">\n                    {d.country}\n                  </div>\n                  <div className=\"set-title\">Confirmed</div>\n                  <div className=\"confirmed-count numerical-data\">\n                    {d.cases.toLocaleString()}\n                  </div>\n                  <div className=\"smaller-numbers numerical-data\">\n                    (+{d.todayCases.toLocaleString()})\n                  </div>\n                  <div className=\"set-title\">Deaths</div>\n                  <div className=\"dead-count numerical-data\">{d.deaths}</div>\n                  <div className=\"smaller-numbers numerical-data\">\n                    (+{d.todayDeaths})\n                  </div>\n                  <div className=\"set-title\">Death Rate</div>\n                  <div className=\"current-dead-rate numerical-data\">\n                    {calPercentage(d.deaths, d.cases)}%\n                  </div>\n                </div>\n              ))}\n          </div>\n          <p className=\"footnote\">\n            Source: Johns Hopkins University Center for Systems Science and\n            Engineering (\n            <a href=\"https://github.com/NovelCOVID/API\">NovelCOVID / API</a>)\n          </p>\n        </>\n      )}\n    </>\n  );\n};\n\nconst FatalityRatioByAgeGroupInHubei = () => {\n  const data = [\n    { x: \"0-9\", y: 0.000094 },\n    { x: \"10-19\", y: 0.022 },\n    { x: \"20-29\", y: 0.091 },\n    { x: \"30-39\", y: 0.18 },\n    { x: \"40-49\", y: 0.4 },\n    { x: \"50-59\", y: 1.3 },\n    { x: \"60-69\", y: 4.6 },\n    { x: \"70-79\", y: 9.8 },\n    { x: \"80+\", y: 18 },\n  ];\n  return (\n    <>\n      <div className=\"chart-title\">\n        Fatality Ratio by Age Group in Hubei, China\n      </div>\n      <div className=\"bar-chart\">\n        <V.VictoryChart\n          domainPadding={{ x: 10 }}\n          padding={{ top: 15, bottom: 40, left: 50, right: 50 }}\n        >\n          <V.VictoryAxis\n            dependentAxis\n            style={{\n              grid: {\n                stroke: \"#f3f5f6\",\n                strokeWidth: 2,\n                strokeDasharray: \"15,15\",\n              },\n            }}\n          />\n          <V.VictoryBar\n            horizontal\n            barRatio={0.8}\n            data={data}\n            labels={({ datum }) => datum.y + \"%\"}\n          />\n          <V.VictoryAxis />\n        </V.VictoryChart>\n        <p className=\"footnote\">\n          Source: WHO;{\" \"}\n          <a href=\"https://www.medrxiv.org/content/10.1101/2020.03.04.20031104v1.full.pdf\">\n            \"ADJUSTED AGE-SPECIFIC CASE FATALITY RATIO DURING THE COVID-19\n            EPIDEMIC IN HUBEI, CHINA, JANUARY AND FEBRUARY 2020\" by Riou et al.\"\n          </a>\n        </p>\n      </div>\n    </>\n  );\n};\n\n//const FatalityRateInAnAreaLineChart = ({ area }) => {\n//const [data, setData] = useState({ areaName: \"\", statisticsData: [] });\n//const [isLoading, setIsLoading] = useState(true);\n//useEffect(() => {\n//async function getData() {\n//try {\n//setIsLoading(true);\n//const response = await fetch(`area_timeseries?area=${area}`);\n//const data = await response.json();\n//setData(data);\n//setIsLoading(false);\n//} catch (error) {\n//console.error(error);\n//}\n//}\n//getData();\n//}, [area]);\n//return (\n//<>\n//<div className=\"chart-title\">Fatality Rate in {data.areaName}</div>\n//{isLoading ? (\n//<LoadingSpinner />\n//) : (\n//<>\n//<SmallTable\n//items={[\n//{\n//heading: \"Confirmed\",\n//datum: data.statisticsData.slice(-1)[0].confirmedCount\n//},\n//{\n//heading: \"Deaths\",\n//datum: data.statisticsData.slice(-1)[0].deadCount\n//},\n//{\n//heading: \"Fatality Rate\",\n//datum: data.statisticsData.slice(-1)[0].deathRate + \"%\"\n//}\n//]}\n///>\n//<BarChart data={data.statisticsData} x=\"dateId\" y=\"deathRate\" />\n//<p className=\"footnote\">\n//Source: 丁香園（\n//<a href=\"https://github.com/BlankerL/DXY-COVID-19-Crawler\">\n//DXY-COVID-19-Crawler\n//</a>\n//）\n//</p>\n//</>\n//)}\n//</>\n//);\n//};\n\nconst DailyNewCasesWorldwideLineChart = () => {\n  const VictoryZoomVoronoiContainer = V.createContainer(\"zoom\", \"voronoi\");\n  const transformFn = useCallback((data) => {\n    if (data) {\n      let cases = transposeKeyValue(data.cases);\n      let deaths = transposeKeyValue(data.deaths);\n      let new_cases = calDailyDifference(cases);\n      let new_deaths = calDailyDifference(deaths);\n      return { cases, deaths, new_cases, new_deaths };\n    }\n  }, []);\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v3/covid-19/historical/all?lastdays=all\",\n    [],\n    transformFn\n  );\n  const axis_style = {\n    grid: {\n      stroke: \"#f3f5f6\",\n      strokeWidth: 2,\n      strokeDasharray: \"15,15\",\n    },\n  };\n  return (\n    <>\n      <div className=\"chart-title\">Daily New Cases Worldwide</div>\n      {isError && <div>Something went wrong</div>}\n      {isLoading ? (\n        <LoadingSpinner />\n      ) : (\n        <>\n          <SmallTable\n            items={[\n              {\n                heading: \"2 days ago\",\n                datum: data ? data.new_cases.slice(-2)[0].y : \"loading\",\n              },\n              {\n                heading: \"Yesterday\",\n                datum: data ? data.new_cases.slice(-1)[0].y : \"loading\",\n              },\n              {\n                heading: \"Growth Factor\",\n                datum: data\n                  ? (\n                      data.new_cases.slice(-1)[0].y /\n                      data.new_cases.slice(-2)[0].y\n                    ).toFixed(2)\n                  : \"loading\",\n              },\n            ]}\n          />\n          <div className=\"line-chart\">\n            <V.VictoryChart\n              containerComponent={\n                //<V.VictoryVoronoiContainer\n                //labels={({ datum }) => `${datum.x}: ${datum._y}`}\n                //labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n                ///>\n                //<V.VictoryZoomContainer\n                //allowZoom={false}\n                //zoomDomain={{ x: [10, 200] }}\n                ///>\n                <VictoryZoomVoronoiContainer\n                  labels={({ datum }) => `${datum.x}: ${datum._y}`}\n                  labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n                  zoomDomain={{\n                    x: [data.new_cases.length - 120, data.new_cases.length],\n                  }}\n                  zoomDimension=\"x\"\n                />\n              }\n              height={400}\n              padding={{ top: 30, bottom: 40, left: 70, right: 0 }}\n            >\n              <V.VictoryAxis dependentAxis fixLabelOverlap style={axis_style} />\n              <V.VictoryArea data={data.new_cases} />\n              <V.VictoryAxis fixLabelOverlap />\n            </V.VictoryChart>\n          </div>\n          <p className=\"footnote\">\n            Source: Johns Hopkins University Center for Systems Science and\n            Engineering (<a href=\"https://disease.sh/\">Novel COVID API</a>)\n          </p>\n        </>\n      )}\n    </>\n  );\n};\n\nconst WorldwideRecoveryProgressPieChart = () => {\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v2/all\",\n    []\n  );\n  const pieData = [\n    { x: \"Recovered\", y: data.recovered },\n    { x: \"Sick\", y: data.active },\n    { x: \"Deaths\", y: data.deaths },\n  ];\n  return (\n    <>\n      <div className=\"chart-title\">Worldwide Recovery Progress</div>\n      {isError && <div>Something went wrong</div>}\n      {isLoading ? (\n        <LoadingSpinner />\n      ) : (\n        <>\n          <SmallTable items={[{ heading: \"All cases\", datum: data.cases }]} />\n          <div className=\"pie-chart\">\n            <svg className=\"pie\" width={272} height={320}>\n              <V.VictoryLabel\n                textAnchor=\"middle\"\n                x={136}\n                y={160}\n                style={{ fontSize: 28, fill: \"#85b135\" }}\n                text={calPercentage(data.recovered, data.cases) + \"%\"}\n              />\n              <V.VictoryPie\n                colorScale={[\"#85b135\", \"#fb6361\", \"#073f5c\"]}\n                padding={{ left: 68, right: 68 }}\n                innerRadius={52}\n                width={272}\n                height={320}\n                standalone={false}\n                data={pieData}\n                labels={({ datum }) =>\n                  `${datum.x}:\\n${datum.y.toLocaleString()}\\n` +\n                  \"(\" +\n                  calPercentage(datum.y, data.cases) +\n                  \"%)\"\n                }\n              />\n            </svg>\n            <p className=\"footnote\">\n              Source: Johns Hopkins University Center for Systems Science and\n              Engineering (<a href=\"https://disease.sh/\">Novel COVID API</a>)\n            </p>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nexport {\n  AreasWithOutstandingCasesTable,\n  DailyLineChartInAnArea,\n  //ConfirmedCasesChinaVsWorldLineChart,\n  ConfirmedCasesInSelectedCountriesLineChart,\n  FatalityRatioByAgeGroupInHubei,\n  DailyNewCasesWorldwideLineChart,\n  WorldwideRecoveryProgressPieChart,\n};\n","import React from \"react\";\n\n// SMALL COMPONENTS / HELPER FUNCTIONS\nfunction getToday() {\n  var time = new Date();\n  var year = time.getFullYear();\n  var month = time.getMonth() + 1;\n  var date = time.getDate();\n  var formattedDate = year + \"/\" + month + \"/\" + date;\n  return formattedDate;\n}\n\nexport const AppTitle = () => {\n  return (\n    <div className=\"app-title\">\n      <h1>\n        Covid<span className=\"title-numerals\">-19</span> Dashboard\n      </h1>\n      <h2 className=\"title-date\">{getToday()}</h2>\n    </div>\n  );\n};\n","import React from \"react\";\n// import PropTypes from \"prop-types\";\nimport { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"Global\",\n      view_name: \"global\",\n      className: view === \"global\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"台灣版\",\n      view_name: \"taiwan\",\n      className: view === \"taiwan\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className=\"nav\">\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items, dataType, dataValue }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            <th>Total</th>\n            {/* {items.map((item) => ( */}\n            {/*   <th key={dataType(item)}>{dataType(item)}</th> */}\n            {/* ))} */}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td className=\"numerical-data\">\n              {items.reduce((acc, cur) => acc + cur.value, 0).toLocaleString()}\n            </td>\n            {/* {items.map((item, index) => ( */}\n            {/*   <td className=\"numerical-data\" key={index}> */}\n            {/*     {dataValue(item).toLocaleString()} */}\n            {/*   </td> */}\n            {/* ))} */}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React from \"react\";\n// import { select, transition, easeLinear } from \"d3\";\nexport const PieLabel = ({\n  pieLabelPosition,\n  dataValue,\n  d,\n  percentage,\n  className,\n  labelOffsetY = 18,\n}) => {\n  // const ref = useRef(null);\n  // useEffect(() => {\n  //   const textG = select(ref.current)\n  //     .append(\"text\")\n  //     .attr(\"x\", 0)\n  //     .attr(\"y\", 0)\n  //     .style(\"fill\", \"red\");\n  //   textG.enter().text(\"huh\");\n  // }, []);\n  return (\n    <>\n      <text\n        className={className}\n        transform={`translate(${pieLabelPosition})`}\n        textAnchor=\"middle\"\n        dominantBaseline=\"middle\"\n      >\n        <tspan className=\"num\" x=\"0\" dy={-labelOffsetY} fill=\"black\">\n          {percentage}%\n        </tspan>\n        <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n          {dataValue(d.data).toLocaleString()}\n        </tspan>\n      </text>\n      {/* <svg ref={ref.current} id=\"test\"></svg> */}\n    </>\n  );\n};\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { PieLabel } from \"./PieLabel.jsx\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorValue,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 2.2;\n      pieLabelPosition[1] *= 2.2;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <path fill={colorValue(d.data)} d={pieArc(d)} />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabelStroke}\n        />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabel}\n        />\n      </g>\n    );\n  });\n","import React from \"react\";\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">{children}</div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { arc, pie, scaleOrdinal } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../elements/CommonUIs\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width * 0.6;\nconst pieMargin = { top: 0, right: 20, bottom: 0, left: 0 };\nconst pieRadius = (width * 0.66) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\n\nconst circleRadius = 8;\nconst legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\n// // The chart's real height and width\nconst pieX = pieRadius + pieMargin.left;\nconst pieY = pieRadius + pieMargin.top;\nconst legendX = pieRadius * 2 + pieMargin.left + pieMargin.right;\nconst legendY = pieRadius - legendItemSpacing / 2;\n\nconst pieArc = arc().innerRadius(0).outerRadius(pieOuterMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\nconst colorValue = (d) => d.color;\n\nconst title = \"Worldwide Cases Overview\";\nconst ColorLegendLabel = \"Cases\";\n\nexport const OverviewPie = () => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  const pieData = [\n    {\n      case: \"Deaths\",\n      value: data.deaths,\n      color: \"#BD2D28\",\n    },\n    {\n      case: \"Recovered\",\n      value: data.recovered,\n      color: \"#0F8C79\",\n    },\n    {\n      case: \"Active\",\n      value: data.active,\n      color: \"#E3BA22\",\n    },\n  ];\n  const colorPie = pie().sort(null).value(dataValue);\n\n  const colorScale = scaleOrdinal()\n    .domain(pieData.map(dataType))\n    .range(pieData.map(colorValue));\n\n  const ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\n  const SourceCredit = () => (\n    <p className=\"footnote\">\n      Data source: Worldometers (\n      <a href=\"https://github.com/disease-sh/api\">disease.sh</a>)\n    </p>\n  );\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={pieData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieX},${pieY})`}>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {ColorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={circleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n      <Collapsible id={title}>\n        <p>\n          This chart gives a rough overview of COVID-19 pandemic currently\n          spreading around the world. The total number at the top left corner\n          shows a number of confirmed cases ever tested positive. Since not\n          everyone has been tested, this can only represent the cases we know so\n          far.\n        </p>\n        <p>\n          All tested positive cases are further divided into three categories as\n          shown in the pie chart: active, recovered, and deaths. The recovered\n          percentage is intended to give us an idea of how far we are from\n          global recovery. The \"clock\", however, can turn back when the virus is\n          spreading rapidly. Active cases represents the people still suffering\n          from the disease. Most active cases will recover, but some will not.\n          According to{\" \"}\n          <a href=\"https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html\">\n            an early report{\" \"}\n          </a>\n          by <i>the New York Times</i>, the fatality rate for those infected is\n          likely to be lower than 3%.\n        </p>\n        <SourceCredit />\n      </Collapsible>\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://disease.sh/v3/covid-19/all\";\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // console.log(data);\n\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((d) => {\n      if (isMounted) setData(d);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, timeParse } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv\";\n\nconst parseDay = timeParse(\"%Y-%m-%d\");\n\nconst transform = (rawData) => {\n  return rawData.map((d) => ({\n    date: parseDay(d.date),\n    newCases: +d.World,\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl).then((rawData) => {\n      if (isMounted) setData(transform(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG.call(xAxis);\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.markerLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { Delaunay } from \"d3-delaunay\";\nimport styles from \"./LineChart.module.css\";\nexport const VoronoiOverlay = ({\n  margin,\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  // console.log(data);\n  return useMemo(() => {\n    const points = data.map((d) => [\n      areaGenerator.x()(d),\n      areaGenerator.y()(d),\n    ]);\n    const delaunay = Delaunay.from(points);\n    const voronoi = delaunay.voronoi([\n      0,\n      0,\n      innerWidth + margin.right,\n      innerHeight,\n    ]);\n    return (\n      <g className={styles.voronoi}>\n        {points.map((point, i) => (\n          <path\n            key={i}\n            onPointerEnter={() => onHover(data[i])}\n            d={voronoi.renderCell(i)}\n          />\n        ))}\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover, margin.right]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  area,\n  timeFormat,\n  extent,\n  max,\n  format,\n  curveNatural,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { VoronoiOverlay } from \"./VoronoiOverlay\";\nimport styles from \"./LineChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.8;\nconst margin = { top: 20, right: 0, bottom: 40, left: 65 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%b, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %y\");\n\nconst yValue = (d) => d.newCases;\n// const yAxisLabel = \"New cases\";\n// const yAxisLabelOffset = 60;\nconst siFormat = format(\".2s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue);\n\nexport const LineChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState();\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is population, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, max(data, yValue)])\n        .range([innerHeight, 0])\n        .nice(),\n    [data, innerHeight]\n  );\n\n  const handleVoronoiHover = useCallback(setActiveData, [setActiveData]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0))\n        .curve(curveNatural),\n    [xScale, yScale]\n  );\n\n  const Tooltip = ({ activeData, className }) => (\n    <text className={className} textAnchor={\"end\"} x={0} y={-5}>\n      <tspan x=\"-10\" dy=\"0\" fontWeight=\"bold\">\n        {activeData.newCases.toLocaleString()}\n      </tspan>\n      <tspan x=\"-10\" dy=\"1.5em\">\n        {xTooltipFormat(activeData.date)}\n      </tspan>\n    </text>\n  );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${ */}\n          {/*     innerHeight / 2 */}\n          {/*   }) rotate(-90)`} */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.marks}>\n            <path d={areaGenerator(data)} />\n          </g>\n          {activeData ? (\n            <>\n              <g className={styles.marks}>\n                <path d={areaGenerator(data)} />\n              </g>\n              <XMarkerLine\n                value={activeData.date}\n                xScale={xScale}\n                innerHeight={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  className={styles.tooltipStroke}\n                />\n                <Tooltip activeData={activeData} className={styles.tooltip} />\n              </g>\n            </>\n          ) : null}\n          <VoronoiOverlay\n            margin={margin}\n            onHover={handleVoronoiHover}\n            data={data}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">{children}</div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { LineChart } from \"./LineChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\nconst title = \"Daily New Cases Worldwide\";\n\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    Data source: Center for Systems Science and Engineering (CSSE) at Johns\n    Hopkins University (\n    <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/jhu\">\n      Our Wolrd in Data\n    </a>\n    )\n  </p>\n);\n\nexport const CasesLineChart = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  // if (data) console.log(data);\n  const lastSevenDaysAvg = sumValuesInObject(data.slice(-7), \"newCases\") / 7;\n\n  const beforeSevenDaysAvg =\n    sumValuesInObject(data.slice(-14, -7), \"newCases\") / 7;\n\n  const tableData = [\n    {\n      heading: \"Average previous week\",\n      value: Math.round(beforeSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"Average this week\",\n      value: Math.round(lastSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"Growth factor\",\n      value: (lastSevenDaysAvg / beforeSevenDaysAvg).toFixed(2),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <LineChart data={data} />\n      <Collapsible id={title}>\n        <p>\n          This chart is intended to show how fast the viruses are spreading over\n          time. Each data point represents the number of people tested positive\n          on that day, therefore \"new cases\".\n        </p>\n        <p>\n          During a contagious disease's growing period, an infected person is\n          likely to spread the virus to more than one healthy person, so the\n          latter days will see more new cases than the previous days. For\n          example, if we have 10 new cases today but only 5 new cases yesterday,\n          it can mean each of those 5 people passed the disease to 2 more people\n          during the day. So, the \"2\" is the \"growth factor\" listed here above\n          the chart. Only when the growth factor constantly goes below 1, have\n          we the chance to see an end to the pandemic.\n        </p>\n        <p>\n          Since most societies work in a weekly basis, we can see the data\n          regularly fluctuates inside of a week. To avoid misintepretation, this\n          chart calculates the growth factor with weekly averages.\n        </p>\n        <SourceCredit />\n      </Collapsible>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickOffset = 3,\n  tickCount = 6,\n}) =>\n  // Label and reference lines for x scale\n  xScale.ticks(tickCount).map((tickValue) => (\n    // Each tick goes to the position indicating its value\n    <g\n      className={styles.tick}\n      key={tickValue}\n      transform={`translate(${xScale(tickValue)}, 0)`}\n    >\n      {/* the values of x1, x2, y1 are 0, which is default */}\n      <line y2={innerHeight} />\n      <text\n        y={innerHeight + tickOffset}\n        dy=\"0.71em\"\n        style={{ textAnchor: \"middle\" }}\n      >\n        {tickFormat(tickValue)}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisLeft = ({\n  countryScale,\n  ageScale,\n  width,\n  margin,\n  tickOffset = 3,\n}) =>\n  ageScale.domain().map((tickValue) => (\n    <g\n      key={tickValue}\n      className={styles.tick}\n      transform={`translate(0,${\n        ageScale(tickValue) + ageScale.bandwidth() / 2\n      })`}\n    >\n      <rect\n        x={-margin.left}\n        y={-ageScale.bandwidth() / 2 - 4}\n        width={width}\n        height={ageScale.bandwidth() + 8}\n      />\n      <text\n        dy=\".32em\"\n        x={-margin.left + tickOffset}\n        style={{ fontSize: \"1.1em\", fontWeight: \"bold\", textAnchor: \"start\" }}\n      >\n        {tickValue}\n      </text>\n      {countryScale.domain().map((tickValue) => (\n        <text\n          key={tickValue}\n          dy=\".72em\"\n          x={-tickOffset}\n          y={countryScale(tickValue) - ageScale.bandwidth() / 2}\n          style={{ textAnchor: \"end\", dominantBaseline: \"middle\" }}\n        >\n          {tickValue}\n        </text>\n      ))}\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const Marks = ({\n  data,\n  ageGroups,\n  ageScale,\n  xScale,\n  countryScale,\n  countryValue,\n  colorScale,\n  tooltipFormat,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  data.map((d) =>\n    ageGroups.map((key) => (\n      <g\n        key={countryValue(d) + key}\n        className={styles.marks}\n        onMouseEnter={() => onHover(countryValue(d))}\n        onMouseLeave={() => onHover(null)}\n        opacity={\n          hoveredValue && hoveredValue !== countryValue(d) ? fadeOpacity : 1\n        }\n      >\n        <rect\n          x={0}\n          y={ageScale(key) + countryScale(countryValue(d))}\n          width={xScale(d[key])}\n          height={countryScale.bandwidth()}\n          fill={colorScale(countryValue(d))}\n        >\n          <title>{`${key}: ${tooltipFormat(d[key])}`}</title>\n        </rect>\n        <text\n          x={xScale(d[key]) + 3}\n          y={ageScale(key) + countryScale(countryValue(d))}\n          dy=\".68em\"\n          style={{ textAnchor: \"start\", dominantBaseline: \"middle\" }}\n        >\n          {tooltipFormat(d[key])}\n        </text>\n      </g>\n    ))\n  );\n","import React, { useState, useMemo } from \"react\";\nimport { scaleBand, scaleLinear, scaleOrdinal, max, schemeTableau10 } from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { Marks } from \"./Marks\";\n// import { ColorLegend } from \"./ColorLegend\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.9 : width * 2;\nconst margin = { top: 20, right: 40, bottom: 30, left: 170 };\n\nconst countryValue = (d) => d.Country;\nconst xAxisTickFormat = (tickValue) => tickValue + \"%\";\n\n// The chart's real height and width\nconst innerHeight = height - margin.top - margin.bottom;\nconst innerWidth = width - margin.left - margin.right;\n\n// Legend settings\n// const legendX = width * 0.7;\n// const legendY = innerHeight / 2;\n// const ColorLegendLabel = \"Countries\";\n\n// const circleRadius = 8;\n// const legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\nexport const BarChart = ({ data }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const ageGroups = data.columns.slice(1);\n\n  // X axis is percentage of deaths, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleLinear()\n        // Domain is an array of actual data, starts from 0 to the max of all countries\n        // d3.max(iterable[, accessor])\n        .domain([0, max(data, (d) => max(ageGroups, (key) => d[key]))])\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [ageGroups, data]\n  );\n\n  const ageScale = useMemo(\n    () =>\n      scaleBand().domain(ageGroups).range([0, innerHeight]).paddingInner(0.15),\n    [ageGroups]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const countryScale = useMemo(\n    () =>\n      scaleBand()\n        .domain(data.map(countryValue))\n        .range([ageScale.bandwidth(), 0])\n        .paddingInner(0.1),\n    [ageScale, data]\n  );\n\n  const colorScale = useMemo(\n    () => scaleOrdinal().domain(data.map(countryValue)).range(schemeTableau10),\n    [data]\n  );\n\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={8}\n          />\n          <AxisLeft\n            countryScale={countryScale}\n            ageScale={ageScale}\n            margin={margin}\n            width={width}\n          />\n          <Marks\n            data={data}\n            ageScale={ageScale}\n            ageGroups={ageGroups}\n            xScale={xScale}\n            countryScale={countryScale}\n            countryValue={countryValue}\n            colorScale={colorScale}\n            tooltipFormat={xAxisTickFormat}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        {/* <g transform={`translate(${legendX}, ${legendY})`}> */}\n        {/*   <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n        {/*     {ColorLegendLabel} */}\n        {/*   </text> */}\n        {/*   <ColorLegend */}\n        {/*     colorScale={colorScale} */}\n        {/*     tickSpacing={legendItemSpacing} */}\n        {/*     tickSize={circleRadius} */}\n        {/*     tickTextOffset={16} */}\n        {/*     onHover={setHoveredValue} */}\n        {/*     hoveredValue={hoveredValue} */}\n        {/*     fadeOpacity={fadeOpacity} */}\n        {/*   /> */}\n        {/* </g> */}\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst SourceCredit = () => (\n  <>\n    <p className=\"footnote\">\n      Data sources: Chinese Center for Disease Control and Prevention (CDC);\n      Spanish Ministry of Health; Korea Centers for Disease Control and\n      Prevention (KCDC); Onder G, Rezza G, Brusaferro S. Case-Fatality Rate and\n      Characteristics of Patients Dying in Relation to COVID-19 in Italy. JAMA.\n      (This is a remake of{\" \"}\n      <a href=\"https://ourworldindata.org/mortality-risk-covid#case-fatality-rate-of-covid-19-by-age\">\n        the same chart\n      </a>{\" \"}\n      by Hannah Ritchie and Max Roser published in OurWorldinData.org)\n    </p>\n    <p className=\"footnote\">\n      Licensed under CC-BY by the authors Hannah Ritchie and Max Roser.\n    </p>\n  </>\n);\n\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            This chart gives us a rough idea of which age groups are most at\n            risk to COVID-19. If we know which groups are most likely to die\n            from the disease, precautions and resouces like vaccines can be\n            directed to the ones who need them most. According to this chart,\n            the elderly are most likely to die from COVID-19.\n          </p>\n          <p>\n            The data presented in the chart are calculated from the number of\n            deaths divided by the number of confirmed cases in each age group.\n            Since COVID-19 is still an ongoing pandemic, these numbers can\n            change over time and conditions. There are two main limitations to\n            keep in mind when interpreting this chart:\n          </p>\n          <ol>\n            <li>\n              Since not everyone is tested within the population, we do not know\n              the real number of infected cases.\n            </li>\n            <li>\n              Some infected individuals are still alive at the time of\n              recording, but will eventually die from the disease.\n            </li>\n          </ol>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { BarChart } from \"./BarChart\";\nimport { LoadSpinner } from \"../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const CaseFatalityRatesByAgeBarChart = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n\n  return (\n    <>\n      <ChartTitle title=\"Case fatality rates by age\" />\n      <BarChart data={data} />\n      <Collapsible id=\"caseFatalityRetes\" />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/mgeorgetw/965bfe365ab8e70e2ee34c9a5d4d594a/raw/COVID19CaseFatalityRatesByAge.csv\";\n\n// Data: Case Fatality Rates By Age\n// https://ourworldindata.org/mortality-risk-covid#case-fatality-rate-of-covid-19-by-age\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((data) => {\n      if (isMounted) setData(data);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport \"./App.css\";\nimport { cookieExists, setCookie, findCookie } from \"./utils/useCookies\";\n\nimport { TaiwanView } from \"./TaiwanView/index\";\nimport * as Charts from \"./Charts.js\";\nimport { Card, Footer } from \"./elements/CommonUIs\";\nimport { AppTitle } from \"./elements/AppTitle\";\nimport { NavBar } from \"./elements/NavBar\";\nimport { OverviewPie } from \"./OverviewPie/index\";\nimport { CasesLineChart } from \"./CasesLineChart/index\";\nimport { CaseFatalityRatesByAgeBarChart } from \"./CaseFatalityRatesByAgeBarChart/index\";\n\n// Pull to refresh\nimport PullToRefresh from \"pulltorefreshjs\";\nimport { faSyncAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst area = \"Taiwan\";\n\nconst GlobalView = () => (\n  <ul className=\"flex-card-list\">\n    <Card>\n      <OverviewPie />\n    </Card>\n    <Card>\n      <CasesLineChart />\n    </Card>\n    {/* <Card> */}\n    {/*   <Charts.WorldwideRecoveryProgressPieChart /> */}\n    {/* </Card> */}\n    {/* <Card> */}\n    {/*   <Charts.DailyNewCasesWorldwideLineChart /> */}\n    {/* </Card> */}\n    <Card>\n      <Charts.AreasWithOutstandingCasesTable />\n    </Card>\n    <Card>\n      <Charts.DailyLineChartInAnArea area={area} chart_type=\"newCases\" />\n    </Card>\n    <Card>\n      <Charts.DailyLineChartInAnArea area={area} chart_type=\"newDeaths\" />\n    </Card>\n    {/* <Card> */}\n    {/*   <Charts.ConfirmedCasesInSelectedCountriesLineChart /> */}\n    {/* </Card> */}\n    <Card>\n      <CaseFatalityRatesByAgeBarChart />\n    </Card>\n  </ul>\n);\n\nconst App = () => {\n  const [view, setView] = useState(\"global\");\n  useEffect(() => {\n    // Checks if there's a cookie for view, if not, set it to Indices View\n    if (cookieExists(\"view\")) {\n      // Set view according to cookie, if exists\n      setView(findCookie(\"view\"));\n    } else {\n      setCookie(\"view\", \"global\");\n    }\n\n    PullToRefresh.init({\n      mainElement: \"body\",\n      onRefresh() {\n        window.location.reload();\n      },\n      iconArrow: ReactDOMServer.renderToString(\n        <FontAwesomeIcon icon={faSyncAlt} />\n      ),\n      iconRefreshing: ReactDOMServer.renderToString(\n        <FontAwesomeIcon icon={faSyncAlt} spin={true} />\n      ),\n    });\n    return () => {\n      PullToRefresh.destroyAll();\n    };\n  }, []);\n  return (\n    <div className=\"App\">\n      <AppTitle />\n      <NavBar view={view} setView={setView} />\n      {view === \"global\" ? <GlobalView /> : <TaiwanView />}\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"react-app-polyfill/ie9\";\nimport \"react-app-polyfill/stable\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./fonts/NotoSansMono-CondensedBold.ttf\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart__2EFDR\",\"pieLabel\":\"OverviewPie_pieLabel__uPT91\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__1SyMy\",\"legendLabel\":\"OverviewPie_legendLabel__l9Ve0\",\"legend\":\"OverviewPie_legend__2UIkD\",\"hideshow\":\"OverviewPie_hideshow__3BMBg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart__15fCk\",\"pieLabel\":\"OverviewPie_pieLabel__dryXg\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__uz8Cz\",\"legendLabel\":\"OverviewPie_legendLabel__2ffI6\",\"legend\":\"OverviewPie_legend__Svigk\",\"hideshow\":\"OverviewPie_hideshow__8JcRd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart___bMnr\",\"pieLabel\":\"OverviewPie_pieLabel__3LAAf\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__2jZQ6\",\"legendLabel\":\"OverviewPie_legendLabel__3jHkC\",\"legend\":\"OverviewPie_legend__3kb26\",\"hideshow\":\"OverviewPie_hideshow__1f2ru\"};"],"sourceRoot":""}