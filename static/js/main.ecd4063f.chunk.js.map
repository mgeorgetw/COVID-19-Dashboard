{"version":3,"sources":["OverviewPie/OverviewPie.module.css","CaseFatalityRatesByAgeBarChart/BarChart.module.css","utils/useCookies.js","TaiwanView/TaiwanVaccinationArea/AreaChart.module.css","TaiwanView/TaiwanMobilityLine/LineChart.module.css","TaiwanView/TaiwanNewCasesArea/AreaChart.module.css","TaiwanView/CasesByCountiesArea/AreaChart.module.css","CasesLineChart/LineChart.module.css","TaiwanView/CFRByGroupsBar/BarChart.module.css","TaiwanView/TaiwanOverviewPie/OverviewPie.module.css","TaiwanView/TaiwanTestsOverviewPie/OverviewPie.module.css","TaiwanView/ChoroplethMap/ChoroplethMap.module.css","fonts/NotoSansMono-CondensedBold.ttf","elements/CommonUIs.js","TaiwanView/TaiwanOverviewPie/useCategories.jsx","TaiwanView/TaiwanOverviewPie/NavBar.js","TaiwanView/TaiwanOverviewPie/ColorLegend.jsx","TaiwanView/TaiwanOverviewPie/DataTable.jsx","TaiwanView/TaiwanOverviewPie/PieChart.jsx","TaiwanView/TaiwanOverviewPie/PieLabels.jsx","TaiwanView/TaiwanOverviewPie/PieTableLegendContainer.jsx","TaiwanView/TaiwanOverviewPie/Collapsible.jsx","TaiwanView/TaiwanOverviewPie/index.jsx","TaiwanView/TaiwanOverviewPie/useData.jsx","TaiwanView/TaiwanTestsOverviewPie/useData.jsx","TaiwanView/TaiwanTestsOverviewPie/Collapsible.jsx","TaiwanView/TaiwanTestsOverviewPie/ColorLegend.jsx","TaiwanView/TaiwanTestsOverviewPie/DataTable.jsx","TaiwanView/TaiwanTestsOverviewPie/PieChart.jsx","TaiwanView/TaiwanTestsOverviewPie/PieLabels.jsx","TaiwanView/TaiwanTestsOverviewPie/PieTableLegendContainer.jsx","TaiwanView/TaiwanTestsOverviewPie/index.jsx","TaiwanView/TaiwanTestsOverviewPie/useTests.jsx","TaiwanView/TaiwanNewCasesArea/useData.js","TaiwanView/TaiwanNewCasesArea/NavBar.jsx","TaiwanView/TaiwanNewCasesArea/ChartTitle.jsx","TaiwanView/TaiwanNewCasesArea/DataTable.jsx","TaiwanView/TaiwanNewCasesArea/AxisBottom.js","TaiwanView/TaiwanNewCasesArea/AxisLeft.js","TaiwanView/TaiwanNewCasesArea/XMarkerLine.js","TaiwanView/TaiwanNewCasesArea/CursorLine.js","TaiwanView/TaiwanNewCasesArea/RectOverlay.js","TaiwanView/TaiwanNewCasesArea/AreaChart.jsx","TaiwanView/TaiwanNewCasesArea/Collapsible.jsx","TaiwanView/TaiwanNewCasesArea/index.js","TaiwanView/TaiwanVaccinationArea/ChartTitle.jsx","TaiwanView/TaiwanVaccinationArea/DataTable.jsx","TaiwanView/TaiwanVaccinationArea/AxisBottom.js","TaiwanView/TaiwanVaccinationArea/AxisLeft.js","TaiwanView/TaiwanVaccinationArea/CursorLine.js","TaiwanView/TaiwanVaccinationArea/YMarkerLine.js","TaiwanView/TaiwanVaccinationArea/XMarkerLine.js","TaiwanView/TaiwanVaccinationArea/RectOverlay.js","TaiwanView/TaiwanVaccinationArea/ColorLegend.jsx","TaiwanView/TaiwanVaccinationArea/AreaChart.jsx","TaiwanView/TaiwanVaccinationArea/Collapsible.jsx","TaiwanView/TaiwanVaccinationArea/index.js","TaiwanView/TaiwanVaccinationArea/useData.js","TaiwanView/ChoroplethMap/useData.js","TaiwanView/ChoroplethMap/AxisBottom.js","TaiwanView/ChoroplethMap/TaiwanMarks.js","TaiwanView/ChoroplethMap/Map.js","TaiwanView/ChoroplethMap/Collapsible.jsx","TaiwanView/ChoroplethMap/index.js","TaiwanView/ChoroplethMap/useTaiwanAtlas.js","TaiwanView/CFRByGroupsBar/useDeaths.jsx","TaiwanView/CFRByGroupsBar/useInfected.jsx","TaiwanView/CFRByGroupsBar/NavBar.js","TaiwanView/CFRByGroupsBar/AxisBottom.js","TaiwanView/CFRByGroupsBar/AxisLeft.js","TaiwanView/CFRByGroupsBar/Marks.js","TaiwanView/CFRByGroupsBar/BarChart.jsx","TaiwanView/CFRByGroupsBar/Collapsible.jsx","TaiwanView/CFRByGroupsBar/index.js","TaiwanView/CasesByCountiesArea/useData.js","TaiwanView/CasesByCountiesArea/ChartTitle.jsx","TaiwanView/CasesByCountiesArea/DropdownMenu.jsx","TaiwanView/CasesByCountiesArea/AxisBottom.js","TaiwanView/CasesByCountiesArea/AxisLeft.js","TaiwanView/CasesByCountiesArea/CursorLine.js","TaiwanView/CasesByCountiesArea/XMarkerLine.js","TaiwanView/CasesByCountiesArea/PathOverlay.js","TaiwanView/CasesByCountiesArea/Tooltip.jsx","TaiwanView/CasesByCountiesArea/AreaChart.jsx","TaiwanView/CasesByCountiesArea/Collapsible.jsx","TaiwanView/CasesByCountiesArea/index.js","TaiwanView/TaiwanMobilityLine/useData.js","TaiwanView/TaiwanMobilityLine/ChartTitle.jsx","TaiwanView/TaiwanMobilityLine/DropdownMenu.jsx","TaiwanView/TaiwanMobilityLine/DataTable.jsx","TaiwanView/TaiwanMobilityLine/AxisBottom.js","TaiwanView/TaiwanMobilityLine/AxisLeft.js","TaiwanView/TaiwanMobilityLine/YMarkerLine.js","TaiwanView/TaiwanMobilityLine/XMarkerLine.js","TaiwanView/TaiwanMobilityLine/ColorLegend.jsx","TaiwanView/TaiwanMobilityLine/LineChart.jsx","TaiwanView/TaiwanMobilityLine/Collapsible.jsx","TaiwanView/TaiwanMobilityLine/index.js","TaiwanView/TaiwanMobilityLine/useRegions.js","TaiwanView/index.js","Charts.js","elements/AppTitle.js","elements/NavBar.js","OverviewPie/ColorLegend.jsx","OverviewPie/DataTable.jsx","OverviewPie/PieLabel.jsx","OverviewPie/PieChart.jsx","OverviewPie/Collapsible.jsx","OverviewPie/index.jsx","OverviewPie/useData.jsx","CasesLineChart/useData.js","CasesLineChart/ChartTitle.jsx","CasesLineChart/DataTable.jsx","CasesLineChart/AxisBottom.js","CasesLineChart/AxisLeft.js","CasesLineChart/XMarkerLine.js","CasesLineChart/RectOverlay.js","CasesLineChart/LineChart.jsx","CasesLineChart/Collapsible.jsx","CasesLineChart/index.js","CaseFatalityRatesByAgeBarChart/AxisBottom.js","CaseFatalityRatesByAgeBarChart/AxisLeft.js","CaseFatalityRatesByAgeBarChart/Marks.js","CaseFatalityRatesByAgeBarChart/BarChart.jsx","CaseFatalityRatesByAgeBarChart/Collapsible.jsx","CaseFatalityRatesByAgeBarChart/index.js","CaseFatalityRatesByAgeBarChart/useData.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","findCookie","key","document","cookie","split","find","row","startsWith","setCookie","value","newCookie","cookieExists","some","item","trim","LoadSpinner","className","Card","children","Footer","href","useCategories","useState","data","setData","useEffect","isMounted","json","CORS","then","rawData","map","d","date","Date","a01","county","a02","area","a03","gender","a04","foreign","a05","ageGroup","a06","transformData","NavBar","view","setView","buttons","name","view_name","styles","nav","button","ViewButton","onClick","e","preventDefault","type","ColorLegend","colorScale","tickSpacing","tickSize","tickTextOffset","onHover","hoveredValue","fadeOpacity","domain","domainValue","index","legend","transform","onMouseEnter","onMouseLeave","opacity","fill","r","dy","x","DataTable","items","reduce","acc","cur","toLocaleString","PieChart","pieData","pieArc","colorPie","dataType","pieChart","case","PieLabels","dataValue","labelOffsetY","pieLabelPosition","centroid","endAngle","startAngle","dataPercentage","sum","toFixed","pieLabelStroke","textAnchor","dominantBaseline","pieLabel","width","window","innerWidth","height","pieRadius","Math","min","pieOuterMargin","pieInnerMargin","legendX","arc","innerRadius","outerRadius","PieTableLegendContainer","pieCenterLabel","setHoveredValue","useMemo","Object","keys","legendY","length","pie","sort","scaleOrdinal","range","schemeTableau10","viewBox","preserveAspectRatio","fontSize","fontWeight","legendLabel","y","SourceCredit","Collapsible","id","htmlFor","title","ChartTitle","countGroups","array","group","uniqueGroups","Array","from","Set","obj","groupObj","forEach","g","counter","TaiwanOverviewPie","viewData","useData","categoriesData","active","deaths","解除隔離","recovered","病中","死亡","oriGroups","replaceAll","convertStringToNumber","confirmed","excludedYesterday","confirmedYesterday","testsYesterday","tests","excluded","colorValue","legendItemSpacing","color","testsData","tableData","TaiwanTestsOverviewPie","peopleTested","useTests","parseDay","timeParse","api","csv","newCases","Taiwan","heading","AxisBottom","xScale","innerHeight","tickFormat","tickCount","tickOffset","ref","useRef","xAxisG","select","current","xAxis","axisBottom","ticks","tickPadding","call","selectAll","style","attr","tick","AxisLeft","yScale","yAxisG","yAxis","axisLeft","XMarkerLine","label","markerLineX","markerLineY2","markerLine","strokeDasharray","x1","y1","x2","y2","markerLineLabelStroke","writingMode","markerLineLabel","CursorLine","cursorLine","RectOverlay","areaGenerator","points","captureArea","onTouchStart","event","bisectCenter","pointer","onPointerMove","onMouseMove","margin","xValue","xAxisTickFormat","timeFormat","xTooltipFormat","yValue","siFormat","format","yAxisTickFormat","tickValue","AreaChart","activeData","setActiveData","scaleTime","extent","nice","scaleLinear","max","handleVoronoiHover","useCallback","y0","Tooltip","marks","dataPoint","tooltipStroke","tooltip","sumValuesInObject","prev","TaiwanNewCasesArea","filteredData","filter","valueOf","sevenDayAvg","slice","prevSevenDayAvg","round","YMarkerLine","labelOffset","markerLineY","markerLineX2","legendStroke","people_vaccinated","yValue2","people_fully_vaccinated","replace","taiwanPopulation","legendCircleRadius","handleHover","areaGenerator2","scaleValue","position","primary","secondary","TaiwanVaccinationArea","autoType","prevVaccinated","prevFullyVaccinated","prevTotal","total_vaccinations","offset","stopColor","TaiwanMarks","atlas","counties","compBorders","interiors","handlePointerMove","path","geoPath","features","feature","i","properties","COUNTYNAME","viewBoxWidth","legendWidth","legendPadding","Slider","selected","handleChange","sliderContainer","slider","indexOf","onChange","target","Map","selectedDate","setSelectedDate","setPoints","dataFilteredByAreas","allDates","reverse","heatmapData","dateString","縣市別","累計確診人數","區域","scaleSequential","interpolateGreys","ChoroplethMap","taiwanAtlas","topology","objects","nation","towns","mesh","a","b","useTaiwanAtlas","useDeaths","transformedData","chronic","deathsByGender","deathsByAge","sortedDeathsByAge","age","useInfected","infectedByGender","infectedByAge","sortedInfectedByAge","bandwidth","Marks","tooltipFormat","tooltipOffset","stroke","strokeWidth","top","right","bottom","left","CFR","labelFormat","BarChart","scaleBand","paddingInner","CFRByGroupsBar","deathsData","infectedData","infected","dropdownItems","DropdownMenu","chosen","setChosen","handleTypeHover","handleCursorHover","setItems","currentTarget","PathOverlay","formatDate","stackedData","t","interpolateViridis","onPointerEnter","CasesByCountiesArea","layer","layerGroupedData","layers","splice","dataArray","groupedData","dailyCountiesData","get","新增確診人數","push","stack","stackOffsetWiggle","order","stackOrderAscending","region","setLoading","driving","transit","walking","subregion_and_city","LineChart","schemeCategory10","lineGenerator","line","yValue1","lineGenerator2","lineGenerator3","yValue3","axisLabel","TaiwanMobilityLine","loading","regions","useRegions","subregions","toLocaleDateString","TaiwanView","CheckError","response","ok","Error","statusText","transposeKeyValue","entries","calDailyDifference","calPercentage","numerator","denominator","Number","useDataApi","initialUrl","initialData","transformFn","url","setUrl","isLoading","setIsLoading","isError","setIsError","fetch","console","error","fetchData","CountriesDropDownMenu","province","country","containerComponent","labels","datum","_y","labelComponent","constrainToVisibleArea","padding","fixLabelOverlap","dependentAxis","grid","LoadingSpinner","RadioButton","props","changed","checked","isSelected","SmallTable","DailyLineChartInAnArea","chart_type","lineData","setLineData","CHART_TYPES","newDeaths","deathRate","area_name","found","cases","timeline","new_cases","new_deaths","death_rate","getSTItems","AreasWithOutstandingCasesTable","sortBy","setSortBy","todayCases","todayDeaths","getToday","time","getFullYear","getMonth","getDate","AppTitle","PieLabel","percentage","OverviewPie","World","curve","curveNatural","CasesLineChart","lastSevenDaysAvg","beforeSevenDaysAvg","countryScale","ageScale","ageGroups","countryValue","Country","columns","CaseFatalityRatesByAgeBarChart","GlobalView","App","PullToRefresh","init","mainElement","onRefresh","location","reload","iconArrow","ReactDOMServer","renderToString","icon","faSyncAlt","iconRefreshing","spin","destroyAll","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.ecd4063f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart___bMnr\",\"pieLabel\":\"OverviewPie_pieLabel__3LAAf\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__2jZQ6\",\"legendLabel\":\"OverviewPie_legendLabel__3jHkC\",\"legend\":\"OverviewPie_legend__3kb26\",\"hideshow\":\"OverviewPie_hideshow__1f2ru\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"BarChart_axisLabel__3i3d5\",\"marks\":\"BarChart_marks__3Qb-J\",\"tick\":\"BarChart_tick__1vAYC\",\"legendLabel\":\"BarChart_legendLabel__Y4Crq\",\"legend\":\"BarChart_legend__2XTVP\"};","const findCookie = key => {\n  return document.cookie\n    .split(\"; \")\n    .find(row => row.startsWith(`${key}=`))\n    .split(\"=\")[1];\n};\n\nconst setCookie = (key, value) => {\n  let newCookie = `${key}=${value}`;\n  newCookie += \";max-age=604800;SameSite=Lax\";\n  document.cookie = newCookie;\n};\n\nconst cookieExists = key => {\n  if (\n    document.cookie.split(\";\").some(item => item.trim().startsWith(`${key}=`))\n  ) {\n    return true;\n  }\n  return false;\n};\n\nmodule.exports = {\n  findCookie,\n  setCookie,\n  cookieExists\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"AreaChart_axisLabel__2fPGs\",\"primary\":\"AreaChart_primary__1hZ-8\",\"secondary\":\"AreaChart_secondary__1Twap\",\"tick\":\"AreaChart_tick__3FpEN\",\"markerLine\":\"AreaChart_markerLine__xijer\",\"markerLineLabel\":\"AreaChart_markerLineLabel__3_cqB\",\"markerLineLabelStroke\":\"AreaChart_markerLineLabelStroke__KZmM1\",\"cursorLine\":\"AreaChart_cursorLine__2v8r_\",\"captureArea\":\"AreaChart_captureArea__2JADi\",\"dataPoint\":\"AreaChart_dataPoint__3WLiC\",\"tooltip\":\"AreaChart_tooltip__hteRd\",\"tooltipStroke\":\"AreaChart_tooltipStroke__zx4Qc\",\"legend\":\"AreaChart_legend__zjzU7\",\"legendStroke\":\"AreaChart_legendStroke__1X5we\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"LineChart_axisLabel__1LkT5\",\"line\":\"LineChart_line__2oRKE\",\"tick\":\"LineChart_tick__1oFx8\",\"markerLine\":\"LineChart_markerLine__3KKE9\",\"markerLineLabel\":\"LineChart_markerLineLabel__gajax\",\"markerLineLabelStroke\":\"LineChart_markerLineLabelStroke__5C0q5\",\"cursorLine\":\"LineChart_cursorLine__j_nVV\",\"captureArea\":\"LineChart_captureArea__1tieL\",\"dataPoint\":\"LineChart_dataPoint__1z2Q2\",\"tooltip\":\"LineChart_tooltip__ewJfn\",\"tooltipStroke\":\"LineChart_tooltipStroke__3Y4Wg\",\"legend\":\"LineChart_legend__6gwnu\",\"legendStroke\":\"LineChart_legendStroke__1EVqV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"AreaChart_axisLabel__5XHsT\",\"marks\":\"AreaChart_marks__2G7MT\",\"tick\":\"AreaChart_tick__3MRek\",\"markerLine\":\"AreaChart_markerLine__36MSZ\",\"markerLineLabel\":\"AreaChart_markerLineLabel__36Kxd\",\"markerLineLabelStroke\":\"AreaChart_markerLineLabelStroke__2LZ7n\",\"cursorLine\":\"AreaChart_cursorLine__RJ2aZ\",\"captureArea\":\"AreaChart_captureArea__2bdw1\",\"dataPoint\":\"AreaChart_dataPoint__3YTf0\",\"tooltip\":\"AreaChart_tooltip__3k8Kw\",\"tooltipStroke\":\"AreaChart_tooltipStroke__wO-u4\",\"nav\":\"AreaChart_nav__1qzG6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"AreaChart_axisLabel__1IBFP\",\"areaLabel\":\"AreaChart_areaLabel__xitdM\",\"primary\":\"AreaChart_primary__S1qiG\",\"secondary\":\"AreaChart_secondary__-g2kW\",\"tick\":\"AreaChart_tick__1WyOy\",\"markerLine\":\"AreaChart_markerLine__X_jjp\",\"markerLineLabel\":\"AreaChart_markerLineLabel__3EMdD\",\"markerLineLabelStroke\":\"AreaChart_markerLineLabelStroke__1OP6q\",\"cursorLine\":\"AreaChart_cursorLine__H6QT-\",\"captureArea\":\"AreaChart_captureArea__17Aig\",\"dataPoint\":\"AreaChart_dataPoint__JA3KJ\",\"tooltip\":\"AreaChart_tooltip__2qVCW\",\"tooltipStroke\":\"AreaChart_tooltipStroke__1ZPoE\",\"legend\":\"AreaChart_legend__1vI5n\",\"legendStroke\":\"AreaChart_legendStroke__1VAM9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"LineChart_axisLabel__2_tFA\",\"marks\":\"LineChart_marks__26M2D\",\"tick\":\"LineChart_tick__3yb08\",\"markerLine\":\"LineChart_markerLine__22F4j\",\"voronoi\":\"LineChart_voronoi__2Oz49\",\"captureArea\":\"LineChart_captureArea__16mNX\",\"dataPoint\":\"LineChart_dataPoint__g039n\",\"tooltip\":\"LineChart_tooltip__11-D6\",\"tooltipStroke\":\"LineChart_tooltipStroke__3IHSg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"axisLabel\":\"BarChart_axisLabel__2-9Bw\",\"marks\":\"BarChart_marks__yHRyn\",\"tooltip\":\"BarChart_tooltip__3jn8Q\",\"tooltipStroke\":\"BarChart_tooltipStroke__2ytli\",\"tick\":\"BarChart_tick__3VW2r\",\"legendLabel\":\"BarChart_legendLabel__1fB-B\",\"legend\":\"BarChart_legend__VJ36v\",\"nav\":\"BarChart_nav__1Seek\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart__2EFDR\",\"pieLabel\":\"OverviewPie_pieLabel__uPT91\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__1SyMy\",\"legendLabel\":\"OverviewPie_legendLabel__l9Ve0\",\"legend\":\"OverviewPie_legend__2UIkD\",\"nav\":\"OverviewPie_nav__1vWZo\",\"hideshow\":\"OverviewPie_hideshow__3BMBg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pieChart\":\"OverviewPie_pieChart__15fCk\",\"pieLabel\":\"OverviewPie_pieLabel__dryXg\",\"pieLabelStroke\":\"OverviewPie_pieLabelStroke__uz8Cz\",\"legendLabel\":\"OverviewPie_legendLabel__2ffI6\",\"legend\":\"OverviewPie_legend__Svigk\",\"hideshow\":\"OverviewPie_hideshow__8JcRd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"marks\":\"ChoroplethMap_marks__Ia8M_\",\"interiors\":\"ChoroplethMap_interiors__1c6ly\",\"sphere\":\"ChoroplethMap_sphere__253Ra\",\"graticules\":\"ChoroplethMap_graticules__1pM2M\",\"tick\":\"ChoroplethMap_tick__1KjU2\",\"menus-container\":\"ChoroplethMap_menus-container__s4izW\",\"axis-label\":\"ChoroplethMap_axis-label__3xZac\",\"dropdown-label\":\"ChoroplethMap_dropdown-label__2PVQG\",\"Dropdown-root\":\"ChoroplethMap_Dropdown-root__Q0kxi\",\"Dropdown-menu\":\"ChoroplethMap_Dropdown-menu__3rY1g\",\"sliderContainer\":\"ChoroplethMap_sliderContainer__3H94e\",\"tooltip\":\"ChoroplethMap_tooltip__-fR-T\",\"tooltipStroke\":\"ChoroplethMap_tooltipStroke__2yB2m\"};","export default __webpack_public_path__ + \"static/media/NotoSansMono-CondensedBold.e667a45f.ttf\";","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const LoadSpinner = () => {\n  return (\n    <div className=\"lds-spinner\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n};\n\nexport const Card = ({ children, className }) => (\n  <li className={`flex-card-listitem${className ? \" \" + className : \"\"}`}>\n    <div className=\"flex-card\">{children}</div>\n  </li>\n);\n\nCard.propTypes = {\n  children: PropTypes.node,\n};\n\nexport const Footer = () => (\n  <div className=\"footer\">\n    <p>\n      © 2020 <a href=\"https://eternallogger.com\">George Huang</a>. All rights\n      reserved.\n    </p>\n  </div>\n);\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\n// const csvUrl =\n//   \"https://gist.githubusercontent.com/mgeorgetw/413b23d87907b0f9bcda46e6e103cfb6/raw/csse_covid_19_daily_reports_vaccine_city_c.csv\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5001&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\n// const convertStringToNumber = (d) => {\n//   Object.keys(d).forEach((key) => {\n//     if (typeof d[key] !== \"number\") {\n//       d[key] = d[key].replace(/,/g, \"\");\n//       d[key] = +d[key];\n//     }\n//   });\n//   return d;\n// };\n\n// const row = (d) => {\n//   d.id = +d[\"ID\"];\n//   d.date = new Date(d[\"日期\"]);\n//   d.county = d[\"縣市別\"];\n//   d.population = +d[\"總人口數\"].replace(/,/g, \"\");\n//   d.lastTotalVaccinated = +d[\"前次累計接種人數更新\"].replace(/,/g, \"\");\n//   d.newVaccinated = +d[\"新增接種人數\"].replace(/,/g, \"\");\n//   d.totalVaccinated = +d[\"累計接種人數\"].replace(/,/g, \"\");\n//   d.totalVaccinatedRate = +d[\"累計接種率 (%)\"].replace(/,|%/g, \"\");\n//   d.vaccinesCount = +d[\"累計配送劑數\"].replace(/,/g, \"\");\n//   d.vaccinesLeftRate = +d[\"剩餘庫存量 (%)\"].replace(/,|%/g, \"\");\n//   d.vaccinesCountRate = (d.vaccinesCount / d.population) * 100;\n//   return d;\n// };\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d.date = new Date(d.a01);\n    d.county = d.a02;\n    d.area = d.a03;\n    d.gender = d.a04;\n    d.foreign = d.a05;\n    d.ageGroup = d.a06;\n    return d;\n  });\n\n// Data: Detailed Covid-19 cases in Taiwan\nexport const useCategories = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    // csv(csvUrl, row).then((d) => {\n    //   console.log(\"csv data\", d);\n    //   if (isMounted) setData(d);\n    // });\n    json(jsonUrl).then((rawData) => {\n      // console.log(\"json data\", transformData(rawData));\n      if (isMounted) setData(transformData(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\n// import PropTypes from \"prop-types\";\n// import { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"現況\",\n      view_name: \"condition\",\n      className: view === \"condition\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"年齡層\",\n      view_name: \"age\",\n      className: view === \"age\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"生理性別\",\n      view_name: \"gender\",\n      className: view === \"gender\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className={styles.nav}>\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    // setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => (\n  <div className=\"small-table\">\n    <table>\n      <thead>\n        <tr>\n          <th>總確診數</th>\n          {/* {items.map((item) => ( */}\n          {/*   <th key={dataType(item)}>{dataType(item)}</th> */}\n          {/* ))} */}\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td className=\"numerical-data\">\n            {items.reduce((acc, cur) => acc + cur.value, 0).toLocaleString()}\n          </td>\n          {/* {items.map((item, index) => ( */}\n          {/*   <td className=\"numerical-data\" key={index}> */}\n          {/*     {dataValue(item).toLocaleString()} */}\n          {/*   </td> */}\n          {/* ))} */}\n        </tr>\n      </tbody>\n    </table>\n  </div>\n);\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorScale,\n  dataType,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onClick={() => onHover(domainValue)}\n        onMouseEnter={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={d.data.case}\n      >\n        <path fill={colorScale(domainValue)} d={pieArc(d)} />\n      </g>\n    );\n  });\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieLabels = ({\n  pieData,\n  pieArc,\n  colorPie,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n  labelOffsetY = 18,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 1.65;\n      pieLabelPosition[1] *= 1.65;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <text\n          className={styles.pieLabelStroke}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n        <text\n          className={styles.pieLabel}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n      </g>\n    );\n  });\n","import React, { useState, useMemo } from \"react\";\nimport { arc, pie, scaleOrdinal, schemeTableau10 } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\nimport { PieLabels } from \"./PieLabels\";\n// import { AnimatedPieHooks } from \"./AnimatedPieHooks\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.7;\n\nconst pieRadius = Math.min(width * 0.66, height) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\nconst pieInnerMargin = pieRadius * 0.25;\n\nconst legendX = width * 0.66;\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\n\nconst fadeOpacity = 0.3;\n\nconst pieArc = arc()\n  .innerRadius(0)\n  .outerRadius(pieOuterMargin)\n  .innerRadius(pieInnerMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\n\nconst colorLegendLabel = \"案例別\";\n\nexport const PieTableLegendContainer = ({ data, view }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const pieData = useMemo(\n    () =>\n      Object.keys(data).map((key) => ({\n        case: key,\n        value: data[key],\n      })),\n    [data]\n  );\n  // console.log(pieData);\n\n  const legendY = useMemo(\n    () => (height - (pieData.length - 1) * legendItemSpacing) / 2,\n    [pieData]\n  );\n\n  let pieCenterLabel;\n  switch (view) {\n    case \"condition\":\n      pieCenterLabel = \"況\";\n      break;\n    case \"age\":\n      pieCenterLabel = \"年\";\n      break;\n    case \"gender\":\n      pieCenterLabel = \"性\";\n      break;\n    default:\n      pieCenterLabel = \"\";\n      break;\n  }\n\n  const colorPie = useMemo(() => pie().sort(null).value(dataValue), []);\n\n  const colorScale = useMemo(\n    () => scaleOrdinal().domain(pieData.map(dataType)).range(schemeTableau10),\n    [pieData]\n  );\n\n  return (\n    <>\n      <DataTable items={pieData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieRadius},${height / 2})`}>\n          <text\n            dominantBaseline=\"middle\"\n            textAnchor=\"middle\"\n            dy=\".1em\"\n            fontSize={pieInnerMargin}\n            fontWeight=\"bold\"\n          >\n            {pieCenterLabel}\n          </text>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorScale={colorScale}\n            pieArc={pieArc}\n            dataType={dataType}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n          <PieLabels\n            pieData={pieData}\n            colorPie={colorPie}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n          {/* <AnimatedPieHooks */}\n          {/*   data={pieData} */}\n          {/*   innerRadius={pieInnerMargin} */}\n          {/*   outerRadius={pieOuterMargin} */}\n          {/*   dataValue={dataValue} */}\n          {/* /> */}\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {colorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：衛生福利部疾病管制署（API：{\" \"}\n    <a href=\"https://disease.sh\">disease.sh</a>、\n    <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n      國家高速網路與計算中心\n    </a>\n    。資料收集：\n    <a href=\"https://www.worldometers.info/coronavirus/#countries\">\n      Worldometer\n    </a>\n    、\n    <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n      國家高速網路與計算中心\n    </a>\n    ）。\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表的用意是呈現此時此刻COVID-19在台灣的疫情概況。左上角的「總確診數」代表篩檢陽性案例的總計，不過，由於並非所有人都經過篩檢，這個數目並不足以代表社會中真正染疫的人數，頂多代表目前已知的確診人數而已。\n          </p>\n          <p>\n            正如圓餅圖所示，總確診數可以細分為三類：病中、死亡、解除隔離。此處列出解除隔離的比例，用意在顯示台灣距離疫病的終點還有多遠。但要知道，這組「恢復鐘」在疫情迅速增溫的時候是有可能倒轉的。病中案例代表目前還未康復、正在與疾病奮鬥中的人們。根據《紐約時報》\n            <a href=\"https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html\">\n              一篇疫情爆發初期的報導\n            </a>\n            ，大多數染疫者最終都會康復，確診者的死亡比例可能會小於百分之三。\n          </p>\n          <p>\n            2021年6月20日新增「年齡層」與「生理性別」兩種區分法。COVID-19的染病致死率與年齡的關係密切，由此或可大致推估整體不幸病死人數會有多少。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useData } from \"./useData\";\nimport { useCategories } from \"./useCategories\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { NavBar } from \"./NavBar\";\nimport { PieTableLegendContainer } from \"./PieTableLegendContainer\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"COVID-19 台灣染疫現況\";\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nconst countGroups = (array, group) => {\n  const uniqueGroups = Array.from(new Set(array.map((obj) => obj[group])));\n  let groupObj = {};\n  uniqueGroups.forEach((g) => {\n    groupObj[g] = array.reduce(\n      (counter, obj) => (obj[group] === g ? (counter += 1) : counter),\n      0\n    );\n  });\n  return groupObj;\n};\n\nexport const TaiwanOverviewPie = () => {\n  const [view, setView] = useState(\"condition\");\n  const data = useData();\n  const categoriesData = useCategories();\n  if (!data || !categoriesData) return <LoadSpinner />;\n  // console.log(data);\n  // console.log(categoriesData);\n\n  let viewData;\n  switch (view) {\n    case \"condition\":\n      viewData = (({ active, deaths, recovered }) => ({\n        解除隔離: recovered,\n        病中: active,\n        死亡: deaths,\n      }))(data);\n      break;\n    case \"gender\":\n      viewData = countGroups(categoriesData, \"gender\");\n      break;\n    case \"age\":\n      let oriGroups = countGroups(categoriesData, \"ageGroup\");\n      viewData = ((obj) => ({\n        \"0-9\":\n          obj[\"0\"] + obj[\"1\"] + obj[\"2\"] + obj[\"3\"] + obj[\"4\"] + obj[\"5-9\"],\n        \"10-19\": obj[\"10-14\"] + obj[\"15-19\"],\n        \"20-29\": obj[\"20-24\"] + obj[\"25-29\"],\n        \"30-39\": obj[\"30-34\"] + obj[\"35-39\"],\n        \"40-49\": obj[\"40-44\"] + obj[\"45-49\"],\n        \"50-59\": obj[\"50-54\"] + obj[\"55-59\"],\n        \"60-69\": obj[\"60-64\"] + obj[\"65-69\"],\n        \"70+\": obj[\"70+\"],\n      }))(oriGroups);\n      break;\n    default:\n      viewData = data;\n      break;\n  }\n  return (\n    <>\n      <ChartTitle title={title} />\n      <NavBar view={view} setView={setView} />\n      <PieTableLegendContainer data={viewData} view={view} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\n// 20210617 疾管署 no longer provides recovered data on its Google Site.\n// const jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash3\";\nconst jsonUrl = \"https://disease.sh/v3/covid-19/countries/Taiwan?strict=true\";\n\n// const convertStringToNumber = (d) => {\n//   Object.keys(d).forEach((key) => {\n//     if (typeof d[key] !== \"number\") {\n//       d[key] = d[key].replace(\",\", \"\");\n//       d[key] = +d[key];\n//     }\n//   });\n//   return d;\n// };\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then(setData);\n    // json(jsonUrl).then((d) => {\n    //   d = convertStringToNumber(d[0]);\n    //   d.confirmed = +d[\"確診\"];\n    //   d.recovered = +d[\"解除隔離\"];\n    //   d.deaths = +d[\"死亡\"];\n    //   d.excludedYesterday = +d[\"昨日排除\"];\n    //   d.confirmedYesterday = +d[\"昨日確診\"];\n    //   d.testsYesterday = +d[\"昨日送驗\"];\n    //   d.tests = +d[\"送驗\"];\n    //   d.excluded = +d[\"排除\"];\n    //   setData(d);\n    // });\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash3\";\n\nconst convertStringToNumber = (d) => {\n  Object.keys(d).forEach((key) => {\n    if (typeof d[key] !== \"number\") {\n      d[key] = d[key].replaceAll(\",\", \"\");\n      d[key] = +d[key];\n    }\n  });\n  return d;\n};\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((d) => {\n      d = convertStringToNumber(d[0]);\n      d.confirmed = +d[\"確診\"];\n      d.recovered = +d[\"解除隔離\"];\n      d.deaths = +d[\"死亡\"];\n      d.excludedYesterday = +d[\"昨日排除\"];\n      d.confirmedYesterday = +d[\"昨日確診\"];\n      d.testsYesterday = +d[\"昨日送驗\"];\n      d.tests = +d[\"送驗\"];\n      d.excluded = +d[\"排除\"];\n      setData(d);\n    });\n  }, []);\n  return data;\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：\n    <a href=\"https://sites.google.com/cdc.gov.tw/2019ncov/taiwan\">\n      衛生福利部疾病管制署\n    </a>\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>這張圓餅圖用來顯示此時此刻COVID-19在台灣的篩檢工作現況。</p>\n          <p>\n            整塊大餅表示台灣從有疫情以來累計的檢驗件數；要注意件數不代表人數，因為一個人可能檢驗不只一次，所以這個數字會比累計檢驗人數要多。整個大餅又分成兩大塊：\n          </p>\n          <ul>\n            <li>灰色的：已檢驗，未通報。</li>\n            <li>彩色的：已通報案例。</li>\n          </ul>\n          <p>\n            並非所有的檢驗案例都須通報，由\n            <a href=\"https://www.cdc.gov.tw/Category/MPage/np0wef4IjYh9hvbiW2BnoQ#collapseOne84473\">\n              疾管署的規定\n            </a>\n            看來，驗心安的案例就不會通報上傳。然而，這個灰色區塊卻也是盲點所在。台灣由於上傳通報系統存在「塞車」的問題，代表有些已經檢驗且符合通報標準的案例並沒有即時通報。這些案例以及未來可能的「校正回歸」都包納在灰色的「已檢驗，未通報」區塊中。大餅的彩色部分則是已通報的件數，這又可以區分為三塊：\n          </p>\n          <ul>\n            <li>通報確診。</li>\n            <li>通報排除。</li>\n            <li>通報待確認。</li>\n          </ul>\n          <p>\n            獲通報的案例正常來說只有兩個可能，不是確診就是排除，因此不應該存在第三類。然而在通報之後、確認檢驗結果之前，還是存在時間差。據\n            <a href=\"https://health.udn.com/health/story/120950/5479893\">\n              《聯合報元氣網》的報導\n            </a>\n            ，此處的落差大多來自於各種缺件，也包括正在檢驗中，或是預先通報卻尚未採檢的情形。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items, dataType, dataValue }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item) => (\n              <th key={dataType(item)}>{dataType(item)}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {dataValue(item).toLocaleString()}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React from \"react\";\n// import { useEffect, useRef } from \"react\";\n// import { select, transition } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorValue,\n  dataType,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) => {\n  // const refPie = useRef(null);\n  // useEffect(() => {\n  //   const t = transition().duration(750).text(\"agggg\").style(\"fill\", \"red\");\n\n  //   const textG = select(refPie.current);\n  //   textG.enter().transition(t);\n  // }, []);\n  return colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <path fill={colorValue(d.data)} d={pieArc(d)} />\n      </g>\n    );\n  });\n};\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nexport const PieLabels = ({\n  pieData,\n  pieArc,\n  colorPie,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n  labelOffsetY = 18,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 2.4;\n      pieLabelPosition[1] *= 2.4;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <text\n          className={styles.pieLabelStroke}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n        <text\n          className={styles.pieLabel}\n          transform={`translate(${pieLabelPosition})`}\n          textAnchor=\"middle\"\n          dominantBaseline=\"middle\"\n        >\n          <tspan className=\"num\" x=\"0\" dy={-labelOffsetY / 2} fill=\"black\">\n            {dataPercentage}%\n          </tspan>\n          <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n            {dataValue(d.data).toLocaleString()}\n          </tspan>\n        </text>\n      </g>\n    );\n  });\n","import React, { useState, useMemo } from \"react\";\nimport { arc, pie, scaleOrdinal } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\nimport { PieLabels } from \"./PieLabels\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.7 : width * 0.8;\n\nconst pieRadius = (width * 0.66) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\n\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\nconst legendX = width * 0.66;\nconst legendY = pieRadius - legendItemSpacing / 2;\n\nconst fadeOpacity = 0.3;\n\nconst pieArc = arc().innerRadius(0).outerRadius(pieOuterMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\nconst colorValue = (d) => d.color;\n\nconst ColorLegendLabel = \"篩檢現況\";\n\nexport const PieTableLegendContainer = ({ data, testsData }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  const tableData = [\n    {\n      case: \"累計檢驗件數\",\n      value: testsData.tests,\n    },\n    {\n      case: \"累計通報件數\",\n      value: data.tests,\n    },\n    {\n      case: \"昨日通報件數\",\n      value: data.testsYesterday,\n    },\n  ];\n\n  const pieData = useMemo(\n    () => [\n      {\n        case: \"檢驗未通報\",\n        value: testsData.tests - data.tests,\n        color: \"#E5E2E0\",\n      },\n      {\n        case: \"通報確診\",\n        value: data.confirmed,\n        color: \"#005D6E\",\n      },\n      {\n        case: \"通報排除\",\n        value: data.excluded,\n        color: \"#42A5B3\",\n      },\n      {\n        case: \"通報待確認\",\n        value: data.tests - data.excluded - data.confirmed,\n        color: \"#BD2D28\",\n      },\n    ],\n    [data, testsData]\n  );\n\n  const colorPie = useMemo(() => pie().sort(null).value(dataValue), []);\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain(pieData.map(dataType))\n        .range(pieData.map(colorValue)),\n    [pieData]\n  );\n\n  return (\n    <>\n      <DataTable items={tableData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieRadius},${height / 2})`}>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n          <PieLabels\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {ColorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { useTests } from \"./useTests\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\nimport { PieTableLegendContainer } from \"./PieTableLegendContainer.jsx\";\n\nconst title = \"COVID-19 台灣篩檢現況\";\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const TaiwanTestsOverviewPie = () => {\n  const data = useData();\n  const testsData = useTests();\n  if (!data || !testsData) return <LoadSpinner />;\n  // console.log(data);\n  // console.log(testsData);\n  return (\n    <>\n      <ChartTitle title={title} />\n      <PieTableLegendContainer data={data} testsData={testsData} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://covid19dashboard.cdc.gov.tw/dash7\";\n\n// Use JSON data\nexport const useTests = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((d) => {\n      d = d[0];\n      d.peopleTested = +d[\"檢驗人數\"].replaceAll(\",\", \"\");\n      d.tests = +d[\"檢驗件數\"].replaceAll(\",\", \"\");\n      d.date = new Date(d[\"資料更新時間\"]);\n      setData(d);\n    });\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, timeParse } from \"d3\";\n\nconst parseDay = timeParse(\"%Y-%m-%d\");\n\nconst transform = (rawData) => {\n  return rawData.map((d) => ({\n    date: parseDay(d.date),\n    newCases: +d.Taiwan,\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useData = (api) => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(api).then((rawData) => {\n      if (isMounted) setData(transform(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [api]);\n  return data;\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\n// import PropTypes from \"prop-types\";\n// import { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"確診案例\",\n      view_name: \"confirmed\",\n      className: view === \"confirmed\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"死亡人數\",\n      view_name: \"deaths\",\n      className: view === \"deaths\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className={styles.nav}>\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    // setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        x={markerLineX - 15}\n        y={5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        x={markerLineX - 15}\n        y={5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const CursorLine = ({ value, xScale, height }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <line\n      className={styles.cursorLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\nexport const RectOverlay = ({\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  return useMemo(() => {\n    const points = data.map((d) => areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <rect\n          width={innerWidth}\n          height={innerHeight}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n        />\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  area,\n  timeFormat,\n  extent,\n  max,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { CursorLine } from \"./CursorLine.js\";\nimport { RectOverlay } from \"./RectOverlay\";\nimport styles from \"./AreaChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 30, right: 10, bottom: 70, left: 40 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d\");\n\nconst yValue = (d) => d.newCases;\n// const yAxisLabel = \"New cases\";\n// const yAxisLabelOffset = 60;\nconst siFormat = format(\"~s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue);\n\nexport const AreaChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState(data[data.length - 1]);\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is population, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, max(data, yValue)])\n        .range([innerHeight, 0])\n        .nice(),\n    [data, innerHeight]\n  );\n\n  const handleVoronoiHover = useCallback(setActiveData, [setActiveData]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const Tooltip = ({ activeData, className }) => (\n    <text className={className} textAnchor={\"end\"} x={0} y={-35}>\n      <tspan x=\"-10\" dy=\"0\" fontWeight=\"bold\">\n        {activeData.newCases.toLocaleString()}例\n      </tspan>\n      <tspan x=\"-10\" dy=\"1.5em\">\n        {xTooltipFormat(activeData.date)}\n      </tspan>\n    </text>\n  );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${ */}\n          {/*     innerHeight / 2 */}\n          {/*   }) rotate(-90)`} */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.marks}>\n            <path d={areaGenerator(data)} />\n          </g>\n          <XMarkerLine\n            value={new Date(\"2021-05-15T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"雙北實施三級警戒\"}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-06-15T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"七五歲以上疫苗開打\"}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-07-27T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"全國三級警戒解除\"}\n          />\n          {activeData ? (\n            <>\n              <CursorLine\n                value={activeData.date}\n                xScale={xScale}\n                height={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  className={styles.tooltipStroke}\n                />\n                <Tooltip activeData={activeData} className={styles.tooltip} />\n              </g>\n            </>\n          ) : null}\n          <RectOverlay\n            onHover={handleVoronoiHover}\n            data={data}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：Center for Systems Science and Engineering (CSSE) at Johns Hopkins\n    University (\n    <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/jhu\">\n      Our Wolrd in Data\n    </a>\n    )\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表用來顯示病毒每天傳播的速度。每一個資料點代表一天內新增的確診案例數。\n          </p>\n          <p>\n            在傳染病增溫期間，一名染疫者可能會將病毒傳染給一名以上原本健康的人，如此一來，後些日子的新增案例就會比前些日子要多。舉例來說，假設今天驗出了十名新的確診者，而昨天只有五名，那我們可以粗略地看作是昨天的五名病患各別將病毒傳染了二個人。於是「二」就是圖表上方列的「增長因數」。唯有當增長因數穩定低於一，我們才有機會看到疫情的終點，否則便代表疫情還在增溫階段。\n          </p>\n          <p>\n            就各國的經驗看來，由於大多數社會都是以週為單位在運作，所以光看每日的新增病例數不一定準。為了避免過度解讀，這張圖表列出的增長因數以週平均數來計算。\n          </p>\n          <p>\n            2021年6月20日新增「死亡人數」按鈕，死亡不會傳染，但可以觀察確診人數與死亡人數的相對關係。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { NavBar } from \"./NavBar\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { AreaChart } from \"./AreaChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\nconst title = \"COVID-19 台灣每日新增案例數\";\n\nconst NEW_CONFIRMED_API =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv\";\n\nconst NEW_DEATHS_API =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_deaths.csv\";\n\nexport const TaiwanNewCasesArea = () => {\n  const [view, setView] = useState(\"confirmed\");\n\n  const csvUrl = view === \"confirmed\" ? NEW_CONFIRMED_API : NEW_DEATHS_API;\n  const data = useData(csvUrl);\n  if (!data) return <LoadSpinner />;\n  // if (data) console.log(data);\n\n  const filteredData = data.filter(\n    (obj) => obj.date.valueOf() >= new Date(\"2021-04-30\").valueOf()\n  );\n\n  const sevenDayAvg = sumValuesInObject(data.slice(-7), \"newCases\") / 7;\n  const prevSevenDayAvg =\n    sumValuesInObject(data.slice(-14, -7), \"newCases\") / 7;\n\n  const tableData = [\n    {\n      heading: \"上週平均\",\n      value: Math.round(prevSevenDayAvg).toLocaleString(),\n    },\n    {\n      heading: \"本週平均\",\n      value: Math.round(sevenDayAvg).toLocaleString(),\n    },\n    {\n      heading: \"增長因數\",\n      value: (sevenDayAvg / prevSevenDayAvg).toFixed(2),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <NavBar view={view} setView={setView} />\n      <DataTable items={tableData} />\n      <AreaChart data={filteredData} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .ticks(tickCount)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const CursorLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.cursorLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const YMarkerLine = ({ value, yScale, innerWidth, labelOffset = 8 }) => {\n  const markerLineY = yScale(value);\n  const markerLineX1 = 0;\n  const markerLineX2 = innerWidth;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX1}\n        y1={markerLineY}\n        x2={markerLineX2}\n        y2={markerLineY}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        全人口的75%\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        全人口的75%\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 15}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 15}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\nexport const RectOverlay = ({\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  return useMemo(() => {\n    const points = data.map((d) => areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <rect\n          width={innerWidth}\n          height={innerHeight}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n        />\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover]);\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legendStroke}>\n        {domainValue}\n      </text>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legend}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleOrdinal,\n  scaleTime,\n  area,\n  timeFormat,\n  extent,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { CursorLine } from \"./CursorLine\";\nimport { YMarkerLine } from \"./YMarkerLine\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { RectOverlay } from \"./RectOverlay\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport styles from \"./AreaChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 20, right: 50, bottom: 80, left: 50 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %Y\");\n\n// const yValue = (d) => d.total_vaccinations;\nconst yValue = (d) => d.people_vaccinated;\nconst yValue2 = (d) => d.people_fully_vaccinated;\n// const yAxisLabel = \"接種人次\";\n// const yAxisLabelOffset = 75;\nconst siFormat = format(\"~s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue).replace(\"M\", \"百萬\");\n\n// const ColorLegendLabel = \"接種情形\";\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\n\nexport const AreaChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState(data[data.length - 1]);\n  const taiwanPopulation = 23514196;\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  const legendX = margin.left + legendCircleRadius * 2;\n  const legendY = margin.top + legendItemSpacing / 2;\n\n  // X axis is time\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, taiwanPopulation])\n        .range([innerHeight, 0])\n        .nice(),\n    [innerHeight]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain([\"已接種一次\", \"已充分接種\"])\n        .range([\"#7098a5\", \"#b1c1be\"]),\n    []\n  );\n\n  const handleHover = useCallback(setActiveData, [setActiveData]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const areaGenerator2 = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue2(d)))\n        .y0(yScale(0)),\n    [xScale, yScale]\n  );\n\n  const Tooltip = ({ activeData, scaleValue, className, position }) => (\n    <text\n      className={className}\n      textAnchor={\"middle\"}\n      dominantBaseline={\"middle\"}\n      x={0}\n      y={position === \"down\" ? 40 : -15}\n    >\n      <tspan x=\"0\" dy=\"0\" fontWeight=\"bold\">\n        (\n        {scaleValue(activeData) &&\n          format(\".1%\")(scaleValue(activeData) / taiwanPopulation)}\n        )\n      </tspan>\n      <tspan x=\"0\" dy=\"-1.3em\" fontWeight=\"bold\">\n        {scaleValue(activeData) &&\n          `${scaleValue(activeData).toLocaleString()}人`}\n      </tspan>\n      {position === \"up\" ? (\n        <tspan x=\"0\" dy=\"-1.3em\">\n          {xTooltipFormat(activeData.date)}\n        </tspan>\n      ) : null}\n    </text>\n  );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${innerHeight / 2})`} */}\n          {/*   writingMode=\"vertical-lr\" */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.primary}>\n            <path d={areaGenerator(data)} />\n          </g>\n          <g className={styles.secondary}>\n            <path d={areaGenerator2(data)} />\n          </g>\n          <YMarkerLine\n            value={taiwanPopulation * 0.75}\n            yScale={yScale}\n            innerWidth={innerWidth}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-06-15T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"公費疫苗開打\"}\n          />\n          {activeData ? (\n            <>\n              <CursorLine\n                value={activeData.date}\n                xScale={xScale}\n                innerHeight={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue}\n                  className={styles.tooltipStroke}\n                  position=\"up\"\n                />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue}\n                  className={styles.tooltip}\n                  position=\"up\"\n                />\n              </g>\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator2.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue2}\n                  className={styles.tooltipStroke}\n                  position=\"down\"\n                />\n                <Tooltip\n                  activeData={activeData}\n                  scaleValue={yValue2}\n                  className={styles.tooltip}\n                  position=\"down\"\n                />\n              </g>\n            </>\n          ) : null}\n          <RectOverlay\n            onHover={handleHover}\n            data={data}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          {/* <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n          {/*   {ColorLegendLabel} */}\n          {/* </text> */}\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：衛生福利部疾病管制署（\n    <a href=\"https://github.com/owid/covid-19-data/blob/master/public/data/vaccinations/country_data/Taiwan.csv\">\n      Our Wolrd in Data\n    </a>\n    ）\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張圖表的用意在於判斷：以施打疫苗為防疫手段而言，台灣距離平息COVID-19疫情還有多遠。由於目前市面上的疫苗大多需要打兩劑才算完成接種，因此這裡也將接種人次分為「已接種」與「充分接種」兩種。\n          </p>\n          <p>\n            <s>\n              （2021年6月18日更新：台灣疾管署公佈接種數據時並不區分劑數差異，這張圖也只好改為單純的接種人次統計。）\n            </s>\n          </p>\n          <p>\n            （2021年7月5日更新：台灣疾管署公佈的數據再度區分劑數差異，這張圖改回原樣。）\n          </p>\n          <p>\n            根據\n            <a href=\"https://www.who.int/zh/news-room/q-a-detail/herd-immunity-lockdowns-and-covid-19?gclid=Cj0KCQjw16KFBhCgARIsALB0g8K0rV9obZlpcbd2lFom_qKgbCe72ZnV_mqn8Z2AiNt5W3QRZFbMGCoaAshfEALw_wcB\">\n              世界衛生組織的建議\n            </a>\n            ，對抗大規模傳染的流行病，居家隔離、封鎖等措施本身便會對個人與社會造成負面影響，是為爭取時間不得已而為之。要真正對抗COVID-19，世衛支持透過疫苗來達到「群體免疫」的效果。\n          </p>\n          <p>\n            要實現「群體免疫」，就得讓社群中大多數人都擁有抗體，人數一多，病毒自然就少了傳播媒介，從而中斷傳播鏈。人要取得抗體有兩種手段：一是讓大多數的人都感染，感染過後自然會產生抗體，但這種方法必然會導致更多病例與死亡。另一種方法，就是施打疫苗。疫苗可以在不讓人生病的情況下，訓練免疫系統產生抗體，比起真的生病是安全得多的做法。\n          </p>\n          <p>\n            那麼，要多少人打過疫苗才能達到群體免疫呢？要考慮的條件主要有二。首先是每種疾病的狀況不同，例如麻疹需要95%的人口接種，才能保護剩下的5%。就COVID-19來說，實際需要多高的接種率目前沒有人能夠肯定。不過，根據\n            <a href=\"https://wwwnc.cdc.gov/eid/article/27/5/20-4365_article\">\n              美國疾管中心在卡達做的研究\n            </a>\n            ，社群中若有65%至70%的人感染，該社群就很接近群體免疫。\n          </p>\n          <p>\n            知道了這點之後，第二個要考慮的是\n            <a href=\"https://www.thelancet.com/journals/lanmic/article/PIIS2666-5247(21)00069-0/fulltext\">\n              疫苗的效能\n            </a>\n            。每一款疫苗的效能不盡相同，若是使用效能約65%至70%左右的AstraZeneca-Oxford或嬌生疫苗，就需要全民施打來達到群體免疫；若使用效能達95%左右的Pfizer-BioNTech或Moderna-NIH疫苗，則只需75%的人口施打即可。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { AreaChart } from \"./AreaChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"台灣 COVID-19 疫苗接種人次\";\n\nexport const TaiwanVaccinationArea = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  // if (!data || !data[data.length - 1].people_vaccinated) return <LoadSpinner />;\n  // if (data) console.log(data[data.length - 1]);\n\n  const tableData = [\n    {\n      heading: \"接種人次總計\",\n      value: data[data.length - 1].total_vaccinations.toLocaleString(),\n    },\n    {\n      heading: \"已接種一次\",\n      value: data[data.length - 1].people_vaccinated.toLocaleString(),\n    },\n    {\n      heading: \"充分接種人數\",\n      value: data[data.length - 1].people_fully_vaccinated.toLocaleString(),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <AreaChart data={data} />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/country_data/Taiwan.csv\";\n\n// Data: Covid vaccinations in Taiwan\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((rawData) => {\n      let prevVaccinated, prevFullyVaccinated, prevTotal;\n      // Fill empty cells with data from the last available row\n      const row = rawData.map((d) => {\n        d.people_vaccinated !== null\n          ? (prevVaccinated = d.people_vaccinated)\n          : (d.people_vaccinated = prevVaccinated);\n        d.people_fully_vaccinated !== null\n          ? (prevFullyVaccinated = d.people_fully_vaccinated)\n          : (d.people_fully_vaccinated = prevFullyVaccinated);\n        d.total_vaccinations !== null\n          ? (prevTotal = d.total_vaccinations)\n          : (d.total_vaccinations = prevTotal);\n        return d;\n      });\n      if (isMounted) setData(row);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n// import { csv, autoType } from \"d3\";\n\n// const csvUrl =\n//   \"https://gist.githubusercontent.com/mgeorgetw/690d02dfc6bdbb99e58f6d1c622836c9/raw/covidtable_taiwan_cdc5.csv\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5003&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d[\"日期\"] = new Date(d.a01);\n    d[\"縣市別\"] = d.a02;\n    d[\"區域\"] = d.a03;\n    d[\"新增確診人數\"] = +d.a04;\n    d[\"累計確診人數\"] = +d.a05;\n    d[\"七天移動平均新增確診\"] = +d.a06;\n    return d;\n  });\n\n// Data: Covid vaccinations in Taiwan\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    // csv(csvUrl, autoType).then((d) => {\n    //   if (isMounted) setData(d);\n    // });\n    json(jsonUrl).then((rawData) => {\n      if (isMounted) setData(transformData(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./ChoroplethMap.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  width,\n  colorScale,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  const legendHeight = 15;\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-legendHeight - 3)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"middle\")\n      .attr(\"dy\", \"-2.2em\");\n  }, [xScale, innerHeight, tickOffset, tickCount, tickFormat]);\n  return (\n    <>\n      <g transform={`translate(${tickOffset}, 0)`}>\n        <defs>\n          <linearGradient id=\"legendGradient\">\n            <stop offset=\"0%\" stopColor={colorScale.range()[0]} />\n            <stop offset=\"100%\" stopColor={colorScale.range()[1]} />\n          </linearGradient>\n        </defs>\n        <rect\n          x={0}\n          y={innerHeight - legendHeight}\n          width={width}\n          height={legendHeight}\n          fill={`url('#legendGradient')`}\n        />\n        <g\n          ref={ref}\n          className={styles.tick}\n          transform={`translate(0, ${innerHeight})`}\n        />\n      </g>\n    </>\n  );\n};\n","import { geoPath, pointer } from \"d3\";\nimport styles from \"./ChoroplethMap.module.css\";\nconst missingDataColor = \"white\";\n\nexport const TaiwanMarks = ({\n  atlas: { counties, interiors, compBorders },\n  data,\n  colorScale,\n  handleHover,\n  handlePointerMove,\n}) => {\n  // const projection = geoMercator().scale(9000).center([121, 24]);\n  // const path = geoPath().projection(projection); // creates a new geographic path generator\n  const path = geoPath();\n  return (\n    <>\n      <g className={styles.marks}>\n        {counties.features.map((feature, i) => {\n          const d = feature.properties.COUNTYNAME;\n          return (\n            <path\n              fill={d ? colorScale(data[d]) : missingDataColor}\n              key={i}\n              d={path(feature)}\n              onTouchStart={(event) => {\n                event.preventDefault();\n                handleHover(d);\n                handlePointerMove(pointer(event));\n              }}\n              onMouseMove={(event) => {\n                handleHover(d);\n                handlePointerMove(pointer(event));\n              }}\n              onPointerMove={(event) => {\n                handleHover(d);\n                handlePointerMove(pointer(event));\n              }}\n            />\n          );\n        })}\n        {/* <path className={styles.interiors} d={path(interiors)} /> */}\n        <path className={styles.marks} d={path(compBorders)} />\n      </g>\n    </>\n  );\n};\n","import { useState, useMemo } from \"react\";\nimport {\n  scaleSequential,\n  interpolateGreys,\n  max,\n  scaleLinear,\n  format,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { TaiwanMarks } from \"./TaiwanMarks\";\nimport styles from \"./ChoroplethMap.module.css\";\n\nconst width = window.innerWidth < 800 ? window.innerWidth : 800;\nconst height = width > 480 ? width * 0.9 : width * 1.6;\nconst viewBoxWidth = width + 50;\n\nconst xAxisTickFormat = format(\",d\");\nconst legendPadding = 5;\nconst legendWidth = viewBoxWidth - legendPadding * 2;\n\nconst colorValue = (d) => d[\"累計確診人數\"];\n\nconst transformData = (data, view) => {\n  let obj = { date: data[0][\"日期\"], dateString: data[0].a01 };\n  if (view === \"全台灣\") {\n    data.map(({ 縣市別, 累計確診人數 }) => (obj[縣市別] = 累計確診人數));\n  } else {\n    data.map(({ 區域, 累計確診人數 }) => (obj[區域] = 累計確診人數));\n  }\n  return obj;\n};\n\nconst Slider = ({ range, selected, handleChange }) => (\n  <div className={styles.sliderContainer}>\n    <pre>{selected}</pre>\n    <input\n      className={styles.slider}\n      type=\"range\"\n      min=\"0\"\n      max={range.length - 1}\n      value={range.indexOf(selected)}\n      onChange={(e) => handleChange(range[e.target.value])}\n    />\n  </div>\n);\n\nexport const Map = ({ data, atlas, view }) => {\n  const [selectedDate, setSelectedDate] = useState(data[0].a01);\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const [points, setPoints] = useState(null);\n\n  // Choropleth Map can only display one day of data\n  const dataFilteredByAreas =\n    view === \"全台灣\"\n      ? data.filter((d) => d[\"區域\"] === \"全區\")\n      : data.filter((d) => d[\"縣市別\"] === view);\n\n  // Prepare all dates for the range slider\n  const allDates = Array.from(\n    new Set(dataFilteredByAreas.map((d) => d.a01))\n  ).reverse();\n\n  const dataSelectedByDate = dataFilteredByAreas.filter(\n    (d) => d[\"日期\"].valueOf() === new Date(selectedDate).valueOf()\n  );\n\n  const heatmapData = transformData(dataSelectedByDate, view);\n\n  const colorScale = useMemo(\n    () =>\n      scaleSequential(interpolateGreys).domain([\n        0,\n        max(dataFilteredByAreas.map(colorValue)),\n      ]),\n    [dataFilteredByAreas]\n  );\n\n  const xScale = useMemo(\n    () => scaleLinear().range([0, legendWidth]).domain(colorScale.domain()),\n    [colorScale]\n  );\n\n  return (\n    <>\n      <Slider\n        range={allDates}\n        selected={selectedDate}\n        handleChange={setSelectedDate}\n      />\n      <svg\n        viewBox={`0 0 ${viewBoxWidth} ${height}`}\n        preserveAspectRatio=\"xMinYMid\"\n      >\n        <TaiwanMarks\n          atlas={atlas}\n          colorScale={colorScale}\n          data={heatmapData}\n          hoveredValue={hoveredValue}\n          handleHover={setHoveredValue}\n          handlePointerMove={setPoints}\n        />\n        {hoveredValue ? (\n          <g>\n            <text\n              className={styles.tooltipStroke}\n              x={points[0]}\n              y={points[1]}\n              textAnchor={points[0] > width / 2 ? \"end\" : \"start\"}\n            >\n              {hoveredValue}累計確診：{heatmapData[hoveredValue]}\n            </text>\n            <text\n              className={styles.tooltip}\n              x={points[0]}\n              y={points[1]}\n              textAnchor={points[0] > width / 2 ? \"end\" : \"start\"}\n            >\n              {hoveredValue}累計確診：{heatmapData[hoveredValue]}\n            </text>\n          </g>\n        ) : null}\n        <AxisBottom\n          innerHeight={height}\n          width={legendWidth}\n          xScale={xScale}\n          colorScale={colorScale}\n          tickFormat={xAxisTickFormat}\n          tickOffset={legendPadding}\n          tickCount={6}\n        />\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst SourceCredit = () => (\n  <>\n    <p className=\"footnote\">\n      資料來源：衛生福利部疾病管制署（API：{\" \"}\n      <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n        國家高速網路與計算中心\n      </a>\n      。）\n    </p>\n    <p className=\"footnote\">\n      圖資：內政部國土測繪中心（\n      <a href=\"https://github.com/dkaoster/taiwan-atlas\">\n        dkaoster / taiwan-atlas\n      </a>\n      ，lisensed under The MIT License。）\n    </p>\n  </>\n);\n\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這張地圖顯示COVID-19的確診案例在台灣的分佈情形，顏色越深代表案例數越多。上方的滑桿用來控制日期，能夠看到從2021年5月1日以來的轉變。事實上，這張地圖所呈現的資訊並沒有比上面一張「台灣各地區每日新增確診案例數比較」來得多，能夠藉由控制滑桿取得的資訊，在上圖一目了然。不過我想畫畫看地圖，所以做了這一張圖。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","// import { useState } from \"react\";\nimport { useData } from \"./useData\";\nimport { useTaiwanAtlas } from \"./useTaiwanAtlas\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Map } from \"./Map\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"COVID-19 台灣累計確診分佈圖\";\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const ChoroplethMap = () => {\n  // const [view, setView] = useState(\"全台灣\");\n  const taiwanAtlas = useTaiwanAtlas();\n  const rawData = useData();\n\n  if (!rawData || !taiwanAtlas) return <LoadSpinner />;\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <Map view={\"全台灣\"} atlas={taiwanAtlas} data={rawData} />\n      <Collapsible id=\"ChoroplethMap\" />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\nimport { feature, mesh } from \"topojson\";\n\n// Source: https://github.com/dkaoster/taiwan-atlas\n// License: MIT\n// const jsonUrl = \"https://cdn.jsdelivr.net/npm/taiwan-atlas/towns-10t.json\";\nconst jsonUrl =\n  \"https://cdn.jsdelivr.net/npm/taiwan-atlas/towns-mercator-10t.json\";\n\n// Use JSON data\nexport const useTaiwanAtlas = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    json(jsonUrl).then((topology) => {\n      // console.log(\"topo\", topology);\n      const { nation, counties, towns, compBorders } = topology.objects;\n      setData({\n        // topojson.feature(topology, object) converts TopoJSON to GeoJSON,\n        // which d3 can parse\n        nation: feature(topology, nation),\n        counties: feature(topology, counties),\n        towns: feature(topology, towns),\n        // topojson.mesh - mesh TopoJSON geometry and convert to GeoJSON lines\n        compBorders: feature(topology, compBorders),\n        interiors: mesh(topology, towns, (a, b) => a !== b),\n      });\n    });\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\n// 死亡案例分項統計\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=4002\";\nconst jsonUrl = CORS + API;\n\nconst countGroups = (array, group) => {\n  const uniqueGroups = Array.from(new Set(array.map((obj) => obj[group])));\n  let groupObj = {};\n  uniqueGroups.forEach((g) => {\n    groupObj[g] = array.reduce(\n      (counter, obj) => (obj[group] === g ? (counter += 1) : counter),\n      0\n    );\n  });\n  return groupObj;\n};\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d.date = new Date(d.a01);\n    d.gender = d.a03;\n    d.ageGroup = d.a04;\n    d.chronic = d.a05;\n    return d;\n  });\n\n// Data: Detailed Covid-19 cases in Taiwan\nexport const useDeaths = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((rawData) => {\n      // console.log(\"json data\", transformData(rawData));\n      if (isMounted) {\n        const transformedData = transformData(rawData);\n        const deathsByGender = countGroups(transformedData, \"gender\");\n        const deathsByAge = countGroups(transformedData, \"ageGroup\");\n        const sortedDeathsByAge = ((obj) => ({\n          \"0-9\": obj[\"0\"] ? obj[\"0\"] : 0,\n          \"10-19\": obj[\"10\"] ? obj[\"10\"] : 0,\n          \"20-29\": obj[\"20\"] ? obj[\"20\"] : 0,\n          \"30-39\": obj[\"30\"],\n          \"40-49\": obj[\"40\"],\n          \"50-59\": obj[\"50\"],\n          \"60-69\": obj[\"60\"],\n          \"70+\": obj[\"70\"] + obj[\"80\"] + obj[\"90\"] + obj[\"100\"],\n        }))(deathsByAge);\n\n        setData({ age: sortedDeathsByAge, gender: deathsByGender });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\n// 確診案例分項統計\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5001&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\nconst countGroups = (array, group) => {\n  const uniqueGroups = Array.from(new Set(array.map((obj) => obj[group])));\n  let groupObj = {};\n  uniqueGroups.forEach((g) => {\n    groupObj[g] = array.reduce(\n      (counter, obj) => (obj[group] === g ? (counter += 1) : counter),\n      0\n    );\n  });\n  return groupObj;\n};\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d.date = new Date(d.a01);\n    d.county = d.a02;\n    d.area = d.a03;\n    d.gender = d.a04;\n    d.foreign = d.a05;\n    d.ageGroup = d.a06;\n    return d;\n  });\n\n// Data: Detailed Covid-19 cases in Taiwan\nexport const useInfected = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((rawData) => {\n      // console.log(\"json data\", transformData(rawData));\n      if (isMounted) {\n        const transformedData = transformData(rawData);\n        const infectedByGender = countGroups(transformedData, \"gender\");\n        const infectedByAge = countGroups(transformedData, \"ageGroup\");\n        const sortedInfectedByAge = ((obj) => ({\n          \"0-9\":\n            obj[\"0\"] + obj[\"1\"] + obj[\"2\"] + obj[\"3\"] + obj[\"4\"] + obj[\"5-9\"],\n          \"10-19\": obj[\"10-14\"] + obj[\"15-19\"],\n          \"20-29\": obj[\"20-24\"] + obj[\"25-29\"],\n          \"30-39\": obj[\"30-34\"] + obj[\"35-39\"],\n          \"40-49\": obj[\"40-44\"] + obj[\"45-49\"],\n          \"50-59\": obj[\"50-54\"] + obj[\"55-59\"],\n          \"60-69\": obj[\"60-64\"] + obj[\"65-69\"],\n          \"70+\": obj[\"70+\"],\n        }))(infectedByAge);\n\n        setData({ age: sortedInfectedByAge, gender: infectedByGender });\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\n// import PropTypes from \"prop-types\";\n// import { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"年齡層\",\n      view_name: \"age\",\n      className: view === \"age\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"生理性別\",\n      view_name: \"gender\",\n      className: view === \"gender\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className={styles.nav}>\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    // setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickOffset = 3,\n  tickCount = 6,\n}) =>\n  // Label and reference lines for x scale\n  xScale.ticks(tickCount).map((tickValue) => (\n    // Each tick goes to the position indicating its value\n    <g\n      className={styles.tick}\n      key={tickValue}\n      transform={`translate(${xScale(tickValue)}, 0)`}\n    >\n      {/* the values of x1, x2, y1 are 0, which is default */}\n      <line y2={innerHeight} />\n      <text\n        y={innerHeight + tickOffset}\n        dy=\"0.71em\"\n        style={{ textAnchor: \"middle\" }}\n      >\n        {tickFormat(tickValue)}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisLeft = ({ yScale, tickOffset = 3 }) =>\n  yScale.domain().map((tickValue) => (\n    <g\n      key={tickValue}\n      className={styles.tick}\n      transform={`translate(0,${yScale(tickValue) + yScale.bandwidth() / 2})`}\n    >\n      <text\n        dy=\".18em\"\n        x={-tickOffset}\n        style={{\n          fontWeight: \"bold\",\n          textAnchor: \"end\",\n          dominantBaseline: \"middle\",\n        }}\n      >\n        {tickValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const Marks = ({\n  data,\n  xScale,\n  xValue,\n  yScale,\n  yValue,\n  tooltipFormat,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n  tooltipOffset = 22,\n}) =>\n  data.map((d) => (\n    <g\n      className={styles.marks}\n      key={yValue(d)}\n      onMouseEnter={() => onHover(yValue(d))}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && hoveredValue !== yValue(d) ? fadeOpacity : 1}\n    >\n      <rect\n        x={0}\n        y={yScale(yValue(d))}\n        width={xScale(xValue(d))}\n        height={yScale.bandwidth()}\n        stroke=\"black\"\n        strokeWidth={2}\n        fill=\"#BD2D28\"\n      />\n      <text\n        className={styles.tooltipStroke}\n        x={xScale(xValue(d)) + 10}\n        y={yScale(yValue(d)) + yScale.bandwidth() / 2}\n        dy=\".1em\"\n        dominantBaseline=\"middle\"\n      >\n        {tooltipFormat(xValue(d))}\n      </text>\n      <text\n        className={styles.tooltip}\n        x={xScale(xValue(d)) + 10}\n        y={yScale(yValue(d)) + yScale.bandwidth() / 2}\n        dy=\".1em\"\n        dominantBaseline=\"middle\"\n      >\n        {tooltipFormat(xValue(d))}\n      </text>\n      {hoveredValue && hoveredValue === yValue(d) ? (\n        <>\n          <text\n            className={styles.tooltipStroke}\n            x={xScale(xValue(d)) + 10}\n            y={yScale(yValue(d)) + yScale.bandwidth() / 2 + tooltipOffset}\n            dy=\".21em\"\n          >\n            {`染疫：${d.confirmed.toLocaleString()}人`}\n          </text>\n          <text\n            className={styles.tooltip}\n            x={xScale(xValue(d)) + 10}\n            y={yScale(yValue(d)) + yScale.bandwidth() / 2 + tooltipOffset}\n            dy=\".21em\"\n          >\n            {`染疫：${d.confirmed.toLocaleString()}人`}\n          </text>\n          <text\n            className={styles.tooltipStroke}\n            x={xScale(xValue(d)) + 10}\n            y={yScale(yValue(d)) + yScale.bandwidth() / 2 + tooltipOffset * 2}\n            dy=\".21em\"\n          >\n            {`死亡：${d.deaths.toLocaleString()}人`}\n          </text>\n          <text\n            className={styles.tooltip}\n            x={xScale(xValue(d)) + 10}\n            y={yScale(yValue(d)) + yScale.bandwidth() / 2 + tooltipOffset * 2}\n            dy=\".21em\"\n          >\n            {`死亡：${d.deaths.toLocaleString()}人`}\n          </text>\n        </>\n      ) : null}\n    </g>\n  ));\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport { scaleBand, scaleLinear, max, format } from \"d3\";\n// import { NavBar } from \"./NavBar\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { Marks } from \"./Marks\";\n// import { ColorLegend } from \"./ColorLegend\";\n// import styles from \"./BarChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 5, right: 120, bottom: 45, left: 60 };\n\n// const formatDate = timeFormat(\"%Y/%-m/%-d\");\nconst yValue = (d) => d.age;\nconst xValue = (d) => d.CFR;\n\nconst xAxisTickFormat = (tickValue) => format(\"~%\")(tickValue);\nconst labelFormat = format(\".2%\");\n\n// The chart's real height and width\nconst innerHeight = height - margin.top - margin.bottom;\nconst innerWidth = width - margin.left - margin.right;\n\n// Legend settings\n// const legendRectSize = 15;\n// const legendItemSpacing = 26;\n// const legendX = width - margin.left;\n// const legendY = innerHeight - legendItemSpacing;\n// const ColorLegendLabel = \"疫苗現況\";\n\nconst fadeOpacity = 0.3;\n\nexport const BarChart = ({ data }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n  // console.log(data);\n  const handleHover = useCallback(setHoveredValue, [setHoveredValue]);\n\n  // X axis is percentage of vaccines, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleLinear()\n        // Domain is an array of actual data, starts from 0 to the max of all countries\n        // d3.max(iterable[, accessor])\n        .domain([0, max(data, xValue)])\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data]\n  );\n\n  const yScale = useMemo(\n    () =>\n      scaleBand()\n        .domain(data.map((d) => yValue(d)))\n        .range([0, innerHeight])\n        .paddingInner(0.3),\n    [data]\n  );\n\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={8}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft yScale={yScale} tickOffset={8} />\n          <Marks\n            data={data}\n            margin={margin}\n            innerWidth={innerWidth}\n            xScale={xScale}\n            xValue={xValue}\n            yScale={yScale}\n            yValue={yValue}\n            tooltipFormat={labelFormat}\n            onHover={handleHover}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        {/* <g transform={`translate(${legendX}, ${legendY})`}> */}\n        {/*   <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n        {/*     {ColorLegendLabel} */}\n        {/*   </text> */}\n        {/*   <ColorLegend */}\n        {/*     xScake={xScale} */}\n        {/*     xValue1={xValue1} */}\n        {/*     xValue2={xValue2} */}\n        {/*     tickSpacing={legendItemSpacing} */}\n        {/*     tickSize={legendRectSize} */}\n        {/*     tickTextOffset={16} */}\n        {/*     onHover={setHoveredValue} */}\n        {/*     hoveredValue={hoveredValue} */}\n        {/*     fadeOpacity={fadeOpacity} */}\n        {/*   /> */}\n        {/* </g> */}\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst SourceCredit = () => (\n  <>\n    <p className=\"footnote\">\n      資料來源：衛生福利部疾病管制署（API：{\" \"}\n      <a href=\"https://covid-19.nchc.org.tw/dt_005-covidTable_taiwan.php\">\n        國家高速網路與計算中心\n      </a>\n      。）\n    </p>\n  </>\n);\n\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            COVID-19的一大特性是：高齡者的死亡率明顯較高。台灣的疫情比起許多國家要晚展開，因此已經有不止一個研究都顯示年齡與染疫死亡率的正相關。在這個網頁的「Global」版本中，有義大利、西班牙、中國、韓國分別做的研究結果。這張圖表利用台灣疾管署公告的病逝者資料，即時顯示台灣各年齡的染疫死亡率，一方面印證高齡者的風險確實較高，一方面也能與其他國家比較。\n          </p>\n          <p>2021年6月23日新增以性別分類的圖表。</p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useDeaths } from \"./useDeaths\";\nimport { useInfected } from \"./useInfected\";\nimport { NavBar } from \"./NavBar\";\nimport { BarChart } from \"./BarChart\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const CFRByGroupsBar = () => {\n  const [view, setView] = useState(\"age\");\n  const deathsData = useDeaths();\n  const infectedData = useInfected();\n\n  if (!deathsData || !infectedData) return <LoadSpinner />;\n  // console.log(infectedData);\n  // console.log(deathsData);\n\n  const infected = view === \"age\" ? infectedData.age : infectedData.gender;\n  const deaths = view === \"age\" ? deathsData.age : deathsData.gender;\n\n  const data = Object.keys(infected).map((key) => ({\n    age: key,\n    CFR: deaths[key] / infected[key],\n    confirmed: infected[key],\n    deaths: deaths[key],\n  }));\n\n  return (\n    <>\n      <ChartTitle title=\"COVID-19 台灣染疫死亡率\" />\n      <NavBar view={view} setView={setView} />\n      <BarChart data={data} />\n      <Collapsible id=\"CFRByGroupsinTaiwan\" />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n// import { csv, autoType } from \"d3\";\n\n// const csvUrl =\n//   \"https://gist.githubusercontent.com/mgeorgetw/690d02dfc6bdbb99e58f6d1c622836c9/raw/covidtable_taiwan_cdc5.csv\";\n\nconst CORS = \"https://morning-wave-49482.herokuapp.com/\";\nconst API =\n  \"https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5003&limited=全部縣市\";\nconst jsonUrl = CORS + API;\n\nconst transformData = (rawData) =>\n  rawData.map((d) => {\n    d[\"日期\"] = new Date(d.a01);\n    d[\"縣市別\"] = d.a02;\n    d[\"區域\"] = d.a03;\n    d[\"新增確診人數\"] = +d.a04;\n    d[\"累計確診人數\"] = +d.a05;\n    d[\"七天移動平均新增確診\"] = +d.a06;\n    return d;\n  });\n\n// Data: Covid vaccinations in Taiwan\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    // csv(csvUrl, autoType).then((d) => {\n    //   if (isMounted) setData(d);\n    // });\n    json(jsonUrl).then((rawData) => {\n      if (isMounted) setData(transformData(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React, { useState, useEffect } from \"react\";\n\nconst dropdownItems = [\n  \"全台灣\",\n  \"南投縣\",\n  \"台中市\",\n  \"台北市\",\n  \"台南市\",\n  \"台東縣\",\n  \"嘉義市\",\n  \"嘉義縣\",\n  \"基隆市\",\n  \"境外移入\",\n  \"宜蘭縣\",\n  \"屏東縣\",\n  \"彰化縣\",\n  \"新北市\",\n  \"新竹市\",\n  \"新竹縣\",\n  \"桃園市\",\n  \"澎湖縣\",\n  \"花蓮縣\",\n  \"苗栗縣\",\n  \"連江縣\",\n  \"雲林縣\",\n  \"高雄市\",\n];\n\nexport const DropdownMenu = ({\n  chosen,\n  setChosen,\n  handleTypeHover,\n  handleCursorHover,\n}) => {\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    setItems(\n      dropdownItems.map((d) => ({\n        label: d,\n        value: d,\n      }))\n    );\n  }, []);\n  return (\n    <div className=\"dropdown-container\">\n      區域：\n      <select\n        value={chosen}\n        onChange={(e) => {\n          setChosen(e.currentTarget.value);\n          handleTypeHover(null);\n          handleCursorHover(null);\n        }}\n      >\n        {items.map(({ label, value }) => (\n          <option className=\"region-name\" key={label} value={value}>\n            {label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\n// TODO: no negative values\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .ticks(tickCount)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const CursorLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.cursorLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"end\"}\n        x={markerLineX - 15}\n        y={height - 5}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./AreaChart.module.css\";\n\n// Use d3.bisect() to decide the value hovered\nexport const PathOverlay = ({ data, areaGenerator, onHover }) => {\n  return useMemo(() => {\n    // d3.bisect() only works with ascending values\n    // turn x values into negative numbers as a cheat\n    const points = data.map((d) => -areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <path\n          d={areaGenerator(data)}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, -pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, -pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, -pointer(event)[0]);\n            onHover(data[index]);\n          }}\n        ></path>\n      </g>\n    );\n  }, [data, areaGenerator, onHover]);\n};\n","import React from \"react\";\nimport styles from \"./AreaChart.module.css\";\nexport const Tooltip = ({ activeData, hoveredValue, xTooltipFormat }) => (\n  <>\n    <text\n      className={styles.tooltipStroke}\n      textAnchor={\"start\"}\n      dominantBaseline={\"middle\"}\n      x={0}\n      y={20}\n    >\n      <tspan x=\"10\" dy=\"0\" fontWeight=\"bold\">\n        {`${hoveredValue}：${\n          activeData && activeData.data[hoveredValue].toLocaleString()\n        }人`}\n      </tspan>\n      <tspan x=\"10\" dy=\"1.3em\">\n        {xTooltipFormat(activeData && activeData.data.date)}\n      </tspan>\n    </text>\n    <text\n      className={styles.tooltip}\n      textAnchor={\"start\"}\n      dominantBaseline={\"middle\"}\n      x={0}\n      y={20}\n    >\n      <tspan x=\"10\" dy=\"0\" fontWeight=\"bold\">\n        {`${hoveredValue}：${\n          activeData && activeData.data[hoveredValue].toLocaleString()\n        }人`}\n      </tspan>\n      <tspan x=\"10\" dy=\"1.3em\">\n        {xTooltipFormat(activeData && activeData.data.date)}\n      </tspan>\n    </text>\n  </>\n);\n","import React, {\n  useState,\n  useMemo,\n  useCallback,\n  // useRef,\n  // useEffect,\n} from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  scaleOrdinal,\n  area,\n  timeFormat,\n  extent,\n  min,\n  max,\n  interpolateViridis,\n  // select,\n} from \"d3\";\nimport { DropdownMenu } from \"./DropdownMenu\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { CursorLine } from \"./CursorLine\";\nimport { XMarkerLine } from \"./XMarkerLine\";\n// import { YMarkerLine } from \"./YMarkerLine\";\nimport { PathOverlay } from \"./PathOverlay\";\nimport { Tooltip } from \"./Tooltip\";\n// import { ColorLegend } from \"./ColorLegend\";\n// import { areaLabel } from \"d3-area-label\";\nimport styles from \"./AreaChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 20, right: 10, bottom: 80, left: 50 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %Y\");\nconst formatDate = timeFormat(\"%Y/%-m/%-d\");\n\n// const yValue = (d) => d[\"新增確診人數\"];\n// const yAxisLabel = \"接種人次\";\n// const yAxisLabelOffset = 75;\nconst yAxisTickFormat = (tickValue) => (tickValue < 0 ? -tickValue : tickValue);\n\n// const ColorLegendLabel = \"接種情形\";\n// const legendCircleRadius = 8;\n// const legendItemSpacing = 26;\n\nexport const AreaChart = ({ data, stackedData, view, setView }) => {\n  // console.log(data);\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState(null);\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  // const ref = useRef();\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // const legendX = innerWidth + margin.left + 15;\n  // const legendY = margin.top + legendItemSpacing / 2;\n\n  // X axis is time\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, (d) => d[\"日期\"]))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth]),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([\n          min(stackedData, (d) => min(d, (d) => d[0])),\n          max(stackedData, (d) => max(d, (d) => d[1])),\n        ])\n        .range([innerHeight, 0])\n        .nice(),\n    [stackedData, innerHeight]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal().range(\n        stackedData.map((area, i) => {\n          const t = i / stackedData.length;\n          return interpolateViridis(t);\n        })\n      ),\n    [stackedData]\n  );\n\n  const handleCursorHover = useCallback(setActiveData, [setActiveData]);\n  const handleTypeHover = useCallback(setHoveredValue, [setHoveredValue]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d.data)))\n        .y0((d) => yScale(d[0]))\n        .y1((d) => yScale(d[1])),\n    [xScale, yScale]\n  );\n\n  // useEffect(() => {\n  //   const labelG = select(ref.current);\n  //   const labels = labelG.selectAll(\"text\").data(stackedData);\n  //   labels\n  //     .enter()\n  //     .append(\"text\")\n  //     .attr(\"class\", styles.areaLabel)\n  //     .merge(labels)\n  //     .text((d) => d.key)\n  //     .attr(\"transform\", areaLabel(areaGenerator));\n  // }, [areaGenerator, stackedData]);\n  return (\n    <>\n      <DropdownMenu\n        chosen={view}\n        setChosen={setView}\n        handleTypeHover={handleTypeHover}\n        handleCursorHover={handleCursorHover}\n      />\n      <pre>資料更新時間：{formatDate(data[0][\"日期\"])}</pre>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${innerHeight / 2})`} */}\n          {/*   writingMode=\"vertical-lr\" */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.primary}>\n            {stackedData.map((d) => (\n              <g\n                key={d.key}\n                onTouchStart={(event) => {\n                  handleTypeHover(d.key);\n                  event.preventDefault();\n                }}\n                onPointerEnter={() => handleTypeHover(d.key)}\n                onMouseLeave={() => handleTypeHover(null)}\n              >\n                <path\n                  d={areaGenerator(d)}\n                  fill={colorScale(d.key)}\n                  stroke={\"#ddd\"}\n                  strokeWidth={0.1}\n                  opacity={hoveredValue ? 0.2 : 1}\n                >\n                  <title>{d.key}</title>\n                </path>\n                {hoveredValue === d.key ? (\n                  <>\n                    <path\n                      d={areaGenerator(d)}\n                      fill={colorScale(d.key)}\n                      stroke={\"#ddd\"}\n                      strokeWidth={0.1}\n                    >\n                      <title>{d.key}</title>\n                    </path>\n                    {activeData ? (\n                      <>\n                        <CursorLine\n                          value={activeData.data.date}\n                          xScale={xScale}\n                          innerHeight={innerHeight}\n                        />\n                        <Tooltip\n                          activeData={activeData}\n                          hoveredValue={hoveredValue}\n                          xTooltipFormat={xTooltipFormat}\n                        />\n                      </>\n                    ) : null}\n                    <PathOverlay\n                      onHover={handleCursorHover}\n                      data={d}\n                      areaGenerator={areaGenerator}\n                    />\n                  </>\n                ) : null}\n              </g>\n            ))}\n          </g>\n          <XMarkerLine\n            value={new Date(\"2021-05-15T08:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"雙北實施三級警戒\"}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-07-27T08:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"全國三級警戒解除\"}\n          />\n        </g>\n        {/* <g transform={`translate(${legendX}, ${legendY})`}> */}\n        {/*   <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n        {/*     {ColorLegendLabel} */}\n        {/*   </text> */}\n        {/*   <ColorLegend */}\n        {/*     colorScale={colorScale} */}\n        {/*     tickSpacing={legendItemSpacing} */}\n        {/*     tickSize={legendCircleRadius} */}\n        {/*     tickTextOffset={16} */}\n        {/*   /> */}\n        {/* </g> */}\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：衛生福利部疾病管制署（\n    <a href=\"https://covid-19.nchc.org.tw/dt.php?dt_name=1&downloadall=yes\">\n      資料由「國家高速網路與計算中心」彙整\n    </a>\n    ）\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            這系列圖表的用意在於顯示台灣各地區疫情處於增溫或降溫的階段，同時也能作為疫病傳播情形的參考。每一個色塊代表一個縣市或鄉鎮，滑鼠移到色塊上會顯示該色塊所代表的區域一天內新增的確診案例數。\n          </p>\n          <p>\n            資料的預設範圍是「全台灣」，代表各直轄市與二級縣市的比較。點選下拉式選單則可以看到上述行政區又細分一層後的資料。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { group, stack, stackOffsetWiggle, stackOrderAscending } from \"d3\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\n// import { DataTable } from \"./DataTable\";\nimport { AreaChart } from \"./AreaChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"COVID-19 台灣各地區每日新增確診案例數比較\";\n\nconst transformData = (data, view) => {\n  let dataArray = [];\n  const groupedData = group(data, (d) => d[\"日期\"]);\n  for (let date of groupedData.keys()) {\n    let obj = { date: date };\n    const dailyCountiesData = groupedData.get(date);\n    if (view === \"全台灣\") {\n      dailyCountiesData.map(\n        ({ 縣市別, 新增確診人數 }) => (obj[縣市別] = 新增確診人數)\n      );\n    } else {\n      dailyCountiesData.map(\n        ({ 區域, 新增確診人數 }) => (obj[區域] = 新增確診人數)\n      );\n    }\n    dataArray.push(obj);\n  }\n  return dataArray;\n};\n\nexport const CasesByCountiesArea = () => {\n  const [view, setView] = useState(\"全台灣\");\n  const rawData = useData();\n  if (!rawData) return <LoadSpinner />;\n  // if (rawData) console.log(rawData);\n\n  const filteredData =\n    view === \"全台灣\"\n      ? rawData.filter((d) => d[\"區域\"] === \"全區\")\n      : rawData.filter((d) => d[\"縣市別\"] === view);\n\n  const layer = view === \"全台灣\" ? (d) => d[\"縣市別\"] : (d) => d[\"區域\"];\n  const layerGroupedData = group(filteredData, layer);\n  const layers =\n    view === \"全台灣\"\n      ? Array.from(layerGroupedData.keys())\n      : Array.from(layerGroupedData.keys()).splice(1);\n\n  const transformedData = transformData(filteredData, view);\n\n  const stackedData = stack()\n    .offset(stackOffsetWiggle)\n    .order(stackOrderAscending)\n    .keys(layers)(transformedData);\n  // console.log(stackedData);\n\n  // const tableData = [\n  //   {\n  //     heading: \"接種人數總計\",\n  //     value: data[data.length - 1].total_vaccinations.toLocaleString(),\n  //   },\n  //   {\n  //     heading: \"已接種人數\",\n  //     value: data[data.length - 1].people_vaccinated.toLocaleString(),\n  //   },\n  //   {\n  //     heading: \"充分接種人數\",\n  //     value: data[data.length - 1].people_fully_vaccinated.toLocaleString(),\n  //   },\n  // ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      {/* <DataTable items={tableData} /> */}\n      <AreaChart\n        data={filteredData}\n        stackedData={stackedData}\n        view={view}\n        setView={setView}\n      />\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://disease.sh/v3/covid-19/apple/countries/Taiwan\";\n\nconst transformData = (rawData) => {\n  return rawData.map((d) => {\n    return {\n      date: new Date(d.date),\n      driving: d.driving,\n      transit: d.transit,\n      walking: d.walking,\n      subregion_and_city: d.subregion_and_city,\n    };\n  });\n};\n\n// Data: Apple Mobility Trends in Taiwan\nexport const useData = (region, setLoading) => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    setLoading(true);\n    let isMounted = true;\n    json(`${jsonUrl}/${region}`).then((data) => {\n      if (isMounted) {\n        setData(transformData(data.data));\n        setLoading(false);\n      }\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, [region, setLoading]);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React, { useState, useEffect } from \"react\";\n\nexport const DropdownMenu = ({ dropdownItems, chosen, setChosen }) => {\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    setItems(\n      dropdownItems.map((d) => ({\n        label: d,\n        value: d,\n      }))\n    );\n  }, [dropdownItems]);\n  return (\n    <div className=\"dropdown-container\">\n      選擇區域：\n      <select value={chosen} onChange={(e) => setChosen(e.currentTarget.value)}>\n        {items.map(({ label, value }) => (\n          <option className=\"region-name\" key={label} value={value}>\n            {label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG\n      .call(xAxis)\n      .selectAll(\"text\")\n      .style(\"text-anchor\", \"end\")\n      .attr(\"dx\", \"-.8em\")\n      .attr(\"dy\", \".15em\")\n      .attr(\"transform\", \"rotate(-55)\");\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .ticks(tickCount)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const YMarkerLine = ({\n  value,\n  label,\n  yScale,\n  innerWidth,\n  labelOffset = 8,\n}) => {\n  const markerLineY = yScale(value);\n  const markerLineX1 = 0;\n  const markerLineX2 = innerWidth;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        x1={markerLineX1}\n        y1={markerLineY}\n        x2={markerLineX2}\n        y2={markerLineY}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        dominantBaseline={\"hanging\"}\n        x={labelOffset}\n        y={yScale(value) + labelOffset}\n        fontWeight=\"bold\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, height, label }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = height;\n  return (\n    <>\n      <line\n        className={styles.markerLine}\n        strokeDasharray=\"10,10\"\n        x1={markerLineX}\n        y1={markerLineY1}\n        x2={markerLineX}\n        y2={markerLineY2}\n      />\n      <text\n        className={styles.markerLineLabelStroke}\n        textAnchor={\"start\"}\n        x={markerLineX + 15}\n        y={10}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n      <text\n        className={styles.markerLineLabel}\n        textAnchor={\"start\"}\n        x={markerLineX + 15}\n        y={10}\n        writingMode=\"vertical-rl\"\n      >\n        {label}\n      </text>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legendStroke}>\n        {domainValue}\n      </text>\n      <text dy=\".32em\" x={tickTextOffset} className={styles.legend}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React, { useMemo } from \"react\";\nimport {\n  scaleLinear,\n  scaleOrdinal,\n  scaleTime,\n  line,\n  timeFormat,\n  extent,\n  schemeCategory10,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\n// import { CursorLine } from \"./CursorLine\";\nimport { YMarkerLine } from \"./YMarkerLine\";\nimport { XMarkerLine } from \"./XMarkerLine\";\n// import { RectOverlay } from \"./RectOverlay\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport styles from \"./LineChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 1;\nconst margin = { top: 20, right: 5, bottom: 80, left: 70 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%-m/%-d, %Y\");\n\nconst yValue1 = (d) => d.walking;\nconst yValue2 = (d) => d.transit;\nconst yValue3 = (d) => d.driving;\nconst yAxisLabel = \"導航使用率\";\nconst yAxisLabelOffset = 60;\nconst yAxisTickFormat = (tickValue) => tickValue.toLocaleString() + \"%\";\n\n// const ColorLegendLabel = \"接種情形\";\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\n\nexport const LineChart = ({ data }) => {\n  // Change state when different point is hovered\n  // const [activeData, setActiveData] = useState(data[data.length - 1]);\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  const legendX = margin.left + legendCircleRadius * 2;\n  const legendY = margin.top + legendItemSpacing / 2;\n\n  // X axis is time\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () => scaleLinear().domain([-100, 150]).range([innerHeight, 0]).nice(),\n    [innerHeight]\n  );\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal()\n        .domain([\"步行\", \"開車\", \"大眾交通\"])\n        .range(schemeCategory10),\n    []\n  );\n\n  // const handleHover = useCallback(setActiveData, [setActiveData]);\n\n  const lineGenerator = useMemo(\n    () =>\n      line()\n        .x((d) => xScale(xValue(d)))\n        .y((d) => yScale(yValue1(d))),\n    [xScale, yScale]\n  );\n\n  const lineGenerator2 = useMemo(\n    () =>\n      line()\n        .x((d) => xScale(xValue(d)))\n        .y((d) => yScale(yValue2(d))),\n    [xScale, yScale]\n  );\n\n  const lineGenerator3 = useMemo(\n    () =>\n      line()\n        .x((d) => xScale(xValue(d)))\n        .y((d) => yScale(yValue3(d))),\n    [xScale, yScale]\n  );\n  // const Tooltip = ({ activeData, scaleValue, className, position }) => (\n  //   <text\n  //     className={className}\n  //     textAnchor={\"middle\"}\n  //     dominantBaseline={\"middle\"}\n  //     x={0}\n  //     y={position === \"down\" ? 40 : -15}\n  //   >\n  //     <tspan x=\"0\" dy=\"0\" fontWeight=\"bold\">\n  //       {scaleValue(activeData) &&\n  //         `${scaleValue(activeData).toLocaleString()}%`}\n  //     </tspan>\n  //     {position === \"up\" ? (\n  //       <tspan x=\"0\" dy=\"-1.3em\">\n  //         {xTooltipFormat(activeData.date)}\n  //       </tspan>\n  //     ) : null}\n  //   </text>\n  // );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          <text\n            className={styles.axisLabel}\n            textAnchor=\"middle\"\n            transform={`translate(${-yAxisLabelOffset}, ${innerHeight / 2})`}\n            writingMode=\"vertical-lr\"\n          >\n            {yAxisLabel}\n          </text>\n          <g className={styles.line}>\n            <path d={lineGenerator(data)} stroke={colorScale(\"步行\")} />\n          </g>\n          <g className={styles.line}>\n            <path d={lineGenerator3(data)} stroke={colorScale(\"開車\")} />\n          </g>\n          <g className={styles.line}>\n            <path d={lineGenerator2(data)} stroke={colorScale(\"大眾交通\")} />\n          </g>\n          <YMarkerLine value={0} yScale={yScale} innerWidth={innerWidth} />\n          <XMarkerLine\n            value={new Date(\"2021-05-15T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"雙北實施三級警戒\"}\n          />\n          <XMarkerLine\n            value={new Date(\"2021-07-27T00:00\")}\n            xScale={xScale}\n            height={innerHeight}\n            label={\"全國三級警戒解除\"}\n          />\n          {/* {activeData ? ( */}\n          {/*   <> */}\n          {/*     <CursorLine */}\n          {/*       value={activeData.date} */}\n          {/*       xScale={xScale} */}\n          {/*       innerHeight={innerHeight} */}\n          {/*     /> */}\n          {/*     <g */}\n          {/*       transform={`translate(${lineGenerator.x()( */}\n          {/*         activeData */}\n          {/*       )}, ${lineGenerator.y()(activeData)})`} */}\n          {/*     > */}\n          {/*       <circle className={styles.dataPoint} r={5} /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue1} */}\n          {/*         className={styles.tooltipStroke} */}\n          {/*         position=\"up\" */}\n          {/*       /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue1} */}\n          {/*         className={styles.tooltip} */}\n          {/*         position=\"up\" */}\n          {/*       /> */}\n          {/*     </g> */}\n          {/*     <g */}\n          {/*       transform={`translate(${lineGenerator.x()( */}\n          {/*         activeData */}\n          {/*       )}, ${lineGenerator2.y()(activeData)})`} */}\n          {/*     > */}\n          {/*       <circle className={styles.dataPoint} r={5} /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue2} */}\n          {/*         className={styles.tooltipStroke} */}\n          {/*         position=\"down\" */}\n          {/*       /> */}\n          {/*       <Tooltip */}\n          {/*         activeData={activeData} */}\n          {/*         scaleValue={yValue2} */}\n          {/*         className={styles.tooltip} */}\n          {/*         position=\"down\" */}\n          {/*       /> */}\n          {/*     </g> */}\n          {/*   </> */}\n          {/* ) : null} */}\n          {/* <RectOverlay */}\n          {/*   onHover={handleHover} */}\n          {/*   data={data} */}\n          {/*   lineGenerator={lineGenerator} */}\n          {/*   innerWidth={innerWidth} */}\n          {/*   innerHeight={innerHeight} */}\n          {/* /> */}\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          {/* <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n          {/*   {ColorLegendLabel} */}\n          {/* </text> */}\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    資料來源：Apple Mobility Trends Reports（API by{\" \"}\n    <a href=\"https://disease.sh/\">disease.sh</a>）\n  </p>\n);\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        這張圖表可以怎麼看？\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>這張圖表主要用來觀察台灣的疫情與人民外出情形之間的關係。</p>\n          <p>\n            Apple公開了各個地區使用「Apple地圖」導航功能的頻繁程度，藉以判斷外出的人流是否增加或減少。正如導航所提供的功能，數據也區分為「步行」、「開車」、「大眾交通」三種，一般人通常要到陌生的地方或走不熟悉的路線才會開導航，因此用這些數據來判斷「不必要的移動」頗為合適。\n          </p>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useRegions } from \"./useRegions\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DropdownMenu } from \"./DropdownMenu\";\nimport { DataTable } from \"./DataTable\";\nimport { LineChart } from \"./LineChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst title = \"Apple 導航使用趨勢在台灣\";\n\nexport const TaiwanMobilityLine = () => {\n  const [view, setView] = useState(\"All\");\n  const [loading, setLoading] = useState(true);\n  const regions = useRegions();\n  const data = useData(view, setLoading);\n  // if (data) console.log(data[0]);\n  if (!regions || !data) return <LoadSpinner />;\n  const filteredData = data.filter((obj) => obj.date >= new Date(\"2021-01-01\"));\n\n  const tableData = [\n    {\n      heading: \"步行導航使用率\",\n      value:\n        data[data.length - 1].walking >= 0\n          ? \"+\" + data[data.length - 1].walking.toLocaleString() + \"%\"\n          : data[data.length - 1].walking.toLocaleString() + \"%\",\n    },\n    {\n      heading: \"開車導航使用率\",\n      value:\n        data[data.length - 1].driving >= 0\n          ? \"+\" + data[data.length - 1].driving.toLocaleString() + \"%\"\n          : data[data.length - 1].driving.toLocaleString() + \"%\",\n    },\n    {\n      heading: \"大眾交通導航使用率\",\n      value: data[data.length - 1].transit\n        ? data[data.length - 1].transit >= 0\n          ? \"+\" + data[data.length - 1].transit.toLocaleString() + \"%\"\n          : data[data.length - 1].transit.toLocaleString() + \"%\"\n        : \"無資料\",\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DropdownMenu\n        dropdownItems={regions.subregions}\n        chosen={view}\n        setChosen={setView}\n      />\n      {loading ? (\n        <LoadSpinner />\n      ) : (\n        <>\n          <DataTable items={tableData} />\n          <LineChart data={filteredData} />\n        </>\n      )}\n      <pre>{`資料時間：${data[data.length - 1].date.toLocaleDateString(\n        \"zh-TW\"\n      )}`}</pre>\n      <Collapsible id={title} />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://disease.sh/v3/covid-19/apple/countries/TW\";\n\n// Data: Covid vaccinations in Taiwan\nexport const useRegions = () => {\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((data) => {\n      // console.log(data);\n      if (isMounted) setData(data);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\nimport { Card } from \"../elements/CommonUIs\";\nimport { TaiwanOverviewPie } from \"./TaiwanOverviewPie/index\";\nimport { TaiwanTestsOverviewPie } from \"./TaiwanTestsOverviewPie/index\";\nimport { TaiwanNewCasesArea } from \"./TaiwanNewCasesArea/index\";\nimport { TaiwanVaccinationArea } from \"./TaiwanVaccinationArea/index\";\nimport { ChoroplethMap } from \"./ChoroplethMap/index\";\nimport { CFRByGroupsBar } from \"./CFRByGroupsBar/index\";\nimport { CasesByCountiesArea } from \"./CasesByCountiesArea/index\";\nimport { TaiwanMobilityLine } from \"./TaiwanMobilityLine/index\";\n// import { VaccinationRateByCountiesBar } from \"./VaccinationRateByCountiesBar/index\";\n\nexport const TaiwanView = () => (\n  <ul className=\"flex-card-list\">\n    <Card>\n      <TaiwanOverviewPie />\n    </Card>\n    <Card>\n      <TaiwanTestsOverviewPie />\n    </Card>\n    <Card>\n      <TaiwanNewCasesArea />\n    </Card>\n    <Card>\n      <CasesByCountiesArea />\n    </Card>\n    <Card>\n      <ChoroplethMap />\n    </Card>\n    <Card>\n      <CFRByGroupsBar />\n    </Card>\n    <Card>\n      <TaiwanVaccinationArea />\n    </Card>\n    <Card>\n      <TaiwanMobilityLine />\n    </Card>\n    {/* <Card> */}\n    {/*   <VaccinationRateByCountiesBar /> */}\n    {/* </Card> */}\n  </ul>\n);\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport * as V from \"victory\";\n\n// Helper function\nconst CheckError = (response) => {\n  if (response.ok) {\n    return response.json();\n  } else {\n    throw Error(response.statusText);\n  }\n};\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\n// Transposes {'Key': 'Value'} to {x: key, y:value}\nconst transposeKeyValue = (data) =>\n  Object.entries(data).map(([key, value]) => ({\n    // Shortens date string\n    // x: key.replace(/\\/\\d{2}$/g, \"\"),\n    x: key,\n    y: value,\n  }));\n\n// Calculates daily new cases & deaths\nconst calDailyDifference = (data) =>\n  data.map((cur, index, array) => ({\n    ...cur,\n    y: index > 0 ? cur.y - array[index - 1].y : 0,\n  }));\n\nconst calPercentage = (numerator, denominator) =>\n  Number(((numerator / denominator) * 100).toFixed(2));\n\n// API Users\n// Generic hook to fetch data v1\nconst useDataApi = (initialUrl, initialData, transformFn) => {\n  const [data, setData] = useState(initialData);\n  const [url, setUrl] = useState(initialUrl);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n  useEffect(() => {\n    let isMounted = true;\n    const fetchData = async () => {\n      try {\n        const data = await fetch(url).then(CheckError);\n        if (isMounted) setData((transformFn && transformFn(data)) || data);\n      } catch (error) {\n        if (isMounted) setIsError(true);\n        console.error(error);\n      }\n      if (isMounted) setIsLoading(false);\n    };\n    fetchData();\n    return () => {\n      isMounted = false;\n    };\n  }, [transformFn, url]);\n  return [{ data, isLoading, isError }, setUrl];\n};\n\n//const dataFetchReducer = (state, action) => {\n//switch (action.type) {\n//case \"FETCH_INIT\":\n//return {\n//...state,\n//isLoading: true,\n//isError: false\n//};\n//case \"FETCH_SUCCESS\":\n//return {\n//...state,\n//isLoading: false,\n//isError: false,\n//data: action.payload\n//};\n//case \"FETCH_FAILURE\":\n//return {\n//...state,\n//isLoading: false,\n//isError: true\n//};\n//default:\n//throw new Error();\n//}\n//};\n\n//const useDataApiReducer = (initialUrl, initialData, transformFn) => {\n//console.log(\"API reducer called!\");\n//const [url, setUrl] = useState(initialUrl);\n//const [state, dispatch] = useReducer(dataFetchReducer, {\n//isLoading: true,\n//isError: false,\n//data: initialData\n//});\n//useEffect(() => {\n//const fetchData = async () => {\n//dispatch({ type: \"FETCH_INIT\" });\n//console.log(\"reducer init!\");\n//try {\n//const data = await fetch(url).then(CheckError);\n//dispatch({\n//type: \"FETCH_SUCCESS\",\n//payload: (transformFn && transformFn(data)) || data\n//});\n//console.log(\"reducer fetched!\");\n//} catch (error) {\n//dispatch({ type: \"FETCH_FAILURE\" });\n//}\n//};\n//fetchData();\n//}, [transformFn, url]);\n//console.log(\"reducer state:\", state);\n//return [state, setUrl];\n//};\n\n// SMALL COMPONENTS / HELPER FUNCTIONS\nconst CountriesDropDownMenu = ({ data, chosen, setChosen }) => {\n  const [items, setItems] = useState([]);\n  useEffect(() => {\n    setItems(\n      data.map((d) => ({\n        label: d.province ? d.province + \", \" + d.country : d.country,\n        value: d.province ? d.province : d.country,\n      }))\n    );\n  }, [data]);\n  return (\n    <div className=\"dropdown-container\">\n      Select:{\" \"}\n      <select value={chosen} onChange={(e) => setChosen(e.currentTarget.value)}>\n        {items.map(({ label, value }) => (\n          <option className=\"region-name\" key={label} value={value}>\n            {label}\n          </option>\n        ))}\n      </select>\n    </div>\n  );\n};\n\nconst BarChart = ({ data, x, y }) => {\n  const axis_style = {\n    grid: {\n      stroke: \"#f3f5f6\",\n      strokeWidth: 2,\n      strokeDasharray: \"15,15\",\n    },\n  };\n  return (\n    <div className=\"bar-chart\">\n      <V.VictoryChart\n        containerComponent={\n          <V.VictoryVoronoiContainer\n            labels={({ datum }) =>\n              datum.x ? `${datum.x}: ${datum._y}` : `${datum[x]}: ${datum._y}`\n            }\n            labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n          />\n        }\n        padding={{ top: 20, bottom: 40, left: 60, right: 20 }}\n      >\n        <V.VictoryAxis fixLabelOverlap />\n        <V.VictoryAxis dependentAxis fixLabelOverlap style={axis_style} />\n        <V.VictoryBar data={data} x={x} y={y} />\n      </V.VictoryChart>\n    </div>\n  );\n};\n\nconst LoadingSpinner = () => {\n  return (\n    <div className=\"lds-spinner\">\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n      <div></div>\n    </div>\n  );\n};\n\nconst RadioButton = (props) => {\n  return (\n    <div className=\"radio-btn\">\n      <input\n        id={props.id}\n        type=\"radio\"\n        onChange={props.changed}\n        checked={props.isSelected}\n      />\n      <label htmlFor={props.id}>{props.label}</label>\n    </div>\n  );\n};\n\nconst SmallTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item) => (\n              <th key={item.heading}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.datum.toLocaleString()}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\n// Charts\nconst DailyLineChartInAnArea = ({ chart_type }) => {\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v3/covid-19/historical?lastdays=90\",\n    null\n  );\n  const [chosen, setChosen] = useState(\"Japan\");\n  const [lineData, setLineData] = useState({});\n  // if (data) console.log(data[0]);\n\n  const CHART_TYPES = {\n    newCases: \"Daily New Cases in \",\n    newDeaths: \"Daily Deaths in \",\n    deathRate: \"Fatality Rate in \",\n  };\n  const ChartTitle = ({ chart_type, area_name }) => {\n    return (\n      <div className=\"chart-title\">\n        {CHART_TYPES[chart_type]}\n        {area_name}\n      </div>\n    );\n  };\n  const getSTItems = (chart_type, data) =>\n    ({\n      newCases: [\n        {\n          heading: \"Total cases\",\n          datum: data.cases ? data.cases.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"New cases\",\n          datum: data.newCases ? data.newCases.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Growth Factor\",\n          datum: data.newCases\n            ? (\n                sumValuesInObject(data.newCases.slice(-7), \"y\") /\n                sumValuesInObject(data.newCases.slice(-14, -7), \"y\")\n              ).toFixed(2)\n            : \"loading\",\n        },\n      ],\n      newDeaths: [\n        {\n          heading: \"Total deaths\",\n          datum: data.deaths ? data.deaths.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"New deaths\",\n          datum: data.newDeaths ? data.newDeaths.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Fatality Rate\",\n          datum: data.deathRate\n            ? data.deathRate.slice(-1)[0].y + \"%\"\n            : \"loading\",\n        },\n      ],\n      deathRate: [\n        {\n          heading: \"Confirmed\",\n          datum: data.cases ? data.cases.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Deaths\",\n          datum: data.deaths ? data.deaths.slice(-1)[0].y : \"loading\",\n        },\n        {\n          heading: \"Fatality Rate\",\n          datum: data.deathRate\n            ? data.deathRate.slice(-1)[0].y + \"%\"\n            : \"loading\",\n        },\n      ],\n    }[chart_type]);\n  useEffect(() => {\n    if (data) {\n      let found = data.find(\n        (obj) =>\n          obj.province === chosen || (!obj.province && obj.country === chosen)\n      );\n      let cases = transposeKeyValue(found.timeline.cases);\n      let deaths = transposeKeyValue(found.timeline.deaths);\n      let new_cases = calDailyDifference(cases);\n      let new_deaths = calDailyDifference(deaths);\n      let death_rate = cases.map((cur, index) => ({\n        x: cur.x,\n        y: calPercentage(deaths[index].y, cur.y) || 0,\n      }));\n      setLineData({\n        country: found.country,\n        province: found.province,\n        cases: cases,\n        deaths: deaths,\n        newCases: new_cases,\n        newDeaths: new_deaths,\n        deathRate: death_rate,\n      });\n    }\n  }, [data, chosen]);\n  return (\n    <>\n      <div className=\"chart-container\">\n        <ChartTitle\n          chart_type={chart_type}\n          area_name={\n            lineData.province\n              ? lineData.province + \", \" + lineData.country\n              : lineData.country\n          }\n        />\n        {isError && <div>Something went wrong</div>}\n        {isLoading ? (\n          <LoadingSpinner />\n        ) : (\n          <>\n            <CountriesDropDownMenu\n              data={data}\n              chosen={chosen}\n              setChosen={setChosen}\n            />\n            <SmallTable items={getSTItems(chart_type, lineData)} />\n            <BarChart data={lineData[chart_type]} />\n            <p className=\"footnote\">\n              Source: John Hopkins University CSSE (\n              <a href=\"https://github.com/NovelCOVID/API\">NovelCOVID/API</a>)\n            </p>\n          </>\n        )}\n      </div>\n    </>\n  );\n};\n\n//const ConfirmedCasesChinaVsWorldLineChart = () => {\n//const replaceDate = dataItem => ({\n//...dataItem,\n//reportDate: dataItem.reportDate.replace(/-/g, \"/\").replace(/^\\d{4}\\//g, \"\")\n//});\n//const transformFn = useCallback(data => data.map(replaceDate), []);\n//const [{ data, isLoading, isError }] = useDataApi(\n//\"https://covid.mathdro.id/api/daily\",\n//[],\n//transformFn\n//);\n//return (\n//<>\n//{isError && <div>Something went wrong</div>}\n//<div className=\"chart-title\">Confirmed Cases</div>\n//{isLoading ? (\n//<LoadingSpinner />\n//) : (\n//<>\n//<SmallTable\n//items={[\n//{ heading: \"China\", datum: data.slice(-1)[0].mainlandChina },\n//{\n//heading: \"Other\",\n//datum: data.slice(-1)[0].otherLocations\n//}\n//]}\n///>\n//<div className=\"line-chart\">\n//<V.VictoryChart\n//containerComponent={\n//<V.VictoryVoronoiContainer\n//labels={({ datum }) => `${datum[\"reportDate\"]}: ${datum._y}`}\n//labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n///>\n//}\n//padding={{ top: 20, bottom: 40, left: 60, right: 20 }}\n//>\n//<V.VictoryAxis fixLabelOverlap />\n//<V.VictoryAxis\n//dependentAxis\n//fixLabelOverlap\n//style={{\n//grid: {\n//stroke: \"#f3f5f6\",\n//strokeWidth: 2,\n//strokeDasharray: \"15,15\"\n//}\n//}}\n///>\n//<V.VictoryGroup colorScale={[\"#fb6361\", \"black\"]}>\n//<V.VictoryLine data={data} x=\"reportDate\" y=\"mainlandChina\" />\n//<V.VictoryLine data={data} x=\"reportDate\" y=\"otherLocations\" />\n//</V.VictoryGroup>\n//<V.VictoryLegend\n//colorScale={[\"#fb6361\", \"black\"]}\n//x={60}\n//y={20}\n//data={[{ name: \"China\" }, { name: \"Other Countries\" }]}\n///>\n//</V.VictoryChart>\n//</div>\n//<p className=\"footnote\">\n//Source: Johns Hopkins University Center for Systems Science and\n//Engineering (\n//<a href=\"https://github.com/mathdroid/covid-19-api\">\n//mathdroid/covid-19-api\n//</a>\n//)\n//</p>\n//</>\n//)}\n//</>\n//);\n//};\n\nconst ConfirmedCasesInSelectedCountriesLineChart = () => {\n  const [data, setData] = useState([\n    {\n      province: \"\",\n      country: \"\",\n      Lat: 0,\n      Long: 0,\n      confirmed: [],\n    },\n  ]);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    let isMounted = true;\n\n    async function getData() {\n      try {\n        if (isMounted) setIsLoading(true);\n        const response = await fetch(`/confirmed_timeseries`);\n        const data = await response.json();\n        // Areas selected arbitrarily\n        // TODO: An UI for user to choose which areas to be shown\n        const areas_to_find = [\n          \"US\",\n          \"Brazil\",\n          \"France\",\n          \"Colombia\",\n          \"Russia\",\n          \"South Africa\",\n          \"India\",\n          \"Peru\",\n        ];\n        let areas_data = [];\n        for (let area of areas_to_find) {\n          let found = data.data.find(\n            (obj) =>\n              obj.province === area || (!obj.province && obj.country === area)\n          );\n          areas_data.push(found);\n        }\n        if (isMounted) setData(areas_data);\n        if (isMounted) setIsLoading(false);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n    getData();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return (\n    <>\n      <div className=\"chart-title\">Confirmed Cases in Selected Countries</div>\n      <div className=\"line-chart\">\n        {isLoading ? (\n          <LoadingSpinner />\n        ) : (\n          <V.VictoryChart\n            containerComponent={\n              <V.VictoryVoronoiContainer\n                labels={({ datum }) => datum._y}\n                labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n              />\n            }\n            padding={{ top: 20, bottom: 40, left: 80, right: 20 }}\n            scale={{ x: \"time\", y: \"linear\" }}\n            minDomain={{ x: 30 }}\n          >\n            <V.VictoryAxis fixLabelOverlap />\n            <V.VictoryAxis\n              dependentAxis\n              fixLabelOverlap\n              style={{\n                grid: {\n                  stroke: \"#f3f5f6\",\n                  strokeWidth: 2,\n                  strokeDasharray: \"15,15\",\n                },\n              }}\n            />\n            <V.VictoryGroup colorScale={\"qualitative\"}>\n              {data.map((d) => (\n                <V.VictoryLine\n                  key={d.province ? d.province : d.country}\n                  data={d.confirmed}\n                />\n              ))}\n            </V.VictoryGroup>\n            <V.VictoryLegend\n              colorScale={\"qualitative\"}\n              orientation=\"horizontal\"\n              itemsPerRow={3}\n              x={80}\n              y={20}\n              data={data.map((d) => ({\n                name: d.province ? d.province : d.country,\n              }))}\n            />\n          </V.VictoryChart>\n        )}\n      </div>\n      <p className=\"footnote\">\n        Source: Johns Hopkins University Center for Systems Science and\n        Engineering (\n        <a href=\"https://github.com/CSSEGISandData/COVID-19\">\n          CSSEGISandData/COVID-19\n        </a>\n        )\n      </p>\n    </>\n  );\n};\n\nconst AreasWithOutstandingCasesTable = () => {\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v3/covid-19/countries?yesterday=true\",\n    []\n  );\n  const [sortBy, setSortBy] = useState(\"cases\");\n  return (\n    <>\n      <div className=\"chart-title\">Areas with Outstanding Cases</div>\n      {isError && <div>Something went wrong</div>}\n      {isLoading ? (\n        <LoadingSpinner />\n      ) : (\n        <>\n          <div className=\"radio-btn-container\">\n            <RadioButton\n              id=\"1\"\n              changed={() => setSortBy(\"cases\")}\n              isSelected={sortBy === \"cases\" ? true : false}\n              label=\"Total cases\"\n            />\n            <RadioButton\n              id=\"2\"\n              changed={() => setSortBy(\"deaths\")}\n              isSelected={sortBy === \"deaths\" ? true : false}\n              label=\"Total deaths\"\n            />\n            <RadioButton\n              id=\"3\"\n              changed={() => setSortBy(\"todayCases\")}\n              isSelected={sortBy === \"todayCases\" ? true : false}\n              label=\"New cases\"\n            />\n            <RadioButton\n              id=\"4\"\n              changed={() => setSortBy(\"todayDeaths\")}\n              isSelected={sortBy === \"todayDeaths\" ? true : false}\n              label=\"New deaths\"\n            />\n          </div>\n          <div className=\"area-data-sets\">\n            {data\n              .sort((a, b) => b[sortBy] - a[sortBy])\n              .slice(0, 12)\n              .map((d) => (\n                <div className=\"data-set\" key={d.country}>\n                  <div className=\"country-name vertical-inverted-title\">\n                    {d.country}\n                  </div>\n                  <div className=\"set-title\">Confirmed</div>\n                  <div className=\"confirmed-count numerical-data\">\n                    {d.cases.toLocaleString()}\n                  </div>\n                  <div className=\"smaller-numbers numerical-data\">\n                    (+{d.todayCases.toLocaleString()})\n                  </div>\n                  <div className=\"set-title\">Deaths</div>\n                  <div className=\"dead-count numerical-data\">\n                    {d.deaths.toLocaleString()}\n                  </div>\n                  <div className=\"smaller-numbers numerical-data\">\n                    (+{d.todayDeaths.toLocaleString()})\n                  </div>\n                  <div className=\"set-title\">Death Rate</div>\n                  <div className=\"current-dead-rate numerical-data\">\n                    {calPercentage(d.deaths, d.cases)}%\n                  </div>\n                </div>\n              ))}\n          </div>\n          <p className=\"footnote\">\n            Source: Johns Hopkins University Center for Systems Science and\n            Engineering (\n            <a href=\"https://github.com/NovelCOVID/API\">NovelCOVID / API</a>)\n          </p>\n        </>\n      )}\n    </>\n  );\n};\n\nconst FatalityRatioByAgeGroupInHubei = () => {\n  const data = [\n    { x: \"0-9\", y: 0.000094 },\n    { x: \"10-19\", y: 0.022 },\n    { x: \"20-29\", y: 0.091 },\n    { x: \"30-39\", y: 0.18 },\n    { x: \"40-49\", y: 0.4 },\n    { x: \"50-59\", y: 1.3 },\n    { x: \"60-69\", y: 4.6 },\n    { x: \"70-79\", y: 9.8 },\n    { x: \"80+\", y: 18 },\n  ];\n  return (\n    <>\n      <div className=\"chart-title\">\n        Fatality Ratio by Age Group in Hubei, China\n      </div>\n      <div className=\"bar-chart\">\n        <V.VictoryChart\n          domainPadding={{ x: 10 }}\n          padding={{ top: 15, bottom: 40, left: 50, right: 50 }}\n        >\n          <V.VictoryAxis\n            dependentAxis\n            style={{\n              grid: {\n                stroke: \"#f3f5f6\",\n                strokeWidth: 2,\n                strokeDasharray: \"15,15\",\n              },\n            }}\n          />\n          <V.VictoryBar\n            horizontal\n            barRatio={0.8}\n            data={data}\n            labels={({ datum }) => datum.y + \"%\"}\n          />\n          <V.VictoryAxis />\n        </V.VictoryChart>\n        <p className=\"footnote\">\n          Source: WHO;{\" \"}\n          <a href=\"https://www.medrxiv.org/content/10.1101/2020.03.04.20031104v1.full.pdf\">\n            \"ADJUSTED AGE-SPECIFIC CASE FATALITY RATIO DURING THE COVID-19\n            EPIDEMIC IN HUBEI, CHINA, JANUARY AND FEBRUARY 2020\" by Riou et al.\"\n          </a>\n        </p>\n      </div>\n    </>\n  );\n};\n\n//const FatalityRateInAnAreaLineChart = ({ area }) => {\n//const [data, setData] = useState({ areaName: \"\", statisticsData: [] });\n//const [isLoading, setIsLoading] = useState(true);\n//useEffect(() => {\n//async function getData() {\n//try {\n//setIsLoading(true);\n//const response = await fetch(`area_timeseries?area=${area}`);\n//const data = await response.json();\n//setData(data);\n//setIsLoading(false);\n//} catch (error) {\n//console.error(error);\n//}\n//}\n//getData();\n//}, [area]);\n//return (\n//<>\n//<div className=\"chart-title\">Fatality Rate in {data.areaName}</div>\n//{isLoading ? (\n//<LoadingSpinner />\n//) : (\n//<>\n//<SmallTable\n//items={[\n//{\n//heading: \"Confirmed\",\n//datum: data.statisticsData.slice(-1)[0].confirmedCount\n//},\n//{\n//heading: \"Deaths\",\n//datum: data.statisticsData.slice(-1)[0].deadCount\n//},\n//{\n//heading: \"Fatality Rate\",\n//datum: data.statisticsData.slice(-1)[0].deathRate + \"%\"\n//}\n//]}\n///>\n//<BarChart data={data.statisticsData} x=\"dateId\" y=\"deathRate\" />\n//<p className=\"footnote\">\n//Source: 丁香園（\n//<a href=\"https://github.com/BlankerL/DXY-COVID-19-Crawler\">\n//DXY-COVID-19-Crawler\n//</a>\n//）\n//</p>\n//</>\n//)}\n//</>\n//);\n//};\n\nconst DailyNewCasesWorldwideLineChart = () => {\n  const VictoryZoomVoronoiContainer = V.createContainer(\"zoom\", \"voronoi\");\n  const transformFn = useCallback((data) => {\n    if (data) {\n      let cases = transposeKeyValue(data.cases);\n      let deaths = transposeKeyValue(data.deaths);\n      let new_cases = calDailyDifference(cases);\n      let new_deaths = calDailyDifference(deaths);\n      return { cases, deaths, new_cases, new_deaths };\n    }\n  }, []);\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v3/covid-19/historical/all?lastdays=all\",\n    [],\n    transformFn\n  );\n  const axis_style = {\n    grid: {\n      stroke: \"#f3f5f6\",\n      strokeWidth: 2,\n      strokeDasharray: \"15,15\",\n    },\n  };\n  return (\n    <>\n      <div className=\"chart-title\">Daily New Cases Worldwide</div>\n      {isError && <div>Something went wrong</div>}\n      {isLoading ? (\n        <LoadingSpinner />\n      ) : (\n        <>\n          <SmallTable\n            items={[\n              {\n                heading: \"2 days ago\",\n                datum: data ? data.new_cases.slice(-2)[0].y : \"loading\",\n              },\n              {\n                heading: \"Yesterday\",\n                datum: data ? data.new_cases.slice(-1)[0].y : \"loading\",\n              },\n              {\n                heading: \"Growth Factor\",\n                datum: data\n                  ? (\n                      data.new_cases.slice(-1)[0].y /\n                      data.new_cases.slice(-2)[0].y\n                    ).toFixed(2)\n                  : \"loading\",\n              },\n            ]}\n          />\n          <div className=\"line-chart\">\n            <V.VictoryChart\n              containerComponent={\n                //<V.VictoryVoronoiContainer\n                //labels={({ datum }) => `${datum.x}: ${datum._y}`}\n                //labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n                ///>\n                //<V.VictoryZoomContainer\n                //allowZoom={false}\n                //zoomDomain={{ x: [10, 200] }}\n                ///>\n                <VictoryZoomVoronoiContainer\n                  labels={({ datum }) => `${datum.x}: ${datum._y}`}\n                  labelComponent={<V.VictoryTooltip constrainToVisibleArea />}\n                  zoomDomain={{\n                    x: [data.new_cases.length - 120, data.new_cases.length],\n                  }}\n                  zoomDimension=\"x\"\n                />\n              }\n              height={400}\n              padding={{ top: 30, bottom: 40, left: 70, right: 0 }}\n            >\n              <V.VictoryAxis dependentAxis fixLabelOverlap style={axis_style} />\n              <V.VictoryArea data={data.new_cases} />\n              <V.VictoryAxis fixLabelOverlap />\n            </V.VictoryChart>\n          </div>\n          <p className=\"footnote\">\n            Source: Johns Hopkins University Center for Systems Science and\n            Engineering (<a href=\"https://disease.sh/\">Novel COVID API</a>)\n          </p>\n        </>\n      )}\n    </>\n  );\n};\n\nconst WorldwideRecoveryProgressPieChart = () => {\n  const [{ data, isLoading, isError }] = useDataApi(\n    \"https://disease.sh/v2/all\",\n    []\n  );\n  const pieData = [\n    { x: \"Recovered\", y: data.recovered },\n    { x: \"Sick\", y: data.active },\n    { x: \"Deaths\", y: data.deaths },\n  ];\n  return (\n    <>\n      <div className=\"chart-title\">Worldwide Recovery Progress</div>\n      {isError && <div>Something went wrong</div>}\n      {isLoading ? (\n        <LoadingSpinner />\n      ) : (\n        <>\n          <SmallTable items={[{ heading: \"All cases\", datum: data.cases }]} />\n          <div className=\"pie-chart\">\n            <svg className=\"pie\" width={272} height={320}>\n              <V.VictoryLabel\n                textAnchor=\"middle\"\n                x={136}\n                y={160}\n                style={{ fontSize: 28, fill: \"#85b135\" }}\n                text={calPercentage(data.recovered, data.cases) + \"%\"}\n              />\n              <V.VictoryPie\n                colorScale={[\"#85b135\", \"#fb6361\", \"#073f5c\"]}\n                padding={{ left: 68, right: 68 }}\n                innerRadius={52}\n                width={272}\n                height={320}\n                standalone={false}\n                data={pieData}\n                labels={({ datum }) =>\n                  `${datum.x}:\\n${datum.y.toLocaleString()}\\n` +\n                  \"(\" +\n                  calPercentage(datum.y, data.cases) +\n                  \"%)\"\n                }\n              />\n            </svg>\n            <p className=\"footnote\">\n              Source: Johns Hopkins University Center for Systems Science and\n              Engineering (<a href=\"https://disease.sh/\">Novel COVID API</a>)\n            </p>\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nexport {\n  AreasWithOutstandingCasesTable,\n  DailyLineChartInAnArea,\n  //ConfirmedCasesChinaVsWorldLineChart,\n  ConfirmedCasesInSelectedCountriesLineChart,\n  FatalityRatioByAgeGroupInHubei,\n  DailyNewCasesWorldwideLineChart,\n  WorldwideRecoveryProgressPieChart,\n};\n","import React from \"react\";\n\n// SMALL COMPONENTS / HELPER FUNCTIONS\nfunction getToday() {\n  var time = new Date();\n  var year = time.getFullYear();\n  var month = time.getMonth() + 1;\n  var date = time.getDate();\n  var formattedDate = year + \"/\" + month + \"/\" + date;\n  return formattedDate;\n}\n\nexport const AppTitle = () => {\n  return (\n    <div className=\"app-title\">\n      <h1>\n        Covid<span className=\"title-numerals\">-19</span> Dashboard\n      </h1>\n      <h2 className=\"title-date\">{getToday()}</h2>\n    </div>\n  );\n};\n","import React from \"react\";\n// import PropTypes from \"prop-types\";\nimport { setCookie } from \"../utils/useCookies\";\n\nexport const NavBar = ({ view, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const buttons = [\n    {\n      name: \"Global\",\n      view_name: \"global\",\n      className: view === \"global\" ? \"active view-button\" : \"view-button\",\n    },\n    {\n      name: \"台灣版\",\n      view_name: \"taiwan\",\n      className: view === \"taiwan\" ? \"active view-button\" : \"view-button\",\n    },\n  ];\n\n  return (\n    <div className=\"nav\">\n      {buttons.map((button) => (\n        <ViewButton setView={setView} {...button} key={button.view_name} />\n      ))}\n    </div>\n  );\n};\n\nconst ViewButton = ({ name, view_name, className, setView }) => {\n  // A series of buttons to switch between views of charts.\n  const handleClick = (e) => {\n    e.preventDefault();\n    setCookie(\"view\", view_name);\n    setView(view_name);\n  };\n  // Changes the button label according to current view.\n  return (\n    <button onClick={handleClick} type=\"button\" className={className}>\n      {name}\n    </button>\n  );\n};\n","import React from \"react\";\nimport styles from \"./OverviewPie.module.css\";\nexport const ColorLegend = ({\n  colorScale,\n  tickSpacing = 20,\n  tickSize = 10,\n  tickTextOffset = 20,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorScale.domain().map((domainValue, index) => (\n    <g\n      key={colorScale(domainValue)}\n      className={styles.legend}\n      transform={`translate(0, ${index * tickSpacing})`}\n      onMouseEnter={() => onHover(domainValue)}\n      onMouseLeave={() => onHover(null)}\n      opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n    >\n      <circle fill={colorScale(domainValue)} r={tickSize}></circle>\n      <text dy=\".32em\" x={tickTextOffset}>\n        {domainValue}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\n\nexport const DataTable = ({ items, dataType, dataValue }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            <th>Total</th>\n            {/* {items.map((item) => ( */}\n            {/*   <th key={dataType(item)}>{dataType(item)}</th> */}\n            {/* ))} */}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td className=\"numerical-data\">\n              {items.reduce((acc, cur) => acc + cur.value, 0).toLocaleString()}\n            </td>\n            {/* {items.map((item, index) => ( */}\n            {/*   <td className=\"numerical-data\" key={index}> */}\n            {/*     {dataValue(item).toLocaleString()} */}\n            {/*   </td> */}\n            {/* ))} */}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React from \"react\";\nexport const PieLabel = ({\n  pieLabelPosition,\n  dataValue,\n  d,\n  percentage,\n  className,\n  labelOffsetY = 18,\n}) => (\n  <text\n    className={className}\n    transform={`translate(${pieLabelPosition})`}\n    textAnchor=\"middle\"\n    dominantBaseline=\"middle\"\n  >\n    <tspan className=\"num\" x=\"0\" dy={-labelOffsetY} fill=\"black\">\n      {percentage}%\n    </tspan>\n    <tspan x=\"0\" dy={labelOffsetY} fill=\"#635F5D\">\n      {dataValue(d.data).toLocaleString()}\n    </tspan>\n  </text>\n);\n","import React from \"react\";\nimport { sum } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { PieLabel } from \"./PieLabel.jsx\";\nexport const PieChart = ({\n  pieData,\n  pieArc,\n  colorPie,\n  colorValue,\n  dataType,\n  dataValue,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  colorPie(pieData).map((d) => {\n    const domainValue = dataType(d.data);\n    let pieLabelPosition = pieArc.centroid(d);\n    if (d.endAngle - d.startAngle < 0.25) {\n      pieLabelPosition[0] *= 2.2;\n      pieLabelPosition[1] *= 2.2;\n    }\n    const dataPercentage = (\n      (dataValue(d.data) / sum(pieData, (d) => d.value)) *\n      100\n    ).toFixed(1);\n    return (\n      <g\n        className={styles.pieChart}\n        opacity={hoveredValue && domainValue !== hoveredValue ? fadeOpacity : 1}\n        onMouseEnter={() => onHover(domainValue)}\n        onClick={() => onHover(domainValue)}\n        onMouseLeave={() => onHover(null)}\n        key={dataType(d.data)}\n      >\n        <path fill={colorValue(d.data)} d={pieArc(d)} />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabelStroke}\n        />\n        <PieLabel\n          pieLabelPosition={pieLabelPosition}\n          dataValue={dataValue}\n          d={d}\n          percentage={dataPercentage}\n          className={styles.pieLabel}\n        />\n      </g>\n    );\n  });\n","import React from \"react\";\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">{children}</div>\n      </div>\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { arc, pie, scaleOrdinal } from \"d3\";\nimport styles from \"./OverviewPie.module.css\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../elements/CommonUIs\";\nimport { ColorLegend } from \"./ColorLegend\";\nimport { DataTable } from \"./DataTable\";\nimport { PieChart } from \"./PieChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.7;\nconst pieRadius = (width * 0.66) / 2;\nconst pieOuterMargin = pieRadius * 0.7;\n\nconst legendCircleRadius = 8;\nconst legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\nconst legendX = width * 0.66;\nconst legendY = height / 2;\n\nconst pieArc = arc().innerRadius(0).outerRadius(pieOuterMargin);\n\nconst dataType = (d) => d.case;\nconst dataValue = (d) => d.value;\nconst colorValue = (d) => d.color;\n\nconst title = \"Worldwide Cases Overview\";\nconst ColorLegendLabel = \"Cases\";\n\nexport const OverviewPie = () => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  const pieData = [\n    {\n      case: \"Deaths\",\n      value: data.deaths,\n      color: \"#BD2D28\",\n    },\n    {\n      case: \"Recovered\",\n      value: data.recovered,\n      color: \"#6BBBA1\",\n    },\n    {\n      case: \"Active\",\n      value: data.active,\n      color: \"#E25A42\",\n    },\n  ];\n  const colorPie = pie().sort(null).value(dataValue);\n\n  const colorScale = scaleOrdinal()\n    .domain(pieData.map(dataType))\n    .range(pieData.map(colorValue));\n\n  const ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\n  const SourceCredit = () => (\n    <p className=\"footnote\">\n      Data source: Worldometers (\n      <a href=\"https://github.com/disease-sh/api\">disease.sh</a>)\n    </p>\n  );\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={pieData} dataType={dataType} dataValue={dataValue} />\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        <g transform={`translate(${pieRadius},${height / 2})`}>\n          <PieChart\n            pieData={pieData}\n            colorPie={colorPie}\n            colorValue={colorValue}\n            pieArc={pieArc}\n            dataType={dataType}\n            dataValue={dataValue}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        <g transform={`translate(${legendX}, ${legendY})`}>\n          <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}>\n            {ColorLegendLabel}\n          </text>\n          <ColorLegend\n            colorScale={colorScale}\n            tickSpacing={legendItemSpacing}\n            tickSize={legendCircleRadius}\n            tickTextOffset={16}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n      </svg>\n      <Collapsible id={title}>\n        <p>\n          This chart gives a rough overview of COVID-19 pandemic currently\n          spreading around the world. The total number at the top left corner\n          shows a number of confirmed cases ever tested positive. Since not\n          everyone has been tested, this can only represent the cases we know so\n          far.\n        </p>\n        <p>\n          All tested positive cases are further divided into three categories as\n          shown in the pie chart: active, recovered, and deaths. The recovered\n          percentage is intended to give us an idea of how far we are from\n          global recovery. The \"clock\", however, can turn back when the virus is\n          spreading rapidly. Active cases represents the people still suffering\n          from the disease. Most active cases will recover, but some will not.\n          According to{\" \"}\n          <a href=\"https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html\">\n            an early report{\" \"}\n          </a>\n          by <i>the New York Times</i>, the fatality rate for those infected is\n          likely to be lower than 3%.\n        </p>\n        <SourceCredit />\n      </Collapsible>\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { json } from \"d3\";\n\nconst jsonUrl = \"https://disease.sh/v3/covid-19/all\";\n\n// Use JSON data\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // console.log(data);\n\n  useEffect(() => {\n    let isMounted = true;\n    json(jsonUrl).then((d) => {\n      if (isMounted) setData(d);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, timeParse } from \"d3\";\n\nconst csvUrl =\n  \"https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv\";\n\nconst parseDay = timeParse(\"%Y-%m-%d\");\n\nconst transform = (rawData) => {\n  return rawData.map((d) => ({\n    date: parseDay(d.date),\n    newCases: +d.World,\n  }));\n};\n\n// Data: Covid daily new_cases\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl).then((rawData) => {\n      if (isMounted) setData(transform(rawData));\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React from \"react\";\n\nexport const ChartTitle = ({ title }) => (\n  <div className=\"chart-title\">{title}</div>\n);\n","import React from \"react\";\n\nexport const DataTable = ({ items }) => {\n  return (\n    <div className=\"small-table\">\n      <table>\n        <thead>\n          <tr>\n            {items.map((item, index) => (\n              <th key={index}>{item.heading}</th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            {items.map((item, index) => (\n              <td className=\"numerical-data\" key={index}>\n                {item.value}\n              </td>\n            ))}\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisBottom } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickCount = 6,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const xAxisG = select(ref.current);\n    const xAxis = axisBottom(xScale)\n      .ticks(tickCount, tickFormat)\n      .tickSize(-innerHeight)\n      .tickPadding(tickOffset);\n    xAxisG.call(xAxis);\n  }, [xScale, innerHeight, tickFormat, tickOffset, tickCount]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(0, ${innerHeight})`}\n    />\n  );\n};\n\n// export const AxisBottom = ({\n//   xScale,\n//   innerHeight,\n//   tickFormat,\n//   tickOffset = 3\n// }) =>\n//   // Label and reference lines for x scale\n//   xScale.ticks().map(tickValue => (\n//     // Each tick goes to the position indicating its value\n//     <g\n//       className={styles.tick}\n//       key={tickValue}\n//       transform={`translate(${xScale(tickValue)}, 0)`}\n//     >\n//       {/* the values of x1, x2, y1 are 0, which is default */}\n//       <line y2={innerHeight} />\n//       <text\n//         y={innerHeight + tickOffset}\n//         dy=\"0.71em\"\n//         style={{ textAnchor: \"middle\" }}\n//       >\n//         {tickFormat(tickValue)}\n//       </text>\n//     </g>\n//   ));\n","import React, { useRef, useEffect } from \"react\";\nimport { select, axisLeft } from \"d3\";\nimport styles from \"./LineChart.module.css\";\n\nexport const AxisLeft = ({\n  yScale,\n  innerWidth,\n  tickFormat,\n  tickOffset = 3,\n}) => {\n  const ref = useRef();\n  useEffect(() => {\n    const yAxisG = select(ref.current);\n    const yAxis = axisLeft(yScale)\n      .tickSize(innerWidth)\n      .tickPadding(tickOffset)\n      .tickFormat(tickFormat);\n    yAxisG.call(yAxis);\n  }, [yScale, innerWidth, tickFormat, tickOffset]);\n  return (\n    <g\n      ref={ref}\n      className={styles.tick}\n      transform={`translate(${innerWidth}, 0)`}\n    />\n  );\n};\n","import React from \"react\";\nimport styles from \"./LineChart.module.css\";\nexport const XMarkerLine = ({ value, xScale, innerHeight }) => {\n  const markerLineX = xScale(value);\n  const markerLineY1 = 0;\n  const markerLineY2 = innerHeight;\n  return (\n    <line\n      className={styles.markerLine}\n      x1={markerLineX}\n      y1={markerLineY1}\n      x2={markerLineX}\n      y2={markerLineY2}\n    />\n  );\n};\n","import React, { useMemo } from \"react\";\nimport { pointer, bisectCenter } from \"d3\";\nimport styles from \"./LineChart.module.css\";\nexport const RectOverlay = ({\n  data,\n  areaGenerator,\n  onHover,\n  innerWidth,\n  innerHeight,\n}) => {\n  return useMemo(() => {\n    const points = data.map((d) => areaGenerator.x()(d));\n    return (\n      <g className={styles.captureArea}>\n        <rect\n          width={innerWidth}\n          height={innerHeight}\n          onTouchStart={(event) => {\n            event.preventDefault();\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onPointerMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n          onMouseMove={(event) => {\n            const index = bisectCenter(points, pointer(event)[0]);\n            onHover(data[index]);\n          }}\n        />\n      </g>\n    );\n  }, [data, areaGenerator, innerHeight, innerWidth, onHover]);\n};\n","import React, { useState, useMemo, useCallback } from \"react\";\nimport {\n  scaleLinear,\n  scaleTime,\n  area,\n  timeFormat,\n  extent,\n  max,\n  format,\n  curveNatural,\n} from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { XMarkerLine } from \"./XMarkerLine\";\nimport { RectOverlay } from \"./RectOverlay\";\nimport styles from \"./LineChart.module.css\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.6 : width * 0.8;\nconst margin = { top: 20, right: 0, bottom: 40, left: 65 };\n\nconst xValue = (d) => d.date;\nconst xAxisTickFormat = timeFormat(\"%b, %Y\");\nconst xTooltipFormat = timeFormat(\"%-m/%-d, %y\");\n\nconst yValue = (d) => d.newCases;\n// const yAxisLabel = \"New cases\";\n// const yAxisLabelOffset = 60;\nconst siFormat = format(\".2s\");\nconst yAxisTickFormat = (tickValue) => siFormat(tickValue);\n\nexport const LineChart = ({ data }) => {\n  // Change state when different point is hovered\n  const [activeData, setActiveData] = useState(data[data.length - 1]);\n\n  // The chart's real height and width\n  const innerHeight = height - margin.top - margin.bottom;\n  const innerWidth = width - margin.left - margin.right;\n\n  // X axis is population, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleTime()\n        // Domain is an array of actual dates\n        // d3.extent(iterable[, accessor]) returns the [max, min] of iterable\n        .domain(extent(data, xValue))\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [data, innerWidth]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const yScale = useMemo(\n    () =>\n      scaleLinear()\n        .domain([0, max(data, yValue)])\n        .range([innerHeight, 0])\n        .nice(),\n    [data, innerHeight]\n  );\n\n  const handleVoronoiHover = useCallback(setActiveData, [setActiveData]);\n\n  const areaGenerator = useMemo(\n    () =>\n      area()\n        .x((d) => xScale(xValue(d)))\n        .y1((d) => yScale(yValue(d)))\n        .y0(yScale(0))\n        .curve(curveNatural),\n    [xScale, yScale]\n  );\n\n  const Tooltip = ({ activeData, className }) => (\n    <text className={className} textAnchor={\"end\"} x={0} y={-5}>\n      <tspan x=\"-10\" dy=\"0\" fontWeight=\"bold\">\n        {activeData.newCases.toLocaleString()}\n      </tspan>\n      <tspan x=\"-10\" dy=\"1.5em\">\n        {xTooltipFormat(activeData.date)}\n      </tspan>\n    </text>\n  );\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={7}\n            tickCount={width > 480 ? 6 : 2}\n          />\n          <AxisLeft\n            innerWidth={innerWidth}\n            yScale={yScale}\n            tickOffset={7}\n            tickFormat={yAxisTickFormat}\n          />\n          {/* <text */}\n          {/*   className={styles.axisLabel} */}\n          {/*   textAnchor=\"middle\" */}\n          {/*   transform={`translate(${-yAxisLabelOffset}, ${ */}\n          {/*     innerHeight / 2 */}\n          {/*   }) rotate(-90)`} */}\n          {/* > */}\n          {/*   {yAxisLabel} */}\n          {/* </text> */}\n          <g className={styles.marks}>\n            <path d={areaGenerator(data)} />\n          </g>\n          {activeData ? (\n            <>\n              <g className={styles.marks}>\n                <path d={areaGenerator(data)} />\n              </g>\n              <XMarkerLine\n                value={activeData.date}\n                xScale={xScale}\n                innerHeight={innerHeight}\n              />\n              <g\n                transform={`translate(${areaGenerator.x()(\n                  activeData\n                )}, ${areaGenerator.y1()(activeData)})`}\n              >\n                <circle className={styles.dataPoint} r={5} />\n                <Tooltip\n                  activeData={activeData}\n                  className={styles.tooltipStroke}\n                />\n                <Tooltip activeData={activeData} className={styles.tooltip} />\n              </g>\n            </>\n          ) : null}\n          <RectOverlay\n            onHover={handleVoronoiHover}\n            data={data}\n            areaGenerator={areaGenerator}\n            innerWidth={innerWidth}\n            innerHeight={innerHeight}\n          />\n        </g>\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\nexport const Collapsible = ({ children, id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">{children}</div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { LoadSpinner } from \"../elements/CommonUIs\";\nimport { ChartTitle } from \"./ChartTitle\";\nimport { DataTable } from \"./DataTable\";\nimport { LineChart } from \"./LineChart\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst sumValuesInObject = (data, key) =>\n  data.reduce(\n    (prev, cur) => prev + cur[key],\n    0 // initialValue\n  );\n\nconst title = \"Daily New Cases Worldwide\";\n\nconst SourceCredit = () => (\n  <p className=\"footnote\">\n    Data source: Center for Systems Science and Engineering (CSSE) at Johns\n    Hopkins University (\n    <a href=\"https://github.com/owid/covid-19-data/tree/master/public/data/jhu\">\n      Our Wolrd in Data\n    </a>\n    )\n  </p>\n);\n\nexport const CasesLineChart = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n  // if (data) console.log(data);\n  const lastSevenDaysAvg = sumValuesInObject(data.slice(-7), \"newCases\") / 7;\n\n  const beforeSevenDaysAvg =\n    sumValuesInObject(data.slice(-14, -7), \"newCases\") / 7;\n\n  const tableData = [\n    {\n      heading: \"Average previous week\",\n      value: Math.round(beforeSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"Average this week\",\n      value: Math.round(lastSevenDaysAvg).toLocaleString(),\n    },\n    {\n      heading: \"Growth factor\",\n      value: (lastSevenDaysAvg / beforeSevenDaysAvg).toFixed(2),\n    },\n  ];\n\n  return (\n    <>\n      <ChartTitle title={title} />\n      <DataTable items={tableData} />\n      <LineChart data={data} />\n      <Collapsible id={title}>\n        <p>\n          This chart is intended to show how fast the viruses are spreading over\n          time. Each data point represents the number of people tested positive\n          on that day, therefore \"new cases\".\n        </p>\n        <p>\n          During a contagious disease's growing period, an infected person is\n          likely to spread the virus to more than one healthy person, so the\n          latter days will see more new cases than the previous days. For\n          example, if we have 10 new cases today but only 5 new cases yesterday,\n          it can mean each of those 5 people passed the disease to 2 more people\n          during the day. So, the \"2\" is the \"growth factor\" listed here above\n          the chart. Only when the growth factor constantly goes below 1, have\n          we the chance to see an end to the pandemic.\n        </p>\n        <p>\n          Since most societies work in a weekly basis, we can see the data\n          regularly fluctuates inside of a week. To avoid misintepretation, this\n          chart calculates the growth factor with weekly averages.\n        </p>\n        <SourceCredit />\n      </Collapsible>\n    </>\n  );\n};\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisBottom = ({\n  xScale,\n  innerHeight,\n  tickFormat,\n  tickOffset = 3,\n  tickCount = 6,\n}) =>\n  // Label and reference lines for x scale\n  xScale.ticks(tickCount).map((tickValue) => (\n    // Each tick goes to the position indicating its value\n    <g\n      className={styles.tick}\n      key={tickValue}\n      transform={`translate(${xScale(tickValue)}, 0)`}\n    >\n      {/* the values of x1, x2, y1 are 0, which is default */}\n      <line y2={innerHeight} />\n      <text\n        y={innerHeight + tickOffset}\n        dy=\"0.71em\"\n        style={{ textAnchor: \"middle\" }}\n      >\n        {tickFormat(tickValue)}\n      </text>\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const AxisLeft = ({\n  countryScale,\n  ageScale,\n  width,\n  margin,\n  tickOffset = 3,\n}) =>\n  ageScale.domain().map((tickValue) => (\n    <g\n      key={tickValue}\n      className={styles.tick}\n      transform={`translate(0,${\n        ageScale(tickValue) + ageScale.bandwidth() / 2\n      })`}\n    >\n      <rect\n        x={-margin.left}\n        y={-ageScale.bandwidth() / 2 - 4}\n        width={width}\n        height={ageScale.bandwidth() + 8}\n      />\n      <text\n        dy=\".32em\"\n        x={-margin.left + tickOffset}\n        style={{ fontSize: \"1.1em\", fontWeight: \"bold\", textAnchor: \"start\" }}\n      >\n        {tickValue}\n      </text>\n      {countryScale.domain().map((tickValue) => (\n        <text\n          key={tickValue}\n          dy=\".72em\"\n          x={-tickOffset}\n          y={countryScale(tickValue) - ageScale.bandwidth() / 2}\n          style={{ textAnchor: \"end\", dominantBaseline: \"middle\" }}\n        >\n          {tickValue}\n        </text>\n      ))}\n    </g>\n  ));\n","import React from \"react\";\nimport styles from \"./BarChart.module.css\";\nexport const Marks = ({\n  data,\n  ageGroups,\n  ageScale,\n  xScale,\n  countryScale,\n  countryValue,\n  colorScale,\n  tooltipFormat,\n  onHover,\n  hoveredValue,\n  fadeOpacity = 0.2,\n}) =>\n  data.map((d) =>\n    ageGroups.map((key) => (\n      <g\n        key={countryValue(d) + key}\n        className={styles.marks}\n        onMouseEnter={() => onHover(countryValue(d))}\n        onMouseLeave={() => onHover(null)}\n        opacity={\n          hoveredValue && hoveredValue !== countryValue(d) ? fadeOpacity : 1\n        }\n      >\n        <rect\n          x={0}\n          y={ageScale(key) + countryScale(countryValue(d))}\n          width={xScale(d[key])}\n          height={countryScale.bandwidth()}\n          fill={colorScale(countryValue(d))}\n        >\n          <title>{`${key}: ${tooltipFormat(d[key])}`}</title>\n        </rect>\n        <text\n          x={xScale(d[key]) + 3}\n          y={ageScale(key) + countryScale(countryValue(d))}\n          dy=\".68em\"\n          style={{ textAnchor: \"start\", dominantBaseline: \"middle\" }}\n        >\n          {tooltipFormat(d[key])}\n        </text>\n      </g>\n    ))\n  );\n","import React, { useState, useMemo } from \"react\";\nimport { scaleBand, scaleLinear, scaleOrdinal, max, schemeTableau10 } from \"d3\";\nimport { AxisBottom } from \"./AxisBottom\";\nimport { AxisLeft } from \"./AxisLeft\";\nimport { Marks } from \"./Marks\";\n// import { ColorLegend } from \"./ColorLegend\";\n\nconst width = window.innerWidth < 1000 ? window.innerWidth : 1000;\nconst height = width > 480 ? width * 0.9 : width * 2;\nconst margin = { top: 20, right: 40, bottom: 30, left: 170 };\n\nconst countryValue = (d) => d.Country;\nconst xAxisTickFormat = (tickValue) => tickValue + \"%\";\n\n// The chart's real height and width\nconst innerHeight = height - margin.top - margin.bottom;\nconst innerWidth = width - margin.left - margin.right;\n\n// Legend settings\n// const legendX = width * 0.7;\n// const legendY = innerHeight / 2;\n// const ColorLegendLabel = \"Countries\";\n\n// const circleRadius = 8;\n// const legendItemSpacing = 26;\nconst fadeOpacity = 0.3;\n\nexport const BarChart = ({ data }) => {\n  const [hoveredValue, setHoveredValue] = useState(null);\n  const ageGroups = data.columns.slice(1);\n\n  // X axis is percentage of deaths, thus use linear scale\n  const xScale = useMemo(\n    () =>\n      scaleLinear()\n        // Domain is an array of actual data, starts from 0 to the max of all countries\n        // d3.max(iterable[, accessor])\n        .domain([0, max(data, (d) => max(ageGroups, (key) => d[key]))])\n        // Range is where the data is shown in pixels, starts from 0 to chart's width\n        .range([0, innerWidth])\n        .nice(),\n    [ageGroups, data]\n  );\n\n  const ageScale = useMemo(\n    () =>\n      scaleBand().domain(ageGroups).range([0, innerHeight]).paddingInner(0.15),\n    [ageGroups]\n  );\n\n  // Y is countries is categorical, band scale is for ordinal or categorical dimension\n  const countryScale = useMemo(\n    () =>\n      scaleBand()\n        .domain(data.map(countryValue))\n        .range([ageScale.bandwidth(), 0])\n        .paddingInner(0.1),\n    [ageScale, data]\n  );\n\n  const colorScale = useMemo(\n    () => scaleOrdinal().domain(data.map(countryValue)).range(schemeTableau10),\n    [data]\n  );\n\n  return (\n    <>\n      <svg viewBox={`0 0 ${width} ${height}`} preserveAspectRatio=\"xMinYMid\">\n        {/* Adds margin to left and top  */}\n        <g transform={`translate(${margin.left}, ${margin.top})`}>\n          <AxisBottom\n            innerHeight={innerHeight}\n            xScale={xScale}\n            tickFormat={xAxisTickFormat}\n            tickOffset={8}\n          />\n          <AxisLeft\n            countryScale={countryScale}\n            ageScale={ageScale}\n            margin={margin}\n            width={width}\n          />\n          <Marks\n            data={data}\n            ageScale={ageScale}\n            ageGroups={ageGroups}\n            xScale={xScale}\n            countryScale={countryScale}\n            countryValue={countryValue}\n            colorScale={colorScale}\n            tooltipFormat={xAxisTickFormat}\n            onHover={setHoveredValue}\n            hoveredValue={hoveredValue}\n            fadeOpacity={fadeOpacity}\n          />\n        </g>\n        {/* <g transform={`translate(${legendX}, ${legendY})`}> */}\n        {/*   <text className={styles.legendLabel} x={-7} y={-legendItemSpacing}> */}\n        {/*     {ColorLegendLabel} */}\n        {/*   </text> */}\n        {/*   <ColorLegend */}\n        {/*     colorScale={colorScale} */}\n        {/*     tickSpacing={legendItemSpacing} */}\n        {/*     tickSize={circleRadius} */}\n        {/*     tickTextOffset={16} */}\n        {/*     onHover={setHoveredValue} */}\n        {/*     hoveredValue={hoveredValue} */}\n        {/*     fadeOpacity={fadeOpacity} */}\n        {/*   /> */}\n        {/* </g> */}\n      </svg>\n    </>\n  );\n};\n","import React from \"react\";\n\nconst SourceCredit = () => (\n  <>\n    <p className=\"footnote\">\n      Data sources: Chinese Center for Disease Control and Prevention (CDC);\n      Spanish Ministry of Health; Korea Centers for Disease Control and\n      Prevention (KCDC); Onder G, Rezza G, Brusaferro S. Case-Fatality Rate and\n      Characteristics of Patients Dying in Relation to COVID-19 in Italy. JAMA.\n      (This is a remake of{\" \"}\n      <a href=\"https://ourworldindata.org/mortality-risk-covid#case-fatality-rate-of-covid-19-by-age\">\n        the same chart\n      </a>{\" \"}\n      by Hannah Ritchie and Max Roser published in OurWorldinData.org)\n    </p>\n    <p className=\"footnote\">\n      Licensed under CC-BY by the authors Hannah Ritchie and Max Roser.\n    </p>\n  </>\n);\n\nexport const Collapsible = ({ id }) => {\n  return (\n    <div className=\"wrap-collapsible\">\n      <input id={id} className=\"toggle\" type=\"checkbox\" />\n      <label htmlFor={id} className=\"lbl-toggle\">\n        What does this chart tell us?\n      </label>\n      <div className=\"collapsible-content\">\n        <div className=\"content-inner\">\n          <p>\n            This chart gives us a rough idea of which age groups are most at\n            risk to COVID-19. If we know which groups are most likely to die\n            from the disease, precautions and resouces like vaccines can be\n            directed to the ones who need them most. According to this chart,\n            the elderly are most likely to die from COVID-19.\n          </p>\n          <p>\n            The data presented in the chart are calculated from the number of\n            deaths divided by the number of confirmed cases in each age group.\n            Since COVID-19 is still an ongoing pandemic, these numbers can\n            change over time and conditions. There are two main limitations to\n            keep in mind when interpreting this chart:\n          </p>\n          <ol>\n            <li>\n              Since not everyone is tested within the population, we do not know\n              the real number of infected cases.\n            </li>\n            <li>\n              Some infected individuals are still alive at the time of\n              recording, but will eventually die from the disease.\n            </li>\n          </ol>\n          <SourceCredit />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useData } from \"./useData\";\nimport { BarChart } from \"./BarChart\";\nimport { LoadSpinner } from \"../elements/CommonUIs\";\nimport { Collapsible } from \"./Collapsible\";\n\nconst ChartTitle = ({ title }) => <div className=\"chart-title\">{title}</div>;\n\nexport const CaseFatalityRatesByAgeBarChart = () => {\n  const data = useData();\n  if (!data) return <LoadSpinner />;\n\n  return (\n    <>\n      <ChartTitle title=\"Case fatality rates by age\" />\n      <BarChart data={data} />\n      <Collapsible id=\"caseFatalityRetes\" />\n    </>\n  );\n};\n","import { useState, useEffect } from \"react\";\nimport { csv, autoType } from \"d3\";\n\nconst csvUrl =\n  \"https://gist.githubusercontent.com/mgeorgetw/965bfe365ab8e70e2ee34c9a5d4d594a/raw/COVID19CaseFatalityRatesByAge.csv\";\n\n// Data: Case Fatality Rates By Age\n// https://ourworldindata.org/mortality-risk-covid#case-fatality-rate-of-covid-19-by-age\nexport const useData = () => {\n  const [data, setData] = useState(null);\n  // if (data) console.log(data);\n\n  useEffect(() => {\n    let isMounted = true;\n    csv(csvUrl, autoType).then((data) => {\n      if (isMounted) setData(data);\n    });\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return data;\n};\n","import React, { useState, useEffect } from \"react\";\nimport ReactDOMServer from \"react-dom/server\";\nimport \"./App.css\";\nimport { cookieExists, setCookie, findCookie } from \"./utils/useCookies\";\n\nimport { TaiwanView } from \"./TaiwanView/index\";\nimport * as Charts from \"./Charts.js\";\nimport { Card, Footer } from \"./elements/CommonUIs\";\nimport { AppTitle } from \"./elements/AppTitle\";\nimport { NavBar } from \"./elements/NavBar\";\nimport { OverviewPie } from \"./OverviewPie/index\";\nimport { CasesLineChart } from \"./CasesLineChart/index\";\nimport { CaseFatalityRatesByAgeBarChart } from \"./CaseFatalityRatesByAgeBarChart/index\";\n\n// Pull to refresh\nimport PullToRefresh from \"pulltorefreshjs\";\nimport { faSyncAlt } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst area = \"Taiwan\";\n\nconst GlobalView = () => (\n  <ul className=\"flex-card-list\">\n    <Card>\n      <OverviewPie />\n    </Card>\n    <Card>\n      <CasesLineChart />\n    </Card>\n    {/* <Card> */}\n    {/*   <Charts.WorldwideRecoveryProgressPieChart /> */}\n    {/* </Card> */}\n    {/* <Card> */}\n    {/*   <Charts.DailyNewCasesWorldwideLineChart /> */}\n    {/* </Card> */}\n    <Card>\n      <Charts.AreasWithOutstandingCasesTable />\n    </Card>\n    <Card>\n      <Charts.DailyLineChartInAnArea area={area} chart_type=\"newCases\" />\n    </Card>\n    <Card>\n      <Charts.DailyLineChartInAnArea area={area} chart_type=\"newDeaths\" />\n    </Card>\n    {/* <Card> */}\n    {/*   <Charts.ConfirmedCasesInSelectedCountriesLineChart /> */}\n    {/* </Card> */}\n    <Card>\n      <CaseFatalityRatesByAgeBarChart />\n    </Card>\n  </ul>\n);\n\nconst App = () => {\n  const [view, setView] = useState(\"global\");\n  useEffect(() => {\n    // Checks if there's a cookie for view, if not, set it to Indices View\n    if (cookieExists(\"view\")) {\n      // Set view according to cookie, if exists\n      setView(findCookie(\"view\"));\n    } else {\n      setCookie(\"view\", \"global\");\n    }\n\n    PullToRefresh.init({\n      mainElement: \"body\",\n      onRefresh() {\n        window.location.reload();\n      },\n      iconArrow: ReactDOMServer.renderToString(\n        <FontAwesomeIcon icon={faSyncAlt} />\n      ),\n      iconRefreshing: ReactDOMServer.renderToString(\n        <FontAwesomeIcon icon={faSyncAlt} spin={true} />\n      ),\n    });\n    return () => {\n      PullToRefresh.destroyAll();\n    };\n  }, []);\n  return (\n    <div className=\"App\">\n      <AppTitle />\n      <NavBar view={view} setView={setView} />\n      {view === \"global\" ? <GlobalView /> : <TaiwanView />}\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"react-app-polyfill/ie9\";\nimport \"react-app-polyfill/stable\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./fonts/NotoSansMono-CondensedBold.ttf\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}