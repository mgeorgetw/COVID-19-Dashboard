(this.webpackJsonpcovid_19_dashboard=this.webpackJsonpcovid_19_dashboard||[]).push([[0],{116:function(e,t,n){e.exports={axisLabel:"BarChart_axisLabel__3i3d5",marks:"BarChart_marks__3Qb-J",tick:"BarChart_tick__1vAYC",legendLabel:"BarChart_legendLabel__Y4Crq",legend:"BarChart_legend__2XTVP"}},117:function(e,t){e.exports={findCookie:function(e){return document.cookie.split("; ").find((function(t){return t.startsWith("".concat(e,"="))})).split("=")[1]},setCookie:function(e,t){var n="".concat(e,"=").concat(t);n+=";max-age=604800;SameSite=Lax",document.cookie=n},cookieExists:function(e){return!!document.cookie.split(";").some((function(t){return t.trim().startsWith("".concat(e,"="))}))}}},50:function(e,t,n){e.exports={axisLabel:"LineChart_axisLabel__2_tFA",marks:"LineChart_marks__26M2D",tick:"LineChart_tick__3yb08",markerLine:"LineChart_markerLine__22F4j",voronoi:"LineChart_voronoi__2Oz49",captureArea:"LineChart_captureArea__16mNX",dataPoint:"LineChart_dataPoint__g039n",tooltip:"LineChart_tooltip__11-D6",tooltipStroke:"LineChart_tooltipStroke__3IHSg"}},75:function(e,t,n){e.exports={marks:"ChoroplethMap_marks__Ia8M_",interiors:"ChoroplethMap_interiors__1c6ly",sphere:"ChoroplethMap_sphere__253Ra",graticules:"ChoroplethMap_graticules__1pM2M",tick:"ChoroplethMap_tick__1KjU2","menus-container":"ChoroplethMap_menus-container__s4izW","axis-label":"ChoroplethMap_axis-label__3xZac","dropdown-label":"ChoroplethMap_dropdown-label__2PVQG","Dropdown-root":"ChoroplethMap_Dropdown-root__Q0kxi","Dropdown-menu":"ChoroplethMap_Dropdown-menu__3rY1g",sliderContainer:"ChoroplethMap_sliderContainer__3H94e",tooltip:"ChoroplethMap_tooltip__-fR-T",tooltipStroke:"ChoroplethMap_tooltipStroke__2yB2m"}},810:function(e,t,n){},812:function(e,t,n){},92:function(e,t,n){e.exports={pieChart:"OverviewPie_pieChart___bMnr",pieLabel:"OverviewPie_pieLabel__3LAAf",pieLabelStroke:"OverviewPie_pieLabelStroke__2jZQ6",legendLabel:"OverviewPie_legendLabel__3jHkC",legend:"OverviewPie_legend__3kb26",hideshow:"OverviewPie_hideshow__1f2ru"}},930:function(e,t,n){"use strict";n.r(t);n(573),n(623);var a=n(2),c=n(426),r=n.n(c),i=(n(810),n.p,n(13)),s=n(248),o=n.n(s),l=(n(812),n(117)),d=n(1),j=function(){return Object(d.jsxs)("div",{className:"lds-spinner",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})},u=function(e){var t=e.children,n=e.className;return Object(d.jsx)("li",{className:"flex-card-listitem".concat(n?" "+n:""),children:Object(d.jsx)("div",{className:"flex-card",children:t})})},h=function(){return Object(d.jsx)("div",{className:"footer",children:Object(d.jsxs)("p",{children:["\xa9 2020 ",Object(d.jsx)("a",{href:"https://eternallogger.com",children:"George Huang"}),". All rights reserved."]})})},b=n(10),O=n(145),f=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=!0;return Object(b.m)("https://morning-wave-49482.herokuapp.com/https://covid-19.nchc.org.tw/api/covid19?CK=covid-19@nchc.org.tw&querydata=5003&limited=\u5168\u90e8\u7e23\u5e02").then((function(t){e&&c(function(e){return e.map((function(e){return e["\u65e5\u671f"]=new Date(e.a01),e["\u7e23\u5e02\u5225"]=e.a02,e["\u5340\u57df"]=e.a03,e["\u65b0\u589e\u78ba\u8a3a\u4eba\u6578"]=+e.a04,e["\u7d2f\u8a08\u78ba\u8a3a\u4eba\u6578"]=+e.a05,e["\u4e03\u5929\u79fb\u52d5\u5e73\u5747\u65b0\u589e\u78ba\u8a3a"]=+e.a06,e}))}(t))})),function(){e=!1}}),[]),n},x=n(75),m=n.n(x),v=function(e){var t=e.xScale,n=e.innerHeight,c=e.width,r=e.colorScale,i=e.tickCount,s=void 0===i?6:i,o=e.tickOffset,l=void 0===o?3:o,j=Object(a.useRef)();return Object(a.useEffect)((function(){var e=Object(b.w)(j.current),n=Object(b.d)(t).ticks(s).tickSize(-18).tickPadding(l);e.call(n).selectAll("text").style("text-anchor","middle").attr("dy","-2.2em")}),[t,n,l,s]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("g",{transform:"translate(".concat(l,", 0)"),children:[Object(d.jsx)("defs",{children:Object(d.jsxs)("linearGradient",{id:"legendGradient",children:[Object(d.jsx)("stop",{offset:"0%",stopColor:r.range()[0]}),Object(d.jsx)("stop",{offset:"100%",stopColor:r.range()[1]})]})}),Object(d.jsx)("rect",{x:0,y:n-15,width:c,height:15,fill:"url('#legendGradient')"}),Object(d.jsx)("g",{ref:j,className:m.a.tick,transform:"translate(0, ".concat(n,")")})]})})},p=function(e){var t=e.atlas,n=t.counties,c=(t.interiors,e.data),r=e.colorScale,s=e.onHover,o=e.hoveredValue,l=Object(a.useState)(null),j=Object(i.a)(l,2),u=j[0],h=j[1],O=window.innerWidth,f=Object(b.k)();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("g",{className:m.a.marks,children:[n.features.map((function(e,t){var n=e.properties.COUNTYNAME;return Object(d.jsx)("path",{fill:n?r(c[n]):"white",d:f(e),onTouchStart:function(e){e.preventDefault(),s(n),h(Object(b.p)(e))},onMouseMove:function(e){s(n),h(Object(b.p)(e))},onPointerMove:function(e){s(n),h(Object(b.p)(e))}},t)})),o?Object(d.jsxs)("g",{children:[Object(d.jsxs)("text",{className:m.a.tooltipStroke,x:u[0],y:u[1],textAnchor:u[0]>O/2?"end":"start",children:[o,"\u7d2f\u8a08\u78ba\u8a3a\uff1a",c[o]]}),Object(d.jsxs)("text",{className:m.a.tooltip,x:u[0],y:u[1],textAnchor:u[0]>O/2?"end":"start",children:[o,"\u7d2f\u8a08\u78ba\u8a3a\uff1a",c[o]]})]}):null]})})},g=window.innerWidth<800?window.innerWidth:800,w=g>480?.9*g:1.6*g,y=g+50,k=function(e){return e},_=y-10,C=function(e){var t=e.range,n=e.selected,a=e.handleChange;return Object(d.jsxs)("div",{className:m.a.sliderContainer,children:[Object(d.jsx)("pre",{children:n}),Object(d.jsx)("input",{className:m.a.slider,type:"range",min:"0",max:t.length-1,value:t.indexOf(n),onChange:function(e){return a(t[e.target.value])}})]})},N=function(e){var t=e.data,n=e.atlas,c=e.view,r=Object(a.useState)(t[0].a01),s=Object(i.a)(r,2),o=s[0],l=s[1],j=Object(a.useState)(null),u=Object(i.a)(j,2),h=u[0],O=u[1],f="\u5168\u53f0\u7063"===c?t.filter((function(e){return"\u5168\u5340"===e["\u5340\u57df"]})):t.filter((function(e){return e["\u7e23\u5e02\u5225"]===c})),x=Array.from(new Set(f.map((function(e){return e.a01})))).reverse(),m=function(e,t){var n={date:e[0]["\u65e5\u671f"],dateString:e[0].a01};return"\u5168\u53f0\u7063"===t?e.map((function(e){var t=e.\u7e23\u5e02\u5225,a=e.\u7d2f\u8a08\u78ba\u8a3a\u4eba\u6578;return n[t]=a})):e.map((function(e){var t=e.\u5340\u57df,a=e.\u7d2f\u8a08\u78ba\u8a3a\u4eba\u6578;return n[t]=a})),n}(f.filter((function(e){return e["\u65e5\u671f"].valueOf()===new Date(o).valueOf()})),c),g=Object(b.t)(b.l).domain([0,Object(b.n)(f.map((function(e){return e["\u7d2f\u8a08\u78ba\u8a3a\u4eba\u6578"]})))]),N=Object(b.r)().range([0,_]).domain(g.domain());return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(C,{range:x,selected:o,handleChange:l}),Object(d.jsxs)("svg",{viewBox:"0 0 ".concat(y," ").concat(w),preserveAspectRatio:"xMinYMid",children:[Object(d.jsx)(p,{atlas:n,colorScale:g,data:m,hoveredValue:h,onHover:O}),Object(d.jsx)(v,{innerHeight:w,width:_,xScale:N,colorScale:g,tickFormat:k,tickOffset:5,tickCount:6})]})]})},S=function(e){var t=e.title;return Object(d.jsx)("div",{className:"chart-title",children:t})},D=function(){var e=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){Object(b.m)("https://cdn.jsdelivr.net/npm/taiwan-atlas/districts-mercator-10t.json").then((function(e){var t=e.objects,n=t.nation,a=t.counties,r=t.districts;c({nation:Object(O.a)(e,n),counties:Object(O.a)(e,a),districts:Object(O.a)(e,r),interiors:Object(O.b)(e,r,(function(e,t){return e!==t}))})}))}),[]),n}(),t=f();return t&&e?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(S,{title:"COVID-19 \u53f0\u7063\u7d2f\u8a08\u78ba\u8a3a\u5206\u4f48\u5716"}),Object(d.jsx)(N,{view:"\u5168\u53f0\u7063",atlas:e,data:t})]}):Object(d.jsx)(j,{})},M=function(){return Object(d.jsx)("ul",{className:"flex-card-list",children:Object(d.jsx)(u,{children:Object(d.jsx)(D,{})})})},L=n(62),A=n.n(L),F=n(249),V=n(118),R=n(948),T=n(959),E=n(960),H=n(957),W=n(949),P=(n(961),n(953),n(950),n(947),n(954),n(951),n(955),function(e){if(e.ok)return e.json();throw Error(e.statusText)}),B=function(e){return Object.entries(e).map((function(e){var t=Object(i.a)(e,2);return{x:t[0],y:t[1]}}))},I=function(e){return e.map((function(e,t,n){return Object(V.a)(Object(V.a)({},e),{},{y:t>0?e.y-n[t-1].y:0})}))},G=function(e,t){return Number((e/t*100).toFixed(2))},Y=function(e,t,n){var c=Object(a.useState)(t),r=Object(i.a)(c,2),s=r[0],o=r[1],l=Object(a.useState)(e),d=Object(i.a)(l,2),j=d[0],u=d[1],h=Object(a.useState)(!0),b=Object(i.a)(h,2),O=b[0],f=b[1],x=Object(a.useState)(!1),m=Object(i.a)(x,2),v=m[0],p=m[1];return Object(a.useEffect)((function(){var e=!0;return function(){var t=Object(F.a)(A.a.mark((function t(){var a;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(j).then(P);case 3:a=t.sent,e&&o(n&&n(a)||a),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),e&&p(!0),console.error(t.t0);case 11:e&&f(!1);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}}),[n,j]),[{data:s,isLoading:O,isError:v},u]},z=function(e){var t=e.data,n=e.chosen,c=e.setChosen,r=Object(a.useState)([]),s=Object(i.a)(r,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){l(t.map((function(e){return{label:e.province?e.province+", "+e.country:e.country,value:e.province?e.province:e.country}})))}),[t]),Object(d.jsxs)("div",{className:"dropdown-container",children:["Select:"," ",Object(d.jsx)("select",{value:n,onChange:function(e){return c(e.currentTarget.value)},children:o.map((function(e){var t=e.label,n=e.value;return Object(d.jsx)("option",{className:"region-name",value:n,children:t},t)}))})]})},J=function(e){var t=e.data,n=e.x,a=e.y;return Object(d.jsx)("div",{className:"bar-chart",children:Object(d.jsxs)(R.a,{containerComponent:Object(d.jsx)(T.a,{labels:function(e){var t=e.datum;return t.x?"".concat(t.x,": ").concat(t._y):"".concat(t[n],": ").concat(t._y)},labelComponent:Object(d.jsx)(E.a,{constrainToVisibleArea:!0})}),padding:{top:20,bottom:40,left:60,right:20},children:[Object(d.jsx)(H.a,{fixLabelOverlap:!0}),Object(d.jsx)(H.a,{dependentAxis:!0,fixLabelOverlap:!0,style:{grid:{stroke:"#f3f5f6",strokeWidth:2,strokeDasharray:"15,15"}}}),Object(d.jsx)(W.a,{data:t,x:n,y:a})]})})},U=function(){return Object(d.jsxs)("div",{className:"lds-spinner",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})},K=function(e){return Object(d.jsxs)("div",{className:"radio-btn",children:[Object(d.jsx)("input",{id:e.id,type:"radio",onChange:e.changed,checked:e.isSelected}),Object(d.jsx)("label",{htmlFor:e.id,children:e.label})]})},q=function(e){var t=e.items;return Object(d.jsx)("div",{className:"small-table",children:Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:t.map((function(e){return Object(d.jsx)("th",{children:e.heading},e.heading)}))})}),Object(d.jsx)("tbody",{children:Object(d.jsx)("tr",{children:t.map((function(e,t){return Object(d.jsx)("td",{className:"numerical-data",children:e.datum.toLocaleString()},t)}))})})]})})},Q=function(e){var t=e.chart_type,n=Y("https://disease.sh/v3/covid-19/historical?lastdays=90",null),c=Object(i.a)(n,1)[0],r=c.data,s=c.isLoading,o=c.isError,l=Object(a.useState)("UK"),j=Object(i.a)(l,2),u=j[0],h=j[1],b=Object(a.useState)({}),O=Object(i.a)(b,2),f=O[0],x=O[1],m={newCases:"Daily New Cases in ",newDeaths:"Daily Deaths in ",deathRate:"Fatality Rate in "},v=function(e){var t=e.chart_type,n=e.area_name;return Object(d.jsxs)("div",{className:"chart-title",children:[m[t],n]})};return Object(a.useEffect)((function(){if(r){var e=r.find((function(e){return e.province===u||!e.province&&e.country===u})),t=B(e.timeline.cases),n=B(e.timeline.deaths),a=I(t),c=I(n),i=t.map((function(e,t){return{x:e.x,y:G(n[t].y,e.y)||0}}));x({country:e.country,province:e.province,cases:t,deaths:n,newCases:a,newDeaths:c,deathRate:i})}}),[r,u]),Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"chart-container",children:[Object(d.jsx)(v,{chart_type:t,area_name:f.province?f.province+", "+f.country:f.country}),o&&Object(d.jsx)("div",{children:"Something went wrong"}),s?Object(d.jsx)(U,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(z,{data:r,chosen:u,setChosen:h}),Object(d.jsx)(q,{items:function(e,t){return{newCases:[{heading:"Total cases",datum:t.cases?t.cases.slice(-1)[0].y:"loading"},{heading:"New cases",datum:t.newCases?t.newCases.slice(-1)[0].y:"loading"},{heading:"Growth Factor",datum:t.newCases?(t.newCases.slice(-1)[0].y/t.newCases.slice(-2)[0].y).toFixed(2):"loading"}],newDeaths:[{heading:"Total deaths",datum:t.deaths?t.deaths.slice(-1)[0].y:"loading"},{heading:"New deaths",datum:t.newDeaths?t.newDeaths.slice(-1)[0].y:"loading"},{heading:"Fatality Rate",datum:t.deathRate?t.deathRate.slice(-1)[0].y+"%":"loading"}],deathRate:[{heading:"Confirmed",datum:t.cases?t.cases.slice(-1)[0].y:"loading"},{heading:"Deaths",datum:t.deaths?t.deaths.slice(-1)[0].y:"loading"},{heading:"Fatality Rate",datum:t.deathRate?t.deathRate.slice(-1)[0].y+"%":"loading"}]}[e]}(t,f)}),Object(d.jsx)(J,{data:f[t]}),Object(d.jsxs)("p",{className:"footnote",children:["Source: John Hopkins University CSSE (",Object(d.jsx)("a",{href:"https://github.com/NovelCOVID/API",children:"NovelCOVID/API"}),")"]})]})]})})},X=function(){var e=Y("https://disease.sh/v2/countries",[]),t=Object(i.a)(e,1)[0],n=t.data,c=t.isLoading,r=t.isError,s=Object(a.useState)("cases"),o=Object(i.a)(s,2),l=o[0],j=o[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"chart-title",children:"Areas with Outstanding Cases"}),r&&Object(d.jsx)("div",{children:"Something went wrong"}),c?Object(d.jsx)(U,{}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"radio-btn-container",children:[Object(d.jsx)(K,{id:"1",changed:function(){return j("cases")},isSelected:"cases"===l,label:"Total cases"}),Object(d.jsx)(K,{id:"2",changed:function(){return j("deaths")},isSelected:"deaths"===l,label:"Total deaths"}),Object(d.jsx)(K,{id:"3",changed:function(){return j("todayCases")},isSelected:"todayCases"===l,label:"New cases"}),Object(d.jsx)(K,{id:"4",changed:function(){return j("todayDeaths")},isSelected:"todayDeaths"===l,label:"New deaths"})]}),Object(d.jsx)("div",{className:"area-data-sets",children:n.sort((function(e,t){return t[l]-e[l]})).slice(0,12).map((function(e){return Object(d.jsxs)("div",{className:"data-set",children:[Object(d.jsx)("div",{className:"country-name vertical-inverted-title",children:e.country}),Object(d.jsx)("div",{className:"set-title",children:"Confirmed"}),Object(d.jsx)("div",{className:"confirmed-count numerical-data",children:e.cases.toLocaleString()}),Object(d.jsxs)("div",{className:"smaller-numbers numerical-data",children:["(+",e.todayCases.toLocaleString(),")"]}),Object(d.jsx)("div",{className:"set-title",children:"Deaths"}),Object(d.jsx)("div",{className:"dead-count numerical-data",children:e.deaths.toLocaleString()}),Object(d.jsxs)("div",{className:"smaller-numbers numerical-data",children:["(+",e.todayDeaths.toLocaleString(),")"]}),Object(d.jsx)("div",{className:"set-title",children:"Death Rate"}),Object(d.jsxs)("div",{className:"current-dead-rate numerical-data",children:[G(e.deaths,e.cases),"%"]})]},e.country)}))}),Object(d.jsxs)("p",{className:"footnote",children:["Source: Johns Hopkins University Center for Systems Science and Engineering (",Object(d.jsx)("a",{href:"https://github.com/NovelCOVID/API",children:"NovelCOVID / API"}),")"]})]})]})};function Z(){var e=new Date;return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()}var $=function(){return Object(d.jsxs)("div",{className:"app-title",children:[Object(d.jsxs)("h1",{children:["Covid",Object(d.jsx)("span",{className:"title-numerals",children:"-19"})," Dashboard"]}),Object(d.jsx)("h2",{className:"title-date",children:Z()})]})},ee=function(e){var t=e.view,n=e.setView,c=[{name:"Global",view_name:"global",className:"global"===t?"active view-button":"view-button"},{name:"\u53f0\u7063\u7248",view_name:"taiwan",className:"taiwan"===t?"active view-button":"view-button"}];return Object(d.jsx)("div",{className:"nav",children:c.map((function(e){return Object(a.createElement)(te,Object(V.a)(Object(V.a)({setView:n},e),{},{key:e.view_name}))}))})},te=function(e){var t=e.name,n=e.view_name,a=e.className,c=e.setView;return Object(d.jsx)("button",{onClick:function(e){e.preventDefault(),Object(l.setCookie)("view",n),c(n)},type:"button",className:a,children:t})},ne=n(92),ae=n.n(ne),ce=function(e){var t=e.colorScale,n=e.tickSpacing,a=void 0===n?20:n,c=e.tickSize,r=void 0===c?10:c,i=e.tickTextOffset,s=void 0===i?20:i,o=e.onHover,l=e.hoveredValue,j=e.fadeOpacity,u=void 0===j?.2:j;return t.domain().map((function(e,n){return Object(d.jsxs)("g",{className:ae.a.legend,transform:"translate(0, ".concat(n*a,")"),onMouseEnter:function(){return o(e)},onMouseLeave:function(){return o(null)},opacity:l&&e!==l?u:1,children:[Object(d.jsx)("circle",{fill:t(e),r:r}),Object(d.jsx)("text",{dy:".32em",x:s,children:e})]},t(e))}))},re=function(e){var t=e.items;e.dataType,e.dataValue;return Object(d.jsx)("div",{className:"small-table",children:Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:Object(d.jsx)("th",{children:"Total"})})}),Object(d.jsx)("tbody",{children:Object(d.jsx)("tr",{children:Object(d.jsx)("td",{className:"numerical-data",children:t.reduce((function(e,t){return e+t.value}),0).toLocaleString()})})})]})})},ie=function(e){var t=e.pieLabelPosition,n=e.dataValue,a=e.d,c=e.percentage,r=e.className,i=e.labelOffsetY,s=void 0===i?18:i;return Object(d.jsxs)("text",{className:r,transform:"translate(".concat(t,")"),textAnchor:"middle",dominantBaseline:"middle",children:[Object(d.jsxs)("tspan",{className:"num",x:"0",dy:-s,fill:"black",children:[c,"%"]}),Object(d.jsx)("tspan",{x:"0",dy:s,fill:"#635F5D",children:n(a.data).toLocaleString()})]})},se=function(e){var t=e.pieData,n=e.pieArc,a=e.colorPie,c=e.colorValue,r=e.dataType,i=e.dataValue,s=e.onHover,o=e.hoveredValue,l=e.fadeOpacity,j=void 0===l?.2:l;return a(t).map((function(e){var a=r(e.data),l=n.centroid(e);e.endAngle-e.startAngle<.25&&(l[0]*=2.2,l[1]*=2.2);var u=(i(e.data)/Object(b.x)(t,(function(e){return e.value}))*100).toFixed(1);return Object(d.jsxs)("g",{className:ae.a.pieChart,opacity:o&&a!==o?j:1,onMouseEnter:function(){return s(a)},onClick:function(){return s(a)},onMouseLeave:function(){return s(null)},children:[Object(d.jsx)("path",{fill:c(e.data),d:n(e)}),Object(d.jsx)(ie,{pieLabelPosition:l,dataValue:i,d:e,percentage:u,className:ae.a.pieLabelStroke}),Object(d.jsx)(ie,{pieLabelPosition:l,dataValue:i,d:e,percentage:u,className:ae.a.pieLabel})]},r(e.data))}))},oe=function(e){var t=e.children,n=e.id;return Object(d.jsxs)("div",{className:"wrap-collapsible",children:[Object(d.jsx)("input",{id:n,className:"toggle",type:"checkbox"}),Object(d.jsx)("label",{htmlFor:n,className:"lbl-toggle",children:"What does this chart tell us?"}),Object(d.jsx)("div",{className:"collapsible-content",children:Object(d.jsx)("div",{className:"content-inner",children:t})})]})},le=window.innerWidth<1e3?window.innerWidth:1e3,de=le>480?.6*le:.7*le,je=.66*le/2,ue=.7*je,he=.66*le,be=de/2,Oe=Object(b.a)().innerRadius(0).outerRadius(ue),fe=function(e){return e.case},xe=function(e){return e.value},me=function(e){return e.color},ve="Worldwide Cases Overview",pe=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],r=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=!0;return Object(b.m)("https://disease.sh/v3/covid-19/all").then((function(t){e&&c(t)})),function(){e=!1}}),[]),n}();if(!r)return Object(d.jsx)(j,{});var s=[{case:"Deaths",value:r.deaths,color:"#BD2D28"},{case:"Recovered",value:r.recovered,color:"#6BBBA1"},{case:"Active",value:r.active,color:"#E25A42"}],o=Object(b.o)().sort(null).value(xe),l=Object(b.s)().domain(s.map(fe)).range(s.map(me)),u=function(e){var t=e.title;return Object(d.jsx)("div",{className:"chart-title",children:t})},h=function(){return Object(d.jsxs)("p",{className:"footnote",children:["Data source: Worldometers (",Object(d.jsx)("a",{href:"https://github.com/disease-sh/api",children:"disease.sh"}),")"]})};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(u,{title:ve}),Object(d.jsx)(re,{items:s,dataType:fe,dataValue:xe}),Object(d.jsxs)("svg",{viewBox:"0 0 ".concat(le," ").concat(de),preserveAspectRatio:"xMinYMid",children:[Object(d.jsx)("g",{transform:"translate(".concat(je,",").concat(de/2,")"),children:Object(d.jsx)(se,{pieData:s,colorPie:o,colorValue:me,pieArc:Oe,dataType:fe,dataValue:xe,onHover:c,hoveredValue:n,fadeOpacity:.3})}),Object(d.jsxs)("g",{transform:"translate(".concat(he,", ").concat(be,")"),children:[Object(d.jsx)("text",{className:ae.a.legendLabel,x:-7,y:-26,children:"Cases"}),Object(d.jsx)(ce,{colorScale:l,tickSpacing:26,tickSize:8,tickTextOffset:16,onHover:c,hoveredValue:n,fadeOpacity:.3})]})]}),Object(d.jsxs)(oe,{id:ve,children:[Object(d.jsx)("p",{children:"This chart gives a rough overview of COVID-19 pandemic currently spreading around the world. The total number at the top left corner shows a number of confirmed cases ever tested positive. Since not everyone has been tested, this can only represent the cases we know so far."}),Object(d.jsxs)("p",{children:['All tested positive cases are further divided into three categories as shown in the pie chart: active, recovered, and deaths. The recovered percentage is intended to give us an idea of how far we are from global recovery. The "clock", however, can turn back when the virus is spreading rapidly. Active cases represents the people still suffering from the disease. Most active cases will recover, but some will not. According to'," ",Object(d.jsxs)("a",{href:"https://www.nytimes.com/interactive/2020/world/asia/china-coronavirus-contain.html",children:["an early report"," "]}),"by ",Object(d.jsx)("i",{children:"the New York Times"}),", the fatality rate for those infected is likely to be lower than 3%."]}),Object(d.jsx)(h,{})]})]})},ge=Object(b.z)("%Y-%m-%d"),we=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=!0;return Object(b.g)("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/jhu/new_cases.csv").then((function(t){e&&c(function(e){return e.map((function(e){return{date:ge(e.date),newCases:+e.World}}))}(t))})),function(){e=!1}}),[]),n},ye=function(e){var t=e.title;return Object(d.jsx)("div",{className:"chart-title",children:t})},ke=function(e){var t=e.items;return Object(d.jsx)("div",{className:"small-table",children:Object(d.jsxs)("table",{children:[Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{children:t.map((function(e,t){return Object(d.jsx)("th",{children:e.heading},t)}))})}),Object(d.jsx)("tbody",{children:Object(d.jsx)("tr",{children:t.map((function(e,t){return Object(d.jsx)("td",{className:"numerical-data",children:e.value},t)}))})})]})})},_e=n(50),Ce=n.n(_e),Ne=function(e){var t=e.xScale,n=e.innerHeight,c=e.tickFormat,r=e.tickCount,i=void 0===r?6:r,s=e.tickOffset,o=void 0===s?3:s,l=Object(a.useRef)();return Object(a.useEffect)((function(){var e=Object(b.w)(l.current),a=Object(b.d)(t).ticks(i,c).tickSize(-n).tickPadding(o);e.call(a)}),[t,n,c,o,i]),Object(d.jsx)("g",{ref:l,className:Ce.a.tick,transform:"translate(0, ".concat(n,")")})},Se=function(e){var t=e.yScale,n=e.innerWidth,c=e.tickFormat,r=e.tickOffset,i=void 0===r?3:r,s=Object(a.useRef)();return Object(a.useEffect)((function(){var e=Object(b.w)(s.current),a=Object(b.e)(t).tickSize(n).tickPadding(i).tickFormat(c);e.call(a)}),[t,n,c,i]),Object(d.jsx)("g",{ref:s,className:Ce.a.tick,transform:"translate(".concat(n,", 0)")})},De=function(e){var t=e.value,n=e.xScale,a=e.innerHeight,c=n(t),r=a;return Object(d.jsx)("line",{className:Ce.a.markerLine,x1:c,y1:0,x2:c,y2:r})},Me=function(e){var t=e.data,n=e.areaGenerator,c=e.onHover,r=e.innerWidth,i=e.innerHeight;return Object(a.useMemo)((function(){var e=t.map((function(e){return n.x()(e)}));return Object(d.jsx)("g",{className:Ce.a.captureArea,children:Object(d.jsx)("rect",{width:r,height:i,onTouchStart:function(n){n.preventDefault();var a=Object(b.f)(e,Object(b.p)(n)[0]);c(t[a])},onPointerMove:function(n){var a=Object(b.f)(e,Object(b.p)(n)[0]);c(t[a])},onMouseMove:function(n){var a=Object(b.f)(e,Object(b.p)(n)[0]);c(t[a])}})})}),[t,n,i,r,c])},Le=window.innerWidth<1e3?window.innerWidth:1e3,Ae=Le>480?.6*Le:.8*Le,Fe=20,Ve=0,Re=40,Te=65,Ee=function(e){return e.date},He=Object(b.y)("%b, %Y"),We=Object(b.y)("%-m/%-d, %y"),Pe=function(e){return e.newCases},Be=Object(b.j)(".2s"),Ie=function(e){return Be(e)},Ge=function(e){var t=e.data,n=Object(a.useState)(t[t.length-1]),c=Object(i.a)(n,2),r=c[0],s=c[1],o=Ae-Fe-Re,l=Le-Te-Ve,j=Object(a.useMemo)((function(){return Object(b.u)().domain(Object(b.i)(t,Ee)).range([0,l]).nice()}),[t,l]),u=Object(a.useMemo)((function(){return Object(b.r)().domain([0,Object(b.n)(t,Pe)]).range([o,0]).nice()}),[t,o]),h=Object(a.useCallback)(s,[s]),O=Object(a.useMemo)((function(){return Object(b.b)().x((function(e){return j(Ee(e))})).y1((function(e){return u(Pe(e))})).y0(u(0)).curve(b.h)}),[j,u]),f=function(e){var t=e.activeData,n=e.className;return Object(d.jsxs)("text",{className:n,textAnchor:"end",x:0,y:-5,children:[Object(d.jsx)("tspan",{x:"-10",dy:"0",fontWeight:"bold",children:t.newCases.toLocaleString()}),Object(d.jsx)("tspan",{x:"-10",dy:"1.5em",children:We(t.date)})]})};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("svg",{viewBox:"0 0 ".concat(Le," ").concat(Ae),preserveAspectRatio:"xMinYMid",children:Object(d.jsxs)("g",{transform:"translate(".concat(Te,", ").concat(Fe,")"),children:[Object(d.jsx)(Ne,{innerHeight:o,xScale:j,tickFormat:He,tickOffset:7,tickCount:Le>480?6:2}),Object(d.jsx)(Se,{innerWidth:l,yScale:u,tickOffset:7,tickFormat:Ie}),Object(d.jsx)("g",{className:Ce.a.marks,children:Object(d.jsx)("path",{d:O(t)})}),r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("g",{className:Ce.a.marks,children:Object(d.jsx)("path",{d:O(t)})}),Object(d.jsx)(De,{value:r.date,xScale:j,innerHeight:o}),Object(d.jsxs)("g",{transform:"translate(".concat(O.x()(r),", ").concat(O.y1()(r),")"),children:[Object(d.jsx)("circle",{className:Ce.a.dataPoint,r:5}),Object(d.jsx)(f,{activeData:r,className:Ce.a.tooltipStroke}),Object(d.jsx)(f,{activeData:r,className:Ce.a.tooltip})]})]}):null,Object(d.jsx)(Me,{onHover:h,data:t,areaGenerator:O,innerWidth:l,innerHeight:o})]})})})},Ye=function(e){var t=e.children,n=e.id;return Object(d.jsxs)("div",{className:"wrap-collapsible",children:[Object(d.jsx)("input",{id:n,className:"toggle",type:"checkbox"}),Object(d.jsx)("label",{htmlFor:n,className:"lbl-toggle",children:"What does this chart tell us?"}),Object(d.jsx)("div",{className:"collapsible-content",children:Object(d.jsx)("div",{className:"content-inner",children:t})})]})},ze=function(e,t){return e.reduce((function(e,n){return e+n[t]}),0)},Je="Daily New Cases Worldwide",Ue=function(){return Object(d.jsxs)("p",{className:"footnote",children:["Data source: Center for Systems Science and Engineering (CSSE) at Johns Hopkins University (",Object(d.jsx)("a",{href:"https://github.com/owid/covid-19-data/tree/master/public/data/jhu",children:"Our Wolrd in Data"}),")"]})},Ke=function(){var e=we();if(!e)return Object(d.jsx)(j,{});var t=ze(e.slice(-7),"newCases")/7,n=ze(e.slice(-14,-7),"newCases")/7,a=[{heading:"Average previous week",value:Math.round(n).toLocaleString()},{heading:"Average this week",value:Math.round(t).toLocaleString()},{heading:"Growth factor",value:(t/n).toFixed(2)}];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(ye,{title:Je}),Object(d.jsx)(ke,{items:a}),Object(d.jsx)(Ge,{data:e}),Object(d.jsxs)(Ye,{id:Je,children:[Object(d.jsx)("p",{children:'This chart is intended to show how fast the viruses are spreading over time. Each data point represents the number of people tested positive on that day, therefore "new cases".'}),Object(d.jsx)("p",{children:'During a contagious disease\'s growing period, an infected person is likely to spread the virus to more than one healthy person, so the latter days will see more new cases than the previous days. For example, if we have 10 new cases today but only 5 new cases yesterday, it can mean each of those 5 people passed the disease to 2 more people during the day. So, the "2" is the "growth factor" listed here above the chart. Only when the growth factor constantly goes below 1, have we the chance to see an end to the pandemic.'}),Object(d.jsx)("p",{children:"Since most societies work in a weekly basis, we can see the data regularly fluctuates inside of a week. To avoid misintepretation, this chart calculates the growth factor with weekly averages."}),Object(d.jsx)(Ue,{})]})]})},qe=n(116),Qe=n.n(qe),Xe=function(e){var t=e.xScale,n=e.innerHeight,a=e.tickFormat,c=e.tickOffset,r=void 0===c?3:c,i=e.tickCount,s=void 0===i?6:i;return t.ticks(s).map((function(e){return Object(d.jsxs)("g",{className:Qe.a.tick,transform:"translate(".concat(t(e),", 0)"),children:[Object(d.jsx)("line",{y2:n}),Object(d.jsx)("text",{y:n+r,dy:"0.71em",style:{textAnchor:"middle"},children:a(e)})]},e)}))},Ze=function(e){var t=e.countryScale,n=e.ageScale,a=e.width,c=e.margin,r=e.tickOffset,i=void 0===r?3:r;return n.domain().map((function(e){return Object(d.jsxs)("g",{className:Qe.a.tick,transform:"translate(0,".concat(n(e)+n.bandwidth()/2,")"),children:[Object(d.jsx)("rect",{x:-c.left,y:-n.bandwidth()/2-4,width:a,height:n.bandwidth()+8}),Object(d.jsx)("text",{dy:".32em",x:-c.left+i,style:{fontSize:"1.1em",fontWeight:"bold",textAnchor:"start"},children:e}),t.domain().map((function(e){return Object(d.jsx)("text",{dy:".72em",x:-i,y:t(e)-n.bandwidth()/2,style:{textAnchor:"end",dominantBaseline:"middle"},children:e},e)}))]},e)}))},$e=function(e){var t=e.data,n=e.ageGroups,a=e.ageScale,c=e.xScale,r=e.countryScale,i=e.countryValue,s=e.colorScale,o=e.tooltipFormat,l=e.onHover,j=e.hoveredValue,u=e.fadeOpacity,h=void 0===u?.2:u;return t.map((function(e){return n.map((function(t){return Object(d.jsxs)("g",{className:Qe.a.marks,onMouseEnter:function(){return l(i(e))},onMouseLeave:function(){return l(null)},opacity:j&&j!==i(e)?h:1,children:[Object(d.jsx)("rect",{x:0,y:a(t)+r(i(e)),width:c(e[t]),height:r.bandwidth(),fill:s(i(e)),children:Object(d.jsx)("title",{children:"".concat(t,": ").concat(o(e[t]))})}),Object(d.jsx)("text",{x:c(e[t])+3,y:a(t)+r(i(e)),dy:".68em",style:{textAnchor:"start",dominantBaseline:"middle"},children:o(e[t])})]},i(e)+t)}))}))},et=window.innerWidth<1e3?window.innerWidth:1e3,tt=et>480?.9*et:2*et,nt={top:20,right:40,bottom:30,left:170},at=function(e){return e.Country},ct=function(e){return e+"%"},rt=tt-nt.top-nt.bottom,it=et-nt.left-nt.right,st=function(e){var t=e.data,n=Object(a.useState)(null),c=Object(i.a)(n,2),r=c[0],s=c[1],o=t.columns.slice(1),l=Object(a.useMemo)((function(){return Object(b.r)().domain([0,Object(b.n)(t,(function(e){return Object(b.n)(o,(function(t){return e[t]}))}))]).range([0,it]).nice()}),[o,t]),j=Object(a.useMemo)((function(){return Object(b.q)().domain(o).range([0,rt]).paddingInner(.15)}),[o]),u=Object(a.useMemo)((function(){return Object(b.q)().domain(t.map(at)).range([j.bandwidth(),0]).paddingInner(.1)}),[j,t]),h=Object(a.useMemo)((function(){return Object(b.s)().domain(t.map(at)).range(b.v)}),[t]);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("svg",{viewBox:"0 0 ".concat(et," ").concat(tt),preserveAspectRatio:"xMinYMid",children:Object(d.jsxs)("g",{transform:"translate(".concat(nt.left,", ").concat(nt.top,")"),children:[Object(d.jsx)(Xe,{innerHeight:rt,xScale:l,tickFormat:ct,tickOffset:8}),Object(d.jsx)(Ze,{countryScale:u,ageScale:j,margin:nt,width:et}),Object(d.jsx)($e,{data:t,ageScale:j,ageGroups:o,xScale:l,countryScale:u,countryValue:at,colorScale:h,tooltipFormat:ct,onHover:s,hoveredValue:r,fadeOpacity:.3})]})})})},ot=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("p",{className:"footnote",children:["Data sources: Chinese Center for Disease Control and Prevention (CDC); Spanish Ministry of Health; Korea Centers for Disease Control and Prevention (KCDC); Onder G, Rezza G, Brusaferro S. Case-Fatality Rate and Characteristics of Patients Dying in Relation to COVID-19 in Italy. JAMA. (This is a remake of"," ",Object(d.jsx)("a",{href:"https://ourworldindata.org/mortality-risk-covid#case-fatality-rate-of-covid-19-by-age",children:"the same chart"})," ","by Hannah Ritchie and Max Roser published in OurWorldinData.org)"]}),Object(d.jsx)("p",{className:"footnote",children:"Licensed under CC-BY by the authors Hannah Ritchie and Max Roser."})]})},lt=function(e){var t=e.id;return Object(d.jsxs)("div",{className:"wrap-collapsible",children:[Object(d.jsx)("input",{id:t,className:"toggle",type:"checkbox"}),Object(d.jsx)("label",{htmlFor:t,className:"lbl-toggle",children:"What does this chart tell us?"}),Object(d.jsx)("div",{className:"collapsible-content",children:Object(d.jsxs)("div",{className:"content-inner",children:[Object(d.jsx)("p",{children:"This chart gives us a rough idea of which age groups are most at risk to COVID-19. If we know which groups are most likely to die from the disease, precautions and resouces like vaccines can be directed to the ones who need them most. According to this chart, the elderly are most likely to die from COVID-19."}),Object(d.jsx)("p",{children:"The data presented in the chart are calculated from the number of deaths divided by the number of confirmed cases in each age group. Since COVID-19 is still an ongoing pandemic, these numbers can change over time and conditions. There are two main limitations to keep in mind when interpreting this chart:"}),Object(d.jsxs)("ol",{children:[Object(d.jsx)("li",{children:"Since not everyone is tested within the population, we do not know the real number of infected cases."}),Object(d.jsx)("li",{children:"Some infected individuals are still alive at the time of recording, but will eventually die from the disease."})]}),Object(d.jsx)(ot,{})]})})]})},dt=function(e){var t=e.title;return Object(d.jsx)("div",{className:"chart-title",children:t})},jt=function(){var e=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=!0;return Object(b.g)("https://gist.githubusercontent.com/mgeorgetw/965bfe365ab8e70e2ee34c9a5d4d594a/raw/COVID19CaseFatalityRatesByAge.csv",b.c).then((function(t){e&&c(t)})),function(){e=!1}}),[]),n}();return e?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(dt,{title:"Case fatality rates by age"}),Object(d.jsx)(st,{data:e}),Object(d.jsx)(lt,{id:"caseFatalityRetes"})]}):Object(d.jsx)(j,{})},ut=n(255),ht=n.n(ut),bt=n(257),Ot=n(256),ft="Taiwan",xt=function(){return Object(d.jsxs)("ul",{className:"flex-card-list",children:[Object(d.jsx)(u,{children:Object(d.jsx)(pe,{})}),Object(d.jsx)(u,{children:Object(d.jsx)(Ke,{})}),Object(d.jsx)(u,{children:Object(d.jsx)(X,{})}),Object(d.jsx)(u,{children:Object(d.jsx)(Q,{area:ft,chart_type:"newCases"})}),Object(d.jsx)(u,{children:Object(d.jsx)(Q,{area:ft,chart_type:"newDeaths"})}),Object(d.jsx)(u,{children:Object(d.jsx)(jt,{})})]})},mt=function(){var e=Object(a.useState)("global"),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){return Object(l.cookieExists)("view")?c(Object(l.findCookie)("view")):Object(l.setCookie)("view","global"),ht.a.init({mainElement:"body",onRefresh:function(){window.location.reload()},iconArrow:o.a.renderToString(Object(d.jsx)(Ot.a,{icon:bt.a})),iconRefreshing:o.a.renderToString(Object(d.jsx)(Ot.a,{icon:bt.a,spin:!0}))}),function(){ht.a.destroyAll()}}),[]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)($,{}),Object(d.jsx)(ee,{view:n,setView:c}),"global"===n?Object(d.jsx)(xt,{}):Object(d.jsx)(M,{}),Object(d.jsx)(h,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(d.jsx)(mt,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[930,1,2]]]);
//# sourceMappingURL=main.fea21277.chunk.js.map